(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const _ of u)if(_.type==="childList")for(const y of _.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&s(y)}).observe(document,{childList:!0,subtree:!0});function r(u){const _={};return u.integrity&&(_.integrity=u.integrity),u.referrerPolicy&&(_.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?_.credentials="include":u.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function s(u){if(u.ep)return;u.ep=!0;const _=r(u);fetch(u.href,_)}})();function Nd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Zc={exports:{}},Tn={},eh={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fs=Symbol.for("react.element"),Hd=Symbol.for("react.portal"),zd=Symbol.for("react.fragment"),$d=Symbol.for("react.strict_mode"),Wd=Symbol.for("react.profiler"),Ud=Symbol.for("react.provider"),jd=Symbol.for("react.context"),Vd=Symbol.for("react.forward_ref"),Kd=Symbol.for("react.suspense"),Gd=Symbol.for("react.memo"),qd=Symbol.for("react.lazy"),Ml=Symbol.iterator;function Xd(e){return e===null||typeof e!="object"?null:(e=Ml&&e[Ml]||e["@@iterator"],typeof e=="function"?e:null)}var th={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rh=Object.assign,ih={};function di(e,t,r){this.props=e,this.context=t,this.refs=ih,this.updater=r||th}di.prototype.isReactComponent={};di.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};di.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function sh(){}sh.prototype=di.prototype;function Ra(e,t,r){this.props=e,this.context=t,this.refs=ih,this.updater=r||th}var Da=Ra.prototype=new sh;Da.constructor=Ra;rh(Da,di.prototype);Da.isPureReactComponent=!0;var Al=Array.isArray,nh=Object.prototype.hasOwnProperty,Ma={current:null},oh={key:!0,ref:!0,__self:!0,__source:!0};function ah(e,t,r){var s,u={},_=null,y=null;if(t!=null)for(s in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(_=""+t.key),t)nh.call(t,s)&&!oh.hasOwnProperty(s)&&(u[s]=t[s]);var i=arguments.length-2;if(i===1)u.children=r;else if(1<i){for(var a=Array(i),f=0;f<i;f++)a[f]=arguments[f+2];u.children=a}if(e&&e.defaultProps)for(s in i=e.defaultProps,i)u[s]===void 0&&(u[s]=i[s]);return{$$typeof:fs,type:e,key:_,ref:y,props:u,_owner:Ma.current}}function Yd(e,t){return{$$typeof:fs,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Aa(e){return typeof e=="object"&&e!==null&&e.$$typeof===fs}function Qd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Tl=/\/+/g;function to(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Qd(""+e.key):t.toString(36)}function $s(e,t,r,s,u){var _=typeof e;(_==="undefined"||_==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(_){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case fs:case Hd:y=!0}}if(y)return y=e,u=u(y),e=s===""?"."+to(y,0):s,Al(u)?(r="",e!=null&&(r=e.replace(Tl,"$&/")+"/"),$s(u,t,r,"",function(f){return f})):u!=null&&(Aa(u)&&(u=Yd(u,r+(!u.key||y&&y.key===u.key?"":(""+u.key).replace(Tl,"$&/")+"/")+e)),t.push(u)),1;if(y=0,s=s===""?".":s+":",Al(e))for(var i=0;i<e.length;i++){_=e[i];var a=s+to(_,i);y+=$s(_,t,r,a,u)}else if(a=Xd(e),typeof a=="function")for(e=a.call(e),i=0;!(_=e.next()).done;)_=_.value,a=s+to(_,i++),y+=$s(_,t,r,a,u);else if(_==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Es(e,t,r){if(e==null)return e;var s=[],u=0;return $s(e,s,"","",function(_){return t.call(r,_,u++)}),s}function Jd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ye={current:null},Ws={transition:null},Zd={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:Ws,ReactCurrentOwner:Ma};function lh(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:Es,forEach:function(e,t,r){Es(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Es(e,function(){t++}),t},toArray:function(e){return Es(e,function(t){return t})||[]},only:function(e){if(!Aa(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ae.Component=di;ae.Fragment=zd;ae.Profiler=Wd;ae.PureComponent=Ra;ae.StrictMode=$d;ae.Suspense=Kd;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zd;ae.act=lh;ae.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=rh({},e.props),u=e.key,_=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(_=t.ref,y=Ma.current),t.key!==void 0&&(u=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(a in t)nh.call(t,a)&&!oh.hasOwnProperty(a)&&(s[a]=t[a]===void 0&&i!==void 0?i[a]:t[a])}var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){i=Array(a);for(var f=0;f<a;f++)i[f]=arguments[f+2];s.children=i}return{$$typeof:fs,type:e.type,key:u,ref:_,props:s,_owner:y}};ae.createContext=function(e){return e={$$typeof:jd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Ud,_context:e},e.Consumer=e};ae.createElement=ah;ae.createFactory=function(e){var t=ah.bind(null,e);return t.type=e,t};ae.createRef=function(){return{current:null}};ae.forwardRef=function(e){return{$$typeof:Vd,render:e}};ae.isValidElement=Aa;ae.lazy=function(e){return{$$typeof:qd,_payload:{_status:-1,_result:e},_init:Jd}};ae.memo=function(e,t){return{$$typeof:Gd,type:e,compare:t===void 0?null:t}};ae.startTransition=function(e){var t=Ws.transition;Ws.transition={};try{e()}finally{Ws.transition=t}};ae.unstable_act=lh;ae.useCallback=function(e,t){return Ye.current.useCallback(e,t)};ae.useContext=function(e){return Ye.current.useContext(e)};ae.useDebugValue=function(){};ae.useDeferredValue=function(e){return Ye.current.useDeferredValue(e)};ae.useEffect=function(e,t){return Ye.current.useEffect(e,t)};ae.useId=function(){return Ye.current.useId()};ae.useImperativeHandle=function(e,t,r){return Ye.current.useImperativeHandle(e,t,r)};ae.useInsertionEffect=function(e,t){return Ye.current.useInsertionEffect(e,t)};ae.useLayoutEffect=function(e,t){return Ye.current.useLayoutEffect(e,t)};ae.useMemo=function(e,t){return Ye.current.useMemo(e,t)};ae.useReducer=function(e,t,r){return Ye.current.useReducer(e,t,r)};ae.useRef=function(e){return Ye.current.useRef(e)};ae.useState=function(e){return Ye.current.useState(e)};ae.useSyncExternalStore=function(e,t,r){return Ye.current.useSyncExternalStore(e,t,r)};ae.useTransition=function(){return Ye.current.useTransition()};ae.version="18.3.1";eh.exports=ae;var $=eh.exports;const Le=Nd($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef=$,tf=Symbol.for("react.element"),rf=Symbol.for("react.fragment"),sf=Object.prototype.hasOwnProperty,nf=ef.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,of={key:!0,ref:!0,__self:!0,__source:!0};function ch(e,t,r){var s,u={},_=null,y=null;r!==void 0&&(_=""+r),t.key!==void 0&&(_=""+t.key),t.ref!==void 0&&(y=t.ref);for(s in t)sf.call(t,s)&&!of.hasOwnProperty(s)&&(u[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)u[s]===void 0&&(u[s]=t[s]);return{$$typeof:tf,type:e,key:_,ref:y,props:u,_owner:nf.current}}Tn.Fragment=rf;Tn.jsx=ch;Tn.jsxs=ch;Zc.exports=Tn;var K=Zc.exports,To={},hh={exports:{}},ut={},uh={exports:{}},dh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,k){var A=O.length;O.push(k);e:for(;0<A;){var B=A-1>>>1,I=O[B];if(0<u(I,k))O[B]=k,O[A]=I,A=B;else break e}}function r(O){return O.length===0?null:O[0]}function s(O){if(O.length===0)return null;var k=O[0],A=O.pop();if(A!==k){O[0]=A;e:for(var B=0,I=O.length,U=I>>>1;B<U;){var V=2*(B+1)-1,Q=O[V],X=V+1,F=O[X];if(0>u(Q,A))X<I&&0>u(F,Q)?(O[B]=F,O[X]=A,B=X):(O[B]=Q,O[V]=A,B=V);else if(X<I&&0>u(F,A))O[B]=F,O[X]=A,B=X;else break e}}return k}function u(O,k){var A=O.sortIndex-k.sortIndex;return A!==0?A:O.id-k.id}if(typeof performance=="object"&&typeof performance.now=="function"){var _=performance;e.unstable_now=function(){return _.now()}}else{var y=Date,i=y.now();e.unstable_now=function(){return y.now()-i}}var a=[],f=[],p=1,h=null,v=3,C=!1,w=!1,d=!1,o=typeof setTimeout=="function"?setTimeout:null,c=typeof clearTimeout=="function"?clearTimeout:null,n=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function l(O){for(var k=r(f);k!==null;){if(k.callback===null)s(f);else if(k.startTime<=O)s(f),k.sortIndex=k.expirationTime,t(a,k);else break;k=r(f)}}function g(O){if(d=!1,l(O),!w)if(r(a)!==null)w=!0,H(b);else{var k=r(f);k!==null&&N(g,k.startTime-O)}}function b(O,k){w=!1,d&&(d=!1,c(m),m=-1),C=!0;var A=v;try{for(l(k),h=r(a);h!==null&&(!(h.expirationTime>k)||O&&!M());){var B=h.callback;if(typeof B=="function"){h.callback=null,v=h.priorityLevel;var I=B(h.expirationTime<=k);k=e.unstable_now(),typeof I=="function"?h.callback=I:h===r(a)&&s(a),l(k)}else s(a);h=r(a)}if(h!==null)var U=!0;else{var V=r(f);V!==null&&N(g,V.startTime-k),U=!1}return U}finally{h=null,v=A,C=!1}}var S=!1,E=null,m=-1,x=5,L=-1;function M(){return!(e.unstable_now()-L<x)}function R(){if(E!==null){var O=e.unstable_now();L=O;var k=!0;try{k=E(!0,O)}finally{k?D():(S=!1,E=null)}}else S=!1}var D;if(typeof n=="function")D=function(){n(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,z=P.port2;P.port1.onmessage=R,D=function(){z.postMessage(null)}}else D=function(){o(R,0)};function H(O){E=O,S||(S=!0,D())}function N(O,k){m=o(function(){O(e.unstable_now())},k)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){w||C||(w=!0,H(b))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(a)},e.unstable_next=function(O){switch(v){case 1:case 2:case 3:var k=3;break;default:k=v}var A=v;v=k;try{return O()}finally{v=A}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,k){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var A=v;v=O;try{return k()}finally{v=A}},e.unstable_scheduleCallback=function(O,k,A){var B=e.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?B+A:B):A=B,O){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=A+I,O={id:p++,callback:k,priorityLevel:O,startTime:A,expirationTime:I,sortIndex:-1},A>B?(O.sortIndex=A,t(f,O),r(a)===null&&O===r(f)&&(d?(c(m),m=-1):d=!0,N(g,A-B))):(O.sortIndex=I,t(a,O),w||C||(w=!0,H(b))),O},e.unstable_shouldYield=M,e.unstable_wrapCallback=function(O){var k=v;return function(){var A=v;v=k;try{return O.apply(this,arguments)}finally{v=A}}}})(dh);uh.exports=dh;var af=uh.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lf=$,ht=af;function G(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fh=new Set,Gi={};function Pr(e,t){ni(e,t),ni(e+"Capture",t)}function ni(e,t){for(Gi[e]=t,e=0;e<t.length;e++)fh.add(t[e])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Po=Object.prototype.hasOwnProperty,cf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pl={},Bl={};function hf(e){return Po.call(Bl,e)?!0:Po.call(Pl,e)?!1:cf.test(e)?Bl[e]=!0:(Pl[e]=!0,!1)}function uf(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function df(e,t,r,s){if(t===null||typeof t>"u"||uf(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qe(e,t,r,s,u,_,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=u,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=_,this.removeEmptyString=y}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){$e[e]=new Qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];$e[t]=new Qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){$e[e]=new Qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){$e[e]=new Qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){$e[e]=new Qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){$e[e]=new Qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){$e[e]=new Qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){$e[e]=new Qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){$e[e]=new Qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ta=/[\-:]([a-z])/g;function Pa(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ta,Pa);$e[t]=new Qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ta,Pa);$e[t]=new Qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ta,Pa);$e[t]=new Qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){$e[e]=new Qe(e,1,!1,e.toLowerCase(),null,!1,!1)});$e.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){$e[e]=new Qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ba(e,t,r,s){var u=$e.hasOwnProperty(t)?$e[t]:null;(u!==null?u.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(df(t,r,u,s)&&(r=null),s||u===null?hf(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):u.mustUseProperty?e[u.propertyName]=r===null?u.type===3?!1:"":r:(t=u.attributeName,s=u.attributeNamespace,r===null?e.removeAttribute(t):(u=u.type,r=u===3||u===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var qt=lf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xs=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),zr=Symbol.for("react.fragment"),Oa=Symbol.for("react.strict_mode"),Bo=Symbol.for("react.profiler"),_h=Symbol.for("react.provider"),ph=Symbol.for("react.context"),Ia=Symbol.for("react.forward_ref"),Oo=Symbol.for("react.suspense"),Io=Symbol.for("react.suspense_list"),Fa=Symbol.for("react.memo"),er=Symbol.for("react.lazy"),vh=Symbol.for("react.offscreen"),Ol=Symbol.iterator;function bi(e){return e===null||typeof e!="object"?null:(e=Ol&&e[Ol]||e["@@iterator"],typeof e=="function"?e:null)}var Ee=Object.assign,ro;function Ai(e){if(ro===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ro=t&&t[1]||""}return`
`+ro+e}var io=!1;function so(e,t){if(!e||io)return"";io=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var s=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){s=f}e.call(t.prototype)}else{try{throw Error()}catch(f){s=f}e()}}catch(f){if(f&&s&&typeof f.stack=="string"){for(var u=f.stack.split(`
`),_=s.stack.split(`
`),y=u.length-1,i=_.length-1;1<=y&&0<=i&&u[y]!==_[i];)i--;for(;1<=y&&0<=i;y--,i--)if(u[y]!==_[i]){if(y!==1||i!==1)do if(y--,i--,0>i||u[y]!==_[i]){var a=`
`+u[y].replace(" at new "," at ");return e.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",e.displayName)),a}while(1<=y&&0<=i);break}}}finally{io=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Ai(e):""}function ff(e){switch(e.tag){case 5:return Ai(e.type);case 16:return Ai("Lazy");case 13:return Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 2:case 15:return e=so(e.type,!1),e;case 11:return e=so(e.type.render,!1),e;case 1:return e=so(e.type,!0),e;default:return""}}function Fo(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zr:return"Fragment";case Hr:return"Portal";case Bo:return"Profiler";case Oa:return"StrictMode";case Oo:return"Suspense";case Io:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ph:return(e.displayName||"Context")+".Consumer";case _h:return(e._context.displayName||"Context")+".Provider";case Ia:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Fa:return t=e.displayName||null,t!==null?t:Fo(e.type)||"Memo";case er:t=e._payload,e=e._init;try{return Fo(e(t))}catch{}}return null}function _f(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Fo(t);case 8:return t===Oa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function pr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function gh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function pf(e){var t=gh(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var u=r.get,_=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(y){s=""+y,_.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(y){s=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ls(e){e._valueTracker||(e._valueTracker=pf(e))}function mh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=gh(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function en(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function No(e,t){var r=t.checked;return Ee({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Il(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=pr(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sh(e,t){t=t.checked,t!=null&&Ba(e,"checked",t,!1)}function Ho(e,t){Sh(e,t);var r=pr(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?zo(e,t.type,r):t.hasOwnProperty("defaultValue")&&zo(e,t.type,pr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Fl(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function zo(e,t,r){(t!=="number"||en(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ti=Array.isArray;function Jr(e,t,r,s){if(e=e.options,t){t={};for(var u=0;u<r.length;u++)t["$"+r[u]]=!0;for(r=0;r<e.length;r++)u=t.hasOwnProperty("$"+e[r].value),e[r].selected!==u&&(e[r].selected=u),u&&s&&(e[r].defaultSelected=!0)}else{for(r=""+pr(r),t=null,u=0;u<e.length;u++){if(e[u].value===r){e[u].selected=!0,s&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function $o(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(G(91));return Ee({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(G(92));if(Ti(r)){if(1<r.length)throw Error(G(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:pr(r)}}function yh(e,t){var r=pr(t.value),s=pr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Hl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ch(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ch(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ks,wh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,u){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,u)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ks=ks||document.createElement("div"),ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function qi(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vf=["Webkit","ms","Moz","O"];Object.keys(Oi).forEach(function(e){vf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Oi[t]=Oi[e]})});function bh(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Oi.hasOwnProperty(e)&&Oi[e]?(""+t).trim():t+"px"}function Eh(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,u=bh(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,u):e[r]=u}}var gf=Ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uo(e,t){if(t){if(gf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(G(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(G(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(G(61))}if(t.style!=null&&typeof t.style!="object")throw Error(G(62))}}function jo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vo=null;function Na(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ko=null,Zr=null,ei=null;function zl(e){if(e=vs(e)){if(typeof Ko!="function")throw Error(G(280));var t=e.stateNode;t&&(t=Fn(t),Ko(e.stateNode,e.type,t))}}function xh(e){Zr?ei?ei.push(e):ei=[e]:Zr=e}function Lh(){if(Zr){var e=Zr,t=ei;if(ei=Zr=null,zl(e),t)for(e=0;e<t.length;e++)zl(t[e])}}function kh(e,t){return e(t)}function Rh(){}var no=!1;function Dh(e,t,r){if(no)return e(t,r);no=!0;try{return kh(e,t,r)}finally{no=!1,(Zr!==null||ei!==null)&&(Rh(),Lh())}}function Xi(e,t){var r=e.stateNode;if(r===null)return null;var s=Fn(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(G(231,t,typeof r));return r}var Go=!1;if(Ut)try{var Ei={};Object.defineProperty(Ei,"passive",{get:function(){Go=!0}}),window.addEventListener("test",Ei,Ei),window.removeEventListener("test",Ei,Ei)}catch{Go=!1}function mf(e,t,r,s,u,_,y,i,a){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(p){this.onError(p)}}var Ii=!1,tn=null,rn=!1,qo=null,Sf={onError:function(e){Ii=!0,tn=e}};function yf(e,t,r,s,u,_,y,i,a){Ii=!1,tn=null,mf.apply(Sf,arguments)}function Cf(e,t,r,s,u,_,y,i,a){if(yf.apply(this,arguments),Ii){if(Ii){var f=tn;Ii=!1,tn=null}else throw Error(G(198));rn||(rn=!0,qo=f)}}function Br(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Mh(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $l(e){if(Br(e)!==e)throw Error(G(188))}function wf(e){var t=e.alternate;if(!t){if(t=Br(e),t===null)throw Error(G(188));return t!==e?null:e}for(var r=e,s=t;;){var u=r.return;if(u===null)break;var _=u.alternate;if(_===null){if(s=u.return,s!==null){r=s;continue}break}if(u.child===_.child){for(_=u.child;_;){if(_===r)return $l(u),e;if(_===s)return $l(u),t;_=_.sibling}throw Error(G(188))}if(r.return!==s.return)r=u,s=_;else{for(var y=!1,i=u.child;i;){if(i===r){y=!0,r=u,s=_;break}if(i===s){y=!0,s=u,r=_;break}i=i.sibling}if(!y){for(i=_.child;i;){if(i===r){y=!0,r=_,s=u;break}if(i===s){y=!0,s=_,r=u;break}i=i.sibling}if(!y)throw Error(G(189))}}if(r.alternate!==s)throw Error(G(190))}if(r.tag!==3)throw Error(G(188));return r.stateNode.current===r?e:t}function Ah(e){return e=wf(e),e!==null?Th(e):null}function Th(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Th(e);if(t!==null)return t;e=e.sibling}return null}var Ph=ht.unstable_scheduleCallback,Wl=ht.unstable_cancelCallback,bf=ht.unstable_shouldYield,Ef=ht.unstable_requestPaint,Re=ht.unstable_now,xf=ht.unstable_getCurrentPriorityLevel,Ha=ht.unstable_ImmediatePriority,Bh=ht.unstable_UserBlockingPriority,sn=ht.unstable_NormalPriority,Lf=ht.unstable_LowPriority,Oh=ht.unstable_IdlePriority,Pn=null,Ot=null;function kf(e){if(Ot&&typeof Ot.onCommitFiberRoot=="function")try{Ot.onCommitFiberRoot(Pn,e,void 0,(e.current.flags&128)===128)}catch{}}var xt=Math.clz32?Math.clz32:Mf,Rf=Math.log,Df=Math.LN2;function Mf(e){return e>>>=0,e===0?32:31-(Rf(e)/Df|0)|0}var Rs=64,Ds=4194304;function Pi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function nn(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,u=e.suspendedLanes,_=e.pingedLanes,y=r&268435455;if(y!==0){var i=y&~u;i!==0?s=Pi(i):(_&=y,_!==0&&(s=Pi(_)))}else y=r&~u,y!==0?s=Pi(y):_!==0&&(s=Pi(_));if(s===0)return 0;if(t!==0&&t!==s&&!(t&u)&&(u=s&-s,_=t&-t,u>=_||u===16&&(_&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-xt(t),u=1<<r,s|=e[r],t&=~u;return s}function Af(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tf(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,u=e.expirationTimes,_=e.pendingLanes;0<_;){var y=31-xt(_),i=1<<y,a=u[y];a===-1?(!(i&r)||i&s)&&(u[y]=Af(i,t)):a<=t&&(e.expiredLanes|=i),_&=~i}}function Xo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ih(){var e=Rs;return Rs<<=1,!(Rs&4194240)&&(Rs=64),e}function oo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function _s(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xt(t),e[t]=r}function Pf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var u=31-xt(r),_=1<<u;t[u]=0,s[u]=-1,e[u]=-1,r&=~_}}function za(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-xt(r),u=1<<s;u&t|e[s]&t&&(e[s]|=t),r&=~u}}var de=0;function Fh(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Nh,$a,Hh,zh,$h,Yo=!1,Ms=[],ar=null,lr=null,cr=null,Yi=new Map,Qi=new Map,ir=[],Bf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ul(e,t){switch(e){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Yi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(t.pointerId)}}function xi(e,t,r,s,u,_){return e===null||e.nativeEvent!==_?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:_,targetContainers:[u]},t!==null&&(t=vs(t),t!==null&&$a(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function Of(e,t,r,s,u){switch(t){case"focusin":return ar=xi(ar,e,t,r,s,u),!0;case"dragenter":return lr=xi(lr,e,t,r,s,u),!0;case"mouseover":return cr=xi(cr,e,t,r,s,u),!0;case"pointerover":var _=u.pointerId;return Yi.set(_,xi(Yi.get(_)||null,e,t,r,s,u)),!0;case"gotpointercapture":return _=u.pointerId,Qi.set(_,xi(Qi.get(_)||null,e,t,r,s,u)),!0}return!1}function Wh(e){var t=br(e.target);if(t!==null){var r=Br(t);if(r!==null){if(t=r.tag,t===13){if(t=Mh(r),t!==null){e.blockedOn=t,$h(e.priority,function(){Hh(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Us(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Vo=s,r.target.dispatchEvent(s),Vo=null}else return t=vs(r),t!==null&&$a(t),e.blockedOn=r,!1;t.shift()}return!0}function jl(e,t,r){Us(e)&&r.delete(t)}function If(){Yo=!1,ar!==null&&Us(ar)&&(ar=null),lr!==null&&Us(lr)&&(lr=null),cr!==null&&Us(cr)&&(cr=null),Yi.forEach(jl),Qi.forEach(jl)}function Li(e,t){e.blockedOn===t&&(e.blockedOn=null,Yo||(Yo=!0,ht.unstable_scheduleCallback(ht.unstable_NormalPriority,If)))}function Ji(e){function t(u){return Li(u,e)}if(0<Ms.length){Li(Ms[0],e);for(var r=1;r<Ms.length;r++){var s=Ms[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ar!==null&&Li(ar,e),lr!==null&&Li(lr,e),cr!==null&&Li(cr,e),Yi.forEach(t),Qi.forEach(t),r=0;r<ir.length;r++)s=ir[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<ir.length&&(r=ir[0],r.blockedOn===null);)Wh(r),r.blockedOn===null&&ir.shift()}var ti=qt.ReactCurrentBatchConfig,on=!0;function Ff(e,t,r,s){var u=de,_=ti.transition;ti.transition=null;try{de=1,Wa(e,t,r,s)}finally{de=u,ti.transition=_}}function Nf(e,t,r,s){var u=de,_=ti.transition;ti.transition=null;try{de=4,Wa(e,t,r,s)}finally{de=u,ti.transition=_}}function Wa(e,t,r,s){if(on){var u=Qo(e,t,r,s);if(u===null)go(e,t,s,an,r),Ul(e,s);else if(Of(u,e,t,r,s))s.stopPropagation();else if(Ul(e,s),t&4&&-1<Bf.indexOf(e)){for(;u!==null;){var _=vs(u);if(_!==null&&Nh(_),_=Qo(e,t,r,s),_===null&&go(e,t,s,an,r),_===u)break;u=_}u!==null&&s.stopPropagation()}else go(e,t,s,null,r)}}var an=null;function Qo(e,t,r,s){if(an=null,e=Na(s),e=br(e),e!==null)if(t=Br(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Mh(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return an=e,null}function Uh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xf()){case Ha:return 1;case Bh:return 4;case sn:case Lf:return 16;case Oh:return 536870912;default:return 16}default:return 16}}var nr=null,Ua=null,js=null;function jh(){if(js)return js;var e,t=Ua,r=t.length,s,u="value"in nr?nr.value:nr.textContent,_=u.length;for(e=0;e<r&&t[e]===u[e];e++);var y=r-e;for(s=1;s<=y&&t[r-s]===u[_-s];s++);return js=u.slice(e,1<s?1-s:void 0)}function Vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function As(){return!0}function Vl(){return!1}function dt(e){function t(r,s,u,_,y){this._reactName=r,this._targetInst=u,this.type=s,this.nativeEvent=_,this.target=y,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(r=e[i],this[i]=r?r(_):_[i]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?As:Vl,this.isPropagationStopped=Vl,this}return Ee(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),t}var fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ja=dt(fi),ps=Ee({},fi,{view:0,detail:0}),Hf=dt(ps),ao,lo,ki,Bn=Ee({},ps,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Va,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ki&&(ki&&e.type==="mousemove"?(ao=e.screenX-ki.screenX,lo=e.screenY-ki.screenY):lo=ao=0,ki=e),ao)},movementY:function(e){return"movementY"in e?e.movementY:lo}}),Kl=dt(Bn),zf=Ee({},Bn,{dataTransfer:0}),$f=dt(zf),Wf=Ee({},ps,{relatedTarget:0}),co=dt(Wf),Uf=Ee({},fi,{animationName:0,elapsedTime:0,pseudoElement:0}),jf=dt(Uf),Vf=Ee({},fi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kf=dt(Vf),Gf=Ee({},fi,{data:0}),Gl=dt(Gf),qf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Yf[e])?!!t[e]:!1}function Va(){return Qf}var Jf=Ee({},ps,{key:function(e){if(e.key){var t=qf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Va,charCode:function(e){return e.type==="keypress"?Vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zf=dt(Jf),e_=Ee({},Bn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ql=dt(e_),t_=Ee({},ps,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Va}),r_=dt(t_),i_=Ee({},fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),s_=dt(i_),n_=Ee({},Bn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),o_=dt(n_),a_=[9,13,27,32],Ka=Ut&&"CompositionEvent"in window,Fi=null;Ut&&"documentMode"in document&&(Fi=document.documentMode);var l_=Ut&&"TextEvent"in window&&!Fi,Vh=Ut&&(!Ka||Fi&&8<Fi&&11>=Fi),Xl=" ",Yl=!1;function Kh(e,t){switch(e){case"keyup":return a_.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $r=!1;function c_(e,t){switch(e){case"compositionend":return Gh(t);case"keypress":return t.which!==32?null:(Yl=!0,Xl);case"textInput":return e=t.data,e===Xl&&Yl?null:e;default:return null}}function h_(e,t){if($r)return e==="compositionend"||!Ka&&Kh(e,t)?(e=jh(),js=Ua=nr=null,$r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vh&&t.locale!=="ko"?null:t.data;default:return null}}var u_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!u_[e.type]:t==="textarea"}function qh(e,t,r,s){xh(s),t=ln(t,"onChange"),0<t.length&&(r=new ja("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Ni=null,Zi=null;function d_(e){nu(e,0)}function On(e){var t=jr(e);if(mh(t))return e}function f_(e,t){if(e==="change")return t}var Xh=!1;if(Ut){var ho;if(Ut){var uo="oninput"in document;if(!uo){var Jl=document.createElement("div");Jl.setAttribute("oninput","return;"),uo=typeof Jl.oninput=="function"}ho=uo}else ho=!1;Xh=ho&&(!document.documentMode||9<document.documentMode)}function Zl(){Ni&&(Ni.detachEvent("onpropertychange",Yh),Zi=Ni=null)}function Yh(e){if(e.propertyName==="value"&&On(Zi)){var t=[];qh(t,Zi,e,Na(e)),Dh(d_,t)}}function __(e,t,r){e==="focusin"?(Zl(),Ni=t,Zi=r,Ni.attachEvent("onpropertychange",Yh)):e==="focusout"&&Zl()}function p_(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return On(Zi)}function v_(e,t){if(e==="click")return On(t)}function g_(e,t){if(e==="input"||e==="change")return On(t)}function m_(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:m_;function es(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var u=r[s];if(!Po.call(t,u)||!kt(e[u],t[u]))return!1}return!0}function ec(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tc(e,t){var r=ec(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ec(r)}}function Qh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Jh(){for(var e=window,t=en();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=en(e.document)}return t}function Ga(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function S_(e){var t=Jh(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Qh(r.ownerDocument.documentElement,r)){if(s!==null&&Ga(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var u=r.textContent.length,_=Math.min(s.start,u);s=s.end===void 0?_:Math.min(s.end,u),!e.extend&&_>s&&(u=s,s=_,_=u),u=tc(r,_);var y=tc(r,s);u&&y&&(e.rangeCount!==1||e.anchorNode!==u.node||e.anchorOffset!==u.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(u.node,u.offset),e.removeAllRanges(),_>s?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var y_=Ut&&"documentMode"in document&&11>=document.documentMode,Wr=null,Jo=null,Hi=null,Zo=!1;function rc(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zo||Wr==null||Wr!==en(s)||(s=Wr,"selectionStart"in s&&Ga(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Hi&&es(Hi,s)||(Hi=s,s=ln(Jo,"onSelect"),0<s.length&&(t=new ja("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Wr)))}function Ts(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ur={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},fo={},Zh={};Ut&&(Zh=document.createElement("div").style,"AnimationEvent"in window||(delete Ur.animationend.animation,delete Ur.animationiteration.animation,delete Ur.animationstart.animation),"TransitionEvent"in window||delete Ur.transitionend.transition);function In(e){if(fo[e])return fo[e];if(!Ur[e])return e;var t=Ur[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Zh)return fo[e]=t[r];return e}var eu=In("animationend"),tu=In("animationiteration"),ru=In("animationstart"),iu=In("transitionend"),su=new Map,ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function gr(e,t){su.set(e,t),Pr(t,[e])}for(var _o=0;_o<ic.length;_o++){var po=ic[_o],C_=po.toLowerCase(),w_=po[0].toUpperCase()+po.slice(1);gr(C_,"on"+w_)}gr(eu,"onAnimationEnd");gr(tu,"onAnimationIteration");gr(ru,"onAnimationStart");gr("dblclick","onDoubleClick");gr("focusin","onFocus");gr("focusout","onBlur");gr(iu,"onTransitionEnd");ni("onMouseEnter",["mouseout","mouseover"]);ni("onMouseLeave",["mouseout","mouseover"]);ni("onPointerEnter",["pointerout","pointerover"]);ni("onPointerLeave",["pointerout","pointerover"]);Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),b_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function sc(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Cf(s,t,void 0,e),e.currentTarget=null}function nu(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],u=s.event;s=s.listeners;e:{var _=void 0;if(t)for(var y=s.length-1;0<=y;y--){var i=s[y],a=i.instance,f=i.currentTarget;if(i=i.listener,a!==_&&u.isPropagationStopped())break e;sc(u,i,f),_=a}else for(y=0;y<s.length;y++){if(i=s[y],a=i.instance,f=i.currentTarget,i=i.listener,a!==_&&u.isPropagationStopped())break e;sc(u,i,f),_=a}}}if(rn)throw e=qo,rn=!1,qo=null,e}function ge(e,t){var r=t[sa];r===void 0&&(r=t[sa]=new Set);var s=e+"__bubble";r.has(s)||(ou(t,e,2,!1),r.add(s))}function vo(e,t,r){var s=0;t&&(s|=4),ou(r,e,s,t)}var Ps="_reactListening"+Math.random().toString(36).slice(2);function ts(e){if(!e[Ps]){e[Ps]=!0,fh.forEach(function(r){r!=="selectionchange"&&(b_.has(r)||vo(r,!1,e),vo(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ps]||(t[Ps]=!0,vo("selectionchange",!1,t))}}function ou(e,t,r,s){switch(Uh(t)){case 1:var u=Ff;break;case 4:u=Nf;break;default:u=Wa}r=u.bind(null,t,r,e),u=void 0,!Go||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),s?u!==void 0?e.addEventListener(t,r,{capture:!0,passive:u}):e.addEventListener(t,r,!0):u!==void 0?e.addEventListener(t,r,{passive:u}):e.addEventListener(t,r,!1)}function go(e,t,r,s,u){var _=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var y=s.tag;if(y===3||y===4){var i=s.stateNode.containerInfo;if(i===u||i.nodeType===8&&i.parentNode===u)break;if(y===4)for(y=s.return;y!==null;){var a=y.tag;if((a===3||a===4)&&(a=y.stateNode.containerInfo,a===u||a.nodeType===8&&a.parentNode===u))return;y=y.return}for(;i!==null;){if(y=br(i),y===null)return;if(a=y.tag,a===5||a===6){s=_=y;continue e}i=i.parentNode}}s=s.return}Dh(function(){var f=_,p=Na(r),h=[];e:{var v=su.get(e);if(v!==void 0){var C=ja,w=e;switch(e){case"keypress":if(Vs(r)===0)break e;case"keydown":case"keyup":C=Zf;break;case"focusin":w="focus",C=co;break;case"focusout":w="blur",C=co;break;case"beforeblur":case"afterblur":C=co;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Kl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=$f;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=r_;break;case eu:case tu:case ru:C=jf;break;case iu:C=s_;break;case"scroll":C=Hf;break;case"wheel":C=o_;break;case"copy":case"cut":case"paste":C=Kf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=ql}var d=(t&4)!==0,o=!d&&e==="scroll",c=d?v!==null?v+"Capture":null:v;d=[];for(var n=f,l;n!==null;){l=n;var g=l.stateNode;if(l.tag===5&&g!==null&&(l=g,c!==null&&(g=Xi(n,c),g!=null&&d.push(rs(n,g,l)))),o)break;n=n.return}0<d.length&&(v=new C(v,w,null,r,p),h.push({event:v,listeners:d}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",v&&r!==Vo&&(w=r.relatedTarget||r.fromElement)&&(br(w)||w[jt]))break e;if((C||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,C?(w=r.relatedTarget||r.toElement,C=f,w=w?br(w):null,w!==null&&(o=Br(w),w!==o||w.tag!==5&&w.tag!==6)&&(w=null)):(C=null,w=f),C!==w)){if(d=Kl,g="onMouseLeave",c="onMouseEnter",n="mouse",(e==="pointerout"||e==="pointerover")&&(d=ql,g="onPointerLeave",c="onPointerEnter",n="pointer"),o=C==null?v:jr(C),l=w==null?v:jr(w),v=new d(g,n+"leave",C,r,p),v.target=o,v.relatedTarget=l,g=null,br(p)===f&&(d=new d(c,n+"enter",w,r,p),d.target=l,d.relatedTarget=o,g=d),o=g,C&&w)t:{for(d=C,c=w,n=0,l=d;l;l=Nr(l))n++;for(l=0,g=c;g;g=Nr(g))l++;for(;0<n-l;)d=Nr(d),n--;for(;0<l-n;)c=Nr(c),l--;for(;n--;){if(d===c||c!==null&&d===c.alternate)break t;d=Nr(d),c=Nr(c)}d=null}else d=null;C!==null&&nc(h,v,C,d,!1),w!==null&&o!==null&&nc(h,o,w,d,!0)}}e:{if(v=f?jr(f):window,C=v.nodeName&&v.nodeName.toLowerCase(),C==="select"||C==="input"&&v.type==="file")var b=f_;else if(Ql(v))if(Xh)b=g_;else{b=p_;var S=__}else(C=v.nodeName)&&C.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(b=v_);if(b&&(b=b(e,f))){qh(h,b,r,p);break e}S&&S(e,v,f),e==="focusout"&&(S=v._wrapperState)&&S.controlled&&v.type==="number"&&zo(v,"number",v.value)}switch(S=f?jr(f):window,e){case"focusin":(Ql(S)||S.contentEditable==="true")&&(Wr=S,Jo=f,Hi=null);break;case"focusout":Hi=Jo=Wr=null;break;case"mousedown":Zo=!0;break;case"contextmenu":case"mouseup":case"dragend":Zo=!1,rc(h,r,p);break;case"selectionchange":if(y_)break;case"keydown":case"keyup":rc(h,r,p)}var E;if(Ka)e:{switch(e){case"compositionstart":var m="onCompositionStart";break e;case"compositionend":m="onCompositionEnd";break e;case"compositionupdate":m="onCompositionUpdate";break e}m=void 0}else $r?Kh(e,r)&&(m="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(m="onCompositionStart");m&&(Vh&&r.locale!=="ko"&&($r||m!=="onCompositionStart"?m==="onCompositionEnd"&&$r&&(E=jh()):(nr=p,Ua="value"in nr?nr.value:nr.textContent,$r=!0)),S=ln(f,m),0<S.length&&(m=new Gl(m,e,null,r,p),h.push({event:m,listeners:S}),E?m.data=E:(E=Gh(r),E!==null&&(m.data=E)))),(E=l_?c_(e,r):h_(e,r))&&(f=ln(f,"onBeforeInput"),0<f.length&&(p=new Gl("onBeforeInput","beforeinput",null,r,p),h.push({event:p,listeners:f}),p.data=E))}nu(h,t)})}function rs(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ln(e,t){for(var r=t+"Capture",s=[];e!==null;){var u=e,_=u.stateNode;u.tag===5&&_!==null&&(u=_,_=Xi(e,r),_!=null&&s.unshift(rs(e,_,u)),_=Xi(e,t),_!=null&&s.push(rs(e,_,u))),e=e.return}return s}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nc(e,t,r,s,u){for(var _=t._reactName,y=[];r!==null&&r!==s;){var i=r,a=i.alternate,f=i.stateNode;if(a!==null&&a===s)break;i.tag===5&&f!==null&&(i=f,u?(a=Xi(r,_),a!=null&&y.unshift(rs(r,a,i))):u||(a=Xi(r,_),a!=null&&y.push(rs(r,a,i)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var E_=/\r\n?/g,x_=/\u0000|\uFFFD/g;function oc(e){return(typeof e=="string"?e:""+e).replace(E_,`
`).replace(x_,"")}function Bs(e,t,r){if(t=oc(t),oc(e)!==t&&r)throw Error(G(425))}function cn(){}var ea=null,ta=null;function ra(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ia=typeof setTimeout=="function"?setTimeout:void 0,L_=typeof clearTimeout=="function"?clearTimeout:void 0,ac=typeof Promise=="function"?Promise:void 0,k_=typeof queueMicrotask=="function"?queueMicrotask:typeof ac<"u"?function(e){return ac.resolve(null).then(e).catch(R_)}:ia;function R_(e){setTimeout(function(){throw e})}function mo(e,t){var r=t,s=0;do{var u=r.nextSibling;if(e.removeChild(r),u&&u.nodeType===8)if(r=u.data,r==="/$"){if(s===0){e.removeChild(u),Ji(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=u}while(r);Ji(t)}function hr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function lc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var _i=Math.random().toString(36).slice(2),Bt="__reactFiber$"+_i,is="__reactProps$"+_i,jt="__reactContainer$"+_i,sa="__reactEvents$"+_i,D_="__reactListeners$"+_i,M_="__reactHandles$"+_i;function br(e){var t=e[Bt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[jt]||r[Bt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=lc(e);e!==null;){if(r=e[Bt])return r;e=lc(e)}return t}e=r,r=e.parentNode}return null}function vs(e){return e=e[Bt]||e[jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(G(33))}function Fn(e){return e[is]||null}var na=[],Vr=-1;function mr(e){return{current:e}}function me(e){0>Vr||(e.current=na[Vr],na[Vr]=null,Vr--)}function ve(e,t){Vr++,na[Vr]=e.current,e.current=t}var vr={},Ke=mr(vr),tt=mr(!1),Rr=vr;function oi(e,t){var r=e.type.contextTypes;if(!r)return vr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var u={},_;for(_ in r)u[_]=t[_];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=u),u}function rt(e){return e=e.childContextTypes,e!=null}function hn(){me(tt),me(Ke)}function cc(e,t,r){if(Ke.current!==vr)throw Error(G(168));ve(Ke,t),ve(tt,r)}function au(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var u in s)if(!(u in t))throw Error(G(108,_f(e)||"Unknown",u));return Ee({},r,s)}function un(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vr,Rr=Ke.current,ve(Ke,e),ve(tt,tt.current),!0}function hc(e,t,r){var s=e.stateNode;if(!s)throw Error(G(169));r?(e=au(e,t,Rr),s.__reactInternalMemoizedMergedChildContext=e,me(tt),me(Ke),ve(Ke,e)):me(tt),ve(tt,r)}var Ht=null,Nn=!1,So=!1;function lu(e){Ht===null?Ht=[e]:Ht.push(e)}function A_(e){Nn=!0,lu(e)}function Sr(){if(!So&&Ht!==null){So=!0;var e=0,t=de;try{var r=Ht;for(de=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}Ht=null,Nn=!1}catch(u){throw Ht!==null&&(Ht=Ht.slice(e+1)),Ph(Ha,Sr),u}finally{de=t,So=!1}}return null}var Kr=[],Gr=0,dn=null,fn=0,pt=[],vt=0,Dr=null,zt=1,$t="";function Cr(e,t){Kr[Gr++]=fn,Kr[Gr++]=dn,dn=e,fn=t}function cu(e,t,r){pt[vt++]=zt,pt[vt++]=$t,pt[vt++]=Dr,Dr=e;var s=zt;e=$t;var u=32-xt(s)-1;s&=~(1<<u),r+=1;var _=32-xt(t)+u;if(30<_){var y=u-u%5;_=(s&(1<<y)-1).toString(32),s>>=y,u-=y,zt=1<<32-xt(t)+u|r<<u|s,$t=_+e}else zt=1<<_|r<<u|s,$t=e}function qa(e){e.return!==null&&(Cr(e,1),cu(e,1,0))}function Xa(e){for(;e===dn;)dn=Kr[--Gr],Kr[Gr]=null,fn=Kr[--Gr],Kr[Gr]=null;for(;e===Dr;)Dr=pt[--vt],pt[vt]=null,$t=pt[--vt],pt[vt]=null,zt=pt[--vt],pt[vt]=null}var ct=null,lt=null,ye=!1,Et=null;function hu(e,t){var r=gt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function uc(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ct=e,lt=hr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ct=e,lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Dr!==null?{id:zt,overflow:$t}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ct=e,lt=null,!0):!1;default:return!1}}function oa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function aa(e){if(ye){var t=lt;if(t){var r=t;if(!uc(e,t)){if(oa(e))throw Error(G(418));t=hr(r.nextSibling);var s=ct;t&&uc(e,t)?hu(s,r):(e.flags=e.flags&-4097|2,ye=!1,ct=e)}}else{if(oa(e))throw Error(G(418));e.flags=e.flags&-4097|2,ye=!1,ct=e}}}function dc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ct=e}function Os(e){if(e!==ct)return!1;if(!ye)return dc(e),ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ra(e.type,e.memoizedProps)),t&&(t=lt)){if(oa(e))throw uu(),Error(G(418));for(;t;)hu(e,t),t=hr(t.nextSibling)}if(dc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(G(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){lt=hr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}lt=null}}else lt=ct?hr(e.stateNode.nextSibling):null;return!0}function uu(){for(var e=lt;e;)e=hr(e.nextSibling)}function ai(){lt=ct=null,ye=!1}function Ya(e){Et===null?Et=[e]:Et.push(e)}var T_=qt.ReactCurrentBatchConfig;function Ri(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(G(309));var s=r.stateNode}if(!s)throw Error(G(147,e));var u=s,_=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===_?t.ref:(t=function(y){var i=u.refs;y===null?delete i[_]:i[_]=y},t._stringRef=_,t)}if(typeof e!="string")throw Error(G(284));if(!r._owner)throw Error(G(290,e))}return e}function Is(e,t){throw e=Object.prototype.toString.call(t),Error(G(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fc(e){var t=e._init;return t(e._payload)}function du(e){function t(c,n){if(e){var l=c.deletions;l===null?(c.deletions=[n],c.flags|=16):l.push(n)}}function r(c,n){if(!e)return null;for(;n!==null;)t(c,n),n=n.sibling;return null}function s(c,n){for(c=new Map;n!==null;)n.key!==null?c.set(n.key,n):c.set(n.index,n),n=n.sibling;return c}function u(c,n){return c=_r(c,n),c.index=0,c.sibling=null,c}function _(c,n,l){return c.index=l,e?(l=c.alternate,l!==null?(l=l.index,l<n?(c.flags|=2,n):l):(c.flags|=2,n)):(c.flags|=1048576,n)}function y(c){return e&&c.alternate===null&&(c.flags|=2),c}function i(c,n,l,g){return n===null||n.tag!==6?(n=Lo(l,c.mode,g),n.return=c,n):(n=u(n,l),n.return=c,n)}function a(c,n,l,g){var b=l.type;return b===zr?p(c,n,l.props.children,g,l.key):n!==null&&(n.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===er&&fc(b)===n.type)?(g=u(n,l.props),g.ref=Ri(c,n,l),g.return=c,g):(g=Js(l.type,l.key,l.props,null,c.mode,g),g.ref=Ri(c,n,l),g.return=c,g)}function f(c,n,l,g){return n===null||n.tag!==4||n.stateNode.containerInfo!==l.containerInfo||n.stateNode.implementation!==l.implementation?(n=ko(l,c.mode,g),n.return=c,n):(n=u(n,l.children||[]),n.return=c,n)}function p(c,n,l,g,b){return n===null||n.tag!==7?(n=kr(l,c.mode,g,b),n.return=c,n):(n=u(n,l),n.return=c,n)}function h(c,n,l){if(typeof n=="string"&&n!==""||typeof n=="number")return n=Lo(""+n,c.mode,l),n.return=c,n;if(typeof n=="object"&&n!==null){switch(n.$$typeof){case xs:return l=Js(n.type,n.key,n.props,null,c.mode,l),l.ref=Ri(c,null,n),l.return=c,l;case Hr:return n=ko(n,c.mode,l),n.return=c,n;case er:var g=n._init;return h(c,g(n._payload),l)}if(Ti(n)||bi(n))return n=kr(n,c.mode,l,null),n.return=c,n;Is(c,n)}return null}function v(c,n,l,g){var b=n!==null?n.key:null;if(typeof l=="string"&&l!==""||typeof l=="number")return b!==null?null:i(c,n,""+l,g);if(typeof l=="object"&&l!==null){switch(l.$$typeof){case xs:return l.key===b?a(c,n,l,g):null;case Hr:return l.key===b?f(c,n,l,g):null;case er:return b=l._init,v(c,n,b(l._payload),g)}if(Ti(l)||bi(l))return b!==null?null:p(c,n,l,g,null);Is(c,l)}return null}function C(c,n,l,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return c=c.get(l)||null,i(n,c,""+g,b);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case xs:return c=c.get(g.key===null?l:g.key)||null,a(n,c,g,b);case Hr:return c=c.get(g.key===null?l:g.key)||null,f(n,c,g,b);case er:var S=g._init;return C(c,n,l,S(g._payload),b)}if(Ti(g)||bi(g))return c=c.get(l)||null,p(n,c,g,b,null);Is(n,g)}return null}function w(c,n,l,g){for(var b=null,S=null,E=n,m=n=0,x=null;E!==null&&m<l.length;m++){E.index>m?(x=E,E=null):x=E.sibling;var L=v(c,E,l[m],g);if(L===null){E===null&&(E=x);break}e&&E&&L.alternate===null&&t(c,E),n=_(L,n,m),S===null?b=L:S.sibling=L,S=L,E=x}if(m===l.length)return r(c,E),ye&&Cr(c,m),b;if(E===null){for(;m<l.length;m++)E=h(c,l[m],g),E!==null&&(n=_(E,n,m),S===null?b=E:S.sibling=E,S=E);return ye&&Cr(c,m),b}for(E=s(c,E);m<l.length;m++)x=C(E,c,m,l[m],g),x!==null&&(e&&x.alternate!==null&&E.delete(x.key===null?m:x.key),n=_(x,n,m),S===null?b=x:S.sibling=x,S=x);return e&&E.forEach(function(M){return t(c,M)}),ye&&Cr(c,m),b}function d(c,n,l,g){var b=bi(l);if(typeof b!="function")throw Error(G(150));if(l=b.call(l),l==null)throw Error(G(151));for(var S=b=null,E=n,m=n=0,x=null,L=l.next();E!==null&&!L.done;m++,L=l.next()){E.index>m?(x=E,E=null):x=E.sibling;var M=v(c,E,L.value,g);if(M===null){E===null&&(E=x);break}e&&E&&M.alternate===null&&t(c,E),n=_(M,n,m),S===null?b=M:S.sibling=M,S=M,E=x}if(L.done)return r(c,E),ye&&Cr(c,m),b;if(E===null){for(;!L.done;m++,L=l.next())L=h(c,L.value,g),L!==null&&(n=_(L,n,m),S===null?b=L:S.sibling=L,S=L);return ye&&Cr(c,m),b}for(E=s(c,E);!L.done;m++,L=l.next())L=C(E,c,m,L.value,g),L!==null&&(e&&L.alternate!==null&&E.delete(L.key===null?m:L.key),n=_(L,n,m),S===null?b=L:S.sibling=L,S=L);return e&&E.forEach(function(R){return t(c,R)}),ye&&Cr(c,m),b}function o(c,n,l,g){if(typeof l=="object"&&l!==null&&l.type===zr&&l.key===null&&(l=l.props.children),typeof l=="object"&&l!==null){switch(l.$$typeof){case xs:e:{for(var b=l.key,S=n;S!==null;){if(S.key===b){if(b=l.type,b===zr){if(S.tag===7){r(c,S.sibling),n=u(S,l.props.children),n.return=c,c=n;break e}}else if(S.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===er&&fc(b)===S.type){r(c,S.sibling),n=u(S,l.props),n.ref=Ri(c,S,l),n.return=c,c=n;break e}r(c,S);break}else t(c,S);S=S.sibling}l.type===zr?(n=kr(l.props.children,c.mode,g,l.key),n.return=c,c=n):(g=Js(l.type,l.key,l.props,null,c.mode,g),g.ref=Ri(c,n,l),g.return=c,c=g)}return y(c);case Hr:e:{for(S=l.key;n!==null;){if(n.key===S)if(n.tag===4&&n.stateNode.containerInfo===l.containerInfo&&n.stateNode.implementation===l.implementation){r(c,n.sibling),n=u(n,l.children||[]),n.return=c,c=n;break e}else{r(c,n);break}else t(c,n);n=n.sibling}n=ko(l,c.mode,g),n.return=c,c=n}return y(c);case er:return S=l._init,o(c,n,S(l._payload),g)}if(Ti(l))return w(c,n,l,g);if(bi(l))return d(c,n,l,g);Is(c,l)}return typeof l=="string"&&l!==""||typeof l=="number"?(l=""+l,n!==null&&n.tag===6?(r(c,n.sibling),n=u(n,l),n.return=c,c=n):(r(c,n),n=Lo(l,c.mode,g),n.return=c,c=n),y(c)):r(c,n)}return o}var li=du(!0),fu=du(!1),_n=mr(null),pn=null,qr=null,Qa=null;function Ja(){Qa=qr=pn=null}function Za(e){var t=_n.current;me(_n),e._currentValue=t}function la(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ri(e,t){pn=e,Qa=qr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(et=!0),e.firstContext=null)}function St(e){var t=e._currentValue;if(Qa!==e)if(e={context:e,memoizedValue:t,next:null},qr===null){if(pn===null)throw Error(G(308));qr=e,pn.dependencies={lanes:0,firstContext:e}}else qr=qr.next=e;return t}var Er=null;function el(e){Er===null?Er=[e]:Er.push(e)}function _u(e,t,r,s){var u=t.interleaved;return u===null?(r.next=r,el(t)):(r.next=u.next,u.next=r),t.interleaved=r,Vt(e,s)}function Vt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var tr=!1;function tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ur(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,ue&2){var u=s.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),s.pending=t,Vt(e,r)}return u=s.interleaved,u===null?(t.next=t,el(s)):(t.next=u.next,u.next=t),s.interleaved=t,Vt(e,r)}function Ks(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,za(e,r)}}function _c(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var u=null,_=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};_===null?u=_=y:_=_.next=y,r=r.next}while(r!==null);_===null?u=_=t:_=_.next=t}else u=_=t;r={baseState:s.baseState,firstBaseUpdate:u,lastBaseUpdate:_,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function vn(e,t,r,s){var u=e.updateQueue;tr=!1;var _=u.firstBaseUpdate,y=u.lastBaseUpdate,i=u.shared.pending;if(i!==null){u.shared.pending=null;var a=i,f=a.next;a.next=null,y===null?_=f:y.next=f,y=a;var p=e.alternate;p!==null&&(p=p.updateQueue,i=p.lastBaseUpdate,i!==y&&(i===null?p.firstBaseUpdate=f:i.next=f,p.lastBaseUpdate=a))}if(_!==null){var h=u.baseState;y=0,p=f=a=null,i=_;do{var v=i.lane,C=i.eventTime;if((s&v)===v){p!==null&&(p=p.next={eventTime:C,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var w=e,d=i;switch(v=t,C=r,d.tag){case 1:if(w=d.payload,typeof w=="function"){h=w.call(C,h,v);break e}h=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=d.payload,v=typeof w=="function"?w.call(C,h,v):w,v==null)break e;h=Ee({},h,v);break e;case 2:tr=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,v=u.effects,v===null?u.effects=[i]:v.push(i))}else C={eventTime:C,lane:v,tag:i.tag,payload:i.payload,callback:i.callback,next:null},p===null?(f=p=C,a=h):p=p.next=C,y|=v;if(i=i.next,i===null){if(i=u.shared.pending,i===null)break;v=i,i=v.next,v.next=null,u.lastBaseUpdate=v,u.shared.pending=null}}while(!0);if(p===null&&(a=h),u.baseState=a,u.firstBaseUpdate=f,u.lastBaseUpdate=p,t=u.shared.interleaved,t!==null){u=t;do y|=u.lane,u=u.next;while(u!==t)}else _===null&&(u.shared.lanes=0);Ar|=y,e.lanes=y,e.memoizedState=h}}function pc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],u=s.callback;if(u!==null){if(s.callback=null,s=r,typeof u!="function")throw Error(G(191,u));u.call(s)}}}var gs={},It=mr(gs),ss=mr(gs),ns=mr(gs);function xr(e){if(e===gs)throw Error(G(174));return e}function rl(e,t){switch(ve(ns,t),ve(ss,e),ve(It,gs),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wo(t,e)}me(It),ve(It,t)}function ci(){me(It),me(ss),me(ns)}function vu(e){xr(ns.current);var t=xr(It.current),r=Wo(t,e.type);t!==r&&(ve(ss,e),ve(It,r))}function il(e){ss.current===e&&(me(It),me(ss))}var we=mr(0);function gn(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yo=[];function sl(){for(var e=0;e<yo.length;e++)yo[e]._workInProgressVersionPrimary=null;yo.length=0}var Gs=qt.ReactCurrentDispatcher,Co=qt.ReactCurrentBatchConfig,Mr=0,be=null,Ae=null,Oe=null,mn=!1,zi=!1,os=0,P_=0;function Ue(){throw Error(G(321))}function nl(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!kt(e[r],t[r]))return!1;return!0}function ol(e,t,r,s,u,_){if(Mr=_,be=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gs.current=e===null||e.memoizedState===null?F_:N_,e=r(s,u),zi){_=0;do{if(zi=!1,os=0,25<=_)throw Error(G(301));_+=1,Oe=Ae=null,t.updateQueue=null,Gs.current=H_,e=r(s,u)}while(zi)}if(Gs.current=Sn,t=Ae!==null&&Ae.next!==null,Mr=0,Oe=Ae=be=null,mn=!1,t)throw Error(G(300));return e}function al(){var e=os!==0;return os=0,e}function Pt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?be.memoizedState=Oe=e:Oe=Oe.next=e,Oe}function yt(){if(Ae===null){var e=be.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=Oe===null?be.memoizedState:Oe.next;if(t!==null)Oe=t,Ae=e;else{if(e===null)throw Error(G(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Oe===null?be.memoizedState=Oe=e:Oe=Oe.next=e}return Oe}function as(e,t){return typeof t=="function"?t(e):t}function wo(e){var t=yt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=Ae,u=s.baseQueue,_=r.pending;if(_!==null){if(u!==null){var y=u.next;u.next=_.next,_.next=y}s.baseQueue=u=_,r.pending=null}if(u!==null){_=u.next,s=s.baseState;var i=y=null,a=null,f=_;do{var p=f.lane;if((Mr&p)===p)a!==null&&(a=a.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),s=f.hasEagerState?f.eagerState:e(s,f.action);else{var h={lane:p,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};a===null?(i=a=h,y=s):a=a.next=h,be.lanes|=p,Ar|=p}f=f.next}while(f!==null&&f!==_);a===null?y=s:a.next=i,kt(s,t.memoizedState)||(et=!0),t.memoizedState=s,t.baseState=y,t.baseQueue=a,r.lastRenderedState=s}if(e=r.interleaved,e!==null){u=e;do _=u.lane,be.lanes|=_,Ar|=_,u=u.next;while(u!==e)}else u===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function bo(e){var t=yt(),r=t.queue;if(r===null)throw Error(G(311));r.lastRenderedReducer=e;var s=r.dispatch,u=r.pending,_=t.memoizedState;if(u!==null){r.pending=null;var y=u=u.next;do _=e(_,y.action),y=y.next;while(y!==u);kt(_,t.memoizedState)||(et=!0),t.memoizedState=_,t.baseQueue===null&&(t.baseState=_),r.lastRenderedState=_}return[_,s]}function gu(){}function mu(e,t){var r=be,s=yt(),u=t(),_=!kt(s.memoizedState,u);if(_&&(s.memoizedState=u,et=!0),s=s.queue,ll(Cu.bind(null,r,s,e),[e]),s.getSnapshot!==t||_||Oe!==null&&Oe.memoizedState.tag&1){if(r.flags|=2048,ls(9,yu.bind(null,r,s,u,t),void 0,null),Fe===null)throw Error(G(349));Mr&30||Su(r,t,u)}return u}function Su(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function yu(e,t,r,s){t.value=r,t.getSnapshot=s,wu(t)&&bu(e)}function Cu(e,t,r){return r(function(){wu(t)&&bu(e)})}function wu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!kt(e,r)}catch{return!0}}function bu(e){var t=Vt(e,1);t!==null&&Lt(t,e,1,-1)}function vc(e){var t=Pt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:as,lastRenderedState:e},t.queue=e,e=e.dispatch=I_.bind(null,be,e),[t.memoizedState,e]}function ls(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=be.updateQueue,t===null?(t={lastEffect:null,stores:null},be.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Eu(){return yt().memoizedState}function qs(e,t,r,s){var u=Pt();be.flags|=e,u.memoizedState=ls(1|t,r,void 0,s===void 0?null:s)}function Hn(e,t,r,s){var u=yt();s=s===void 0?null:s;var _=void 0;if(Ae!==null){var y=Ae.memoizedState;if(_=y.destroy,s!==null&&nl(s,y.deps)){u.memoizedState=ls(t,r,_,s);return}}be.flags|=e,u.memoizedState=ls(1|t,r,_,s)}function gc(e,t){return qs(8390656,8,e,t)}function ll(e,t){return Hn(2048,8,e,t)}function xu(e,t){return Hn(4,2,e,t)}function Lu(e,t){return Hn(4,4,e,t)}function ku(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ru(e,t,r){return r=r!=null?r.concat([e]):null,Hn(4,4,ku.bind(null,t,e),r)}function cl(){}function Du(e,t){var r=yt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&nl(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Mu(e,t){var r=yt();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&nl(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Au(e,t,r){return Mr&21?(kt(r,t)||(r=Ih(),be.lanes|=r,Ar|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,et=!0),e.memoizedState=r)}function B_(e,t){var r=de;de=r!==0&&4>r?r:4,e(!0);var s=Co.transition;Co.transition={};try{e(!1),t()}finally{de=r,Co.transition=s}}function Tu(){return yt().memoizedState}function O_(e,t,r){var s=fr(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Pu(e))Bu(t,r);else if(r=_u(e,t,r,s),r!==null){var u=Xe();Lt(r,e,s,u),Ou(r,t,s)}}function I_(e,t,r){var s=fr(e),u={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pu(e))Bu(t,u);else{var _=e.alternate;if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var y=t.lastRenderedState,i=_(y,r);if(u.hasEagerState=!0,u.eagerState=i,kt(i,y)){var a=t.interleaved;a===null?(u.next=u,el(t)):(u.next=a.next,a.next=u),t.interleaved=u;return}}catch{}finally{}r=_u(e,t,u,s),r!==null&&(u=Xe(),Lt(r,e,s,u),Ou(r,t,s))}}function Pu(e){var t=e.alternate;return e===be||t!==null&&t===be}function Bu(e,t){zi=mn=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ou(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,za(e,r)}}var Sn={readContext:St,useCallback:Ue,useContext:Ue,useEffect:Ue,useImperativeHandle:Ue,useInsertionEffect:Ue,useLayoutEffect:Ue,useMemo:Ue,useReducer:Ue,useRef:Ue,useState:Ue,useDebugValue:Ue,useDeferredValue:Ue,useTransition:Ue,useMutableSource:Ue,useSyncExternalStore:Ue,useId:Ue,unstable_isNewReconciler:!1},F_={readContext:St,useCallback:function(e,t){return Pt().memoizedState=[e,t===void 0?null:t],e},useContext:St,useEffect:gc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qs(4194308,4,ku.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return qs(4,2,e,t)},useMemo:function(e,t){var r=Pt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Pt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=O_.bind(null,be,e),[s.memoizedState,e]},useRef:function(e){var t=Pt();return e={current:e},t.memoizedState=e},useState:vc,useDebugValue:cl,useDeferredValue:function(e){return Pt().memoizedState=e},useTransition:function(){var e=vc(!1),t=e[0];return e=B_.bind(null,e[1]),Pt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=be,u=Pt();if(ye){if(r===void 0)throw Error(G(407));r=r()}else{if(r=t(),Fe===null)throw Error(G(349));Mr&30||Su(s,t,r)}u.memoizedState=r;var _={value:r,getSnapshot:t};return u.queue=_,gc(Cu.bind(null,s,_,e),[e]),s.flags|=2048,ls(9,yu.bind(null,s,_,r,t),void 0,null),r},useId:function(){var e=Pt(),t=Fe.identifierPrefix;if(ye){var r=$t,s=zt;r=(s&~(1<<32-xt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=os++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=P_++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},N_={readContext:St,useCallback:Du,useContext:St,useEffect:ll,useImperativeHandle:Ru,useInsertionEffect:xu,useLayoutEffect:Lu,useMemo:Mu,useReducer:wo,useRef:Eu,useState:function(){return wo(as)},useDebugValue:cl,useDeferredValue:function(e){var t=yt();return Au(t,Ae.memoizedState,e)},useTransition:function(){var e=wo(as)[0],t=yt().memoizedState;return[e,t]},useMutableSource:gu,useSyncExternalStore:mu,useId:Tu,unstable_isNewReconciler:!1},H_={readContext:St,useCallback:Du,useContext:St,useEffect:ll,useImperativeHandle:Ru,useInsertionEffect:xu,useLayoutEffect:Lu,useMemo:Mu,useReducer:bo,useRef:Eu,useState:function(){return bo(as)},useDebugValue:cl,useDeferredValue:function(e){var t=yt();return Ae===null?t.memoizedState=e:Au(t,Ae.memoizedState,e)},useTransition:function(){var e=bo(as)[0],t=yt().memoizedState;return[e,t]},useMutableSource:gu,useSyncExternalStore:mu,useId:Tu,unstable_isNewReconciler:!1};function wt(e,t){if(e&&e.defaultProps){t=Ee({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ca(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Ee({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var zn={isMounted:function(e){return(e=e._reactInternals)?Br(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Xe(),u=fr(e),_=Wt(s,u);_.payload=t,r!=null&&(_.callback=r),t=ur(e,_,u),t!==null&&(Lt(t,e,u,s),Ks(t,e,u))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Xe(),u=fr(e),_=Wt(s,u);_.tag=1,_.payload=t,r!=null&&(_.callback=r),t=ur(e,_,u),t!==null&&(Lt(t,e,u,s),Ks(t,e,u))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Xe(),s=fr(e),u=Wt(r,s);u.tag=2,t!=null&&(u.callback=t),t=ur(e,u,s),t!==null&&(Lt(t,e,s,r),Ks(t,e,s))}};function mc(e,t,r,s,u,_,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,_,y):t.prototype&&t.prototype.isPureReactComponent?!es(r,s)||!es(u,_):!0}function Iu(e,t,r){var s=!1,u=vr,_=t.contextType;return typeof _=="object"&&_!==null?_=St(_):(u=rt(t)?Rr:Ke.current,s=t.contextTypes,_=(s=s!=null)?oi(e,u):vr),t=new t(r,_),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zn,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=u,e.__reactInternalMemoizedMaskedChildContext=_),t}function Sc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&zn.enqueueReplaceState(t,t.state,null)}function ha(e,t,r,s){var u=e.stateNode;u.props=r,u.state=e.memoizedState,u.refs={},tl(e);var _=t.contextType;typeof _=="object"&&_!==null?u.context=St(_):(_=rt(t)?Rr:Ke.current,u.context=oi(e,_)),u.state=e.memoizedState,_=t.getDerivedStateFromProps,typeof _=="function"&&(ca(e,t,_,r),u.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof u.getSnapshotBeforeUpdate=="function"||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(t=u.state,typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount(),t!==u.state&&zn.enqueueReplaceState(u,u.state,null),vn(e,r,u,s),u.state=e.memoizedState),typeof u.componentDidMount=="function"&&(e.flags|=4194308)}function hi(e,t){try{var r="",s=t;do r+=ff(s),s=s.return;while(s);var u=r}catch(_){u=`
Error generating stack: `+_.message+`
`+_.stack}return{value:e,source:t,stack:u,digest:null}}function Eo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ua(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var z_=typeof WeakMap=="function"?WeakMap:Map;function Fu(e,t,r){r=Wt(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){Cn||(Cn=!0,Ca=s),ua(e,t)},r}function Nu(e,t,r){r=Wt(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var u=t.value;r.payload=function(){return s(u)},r.callback=function(){ua(e,t)}}var _=e.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(r.callback=function(){ua(e,t),typeof s!="function"&&(dr===null?dr=new Set([this]):dr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function yc(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new z_;var u=new Set;s.set(t,u)}else u=s.get(t),u===void 0&&(u=new Set,s.set(t,u));u.has(r)||(u.add(r),e=ep.bind(null,e,t,r),t.then(e,e))}function Cc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wc(e,t,r,s,u){return e.mode&1?(e.flags|=65536,e.lanes=u,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wt(-1,1),t.tag=2,ur(r,t,1))),r.lanes|=1),e)}var $_=qt.ReactCurrentOwner,et=!1;function qe(e,t,r,s){t.child=e===null?fu(t,null,r,s):li(t,e.child,r,s)}function bc(e,t,r,s,u){r=r.render;var _=t.ref;return ri(t,u),s=ol(e,t,r,s,_,u),r=al(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Kt(e,t,u)):(ye&&r&&qa(t),t.flags|=1,qe(e,t,s,u),t.child)}function Ec(e,t,r,s,u){if(e===null){var _=r.type;return typeof _=="function"&&!gl(_)&&_.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=_,Hu(e,t,_,s,u)):(e=Js(r.type,null,s,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(_=e.child,!(e.lanes&u)){var y=_.memoizedProps;if(r=r.compare,r=r!==null?r:es,r(y,s)&&e.ref===t.ref)return Kt(e,t,u)}return t.flags|=1,e=_r(_,s),e.ref=t.ref,e.return=t,t.child=e}function Hu(e,t,r,s,u){if(e!==null){var _=e.memoizedProps;if(es(_,s)&&e.ref===t.ref)if(et=!1,t.pendingProps=s=_,(e.lanes&u)!==0)e.flags&131072&&(et=!0);else return t.lanes=e.lanes,Kt(e,t,u)}return da(e,t,r,s,u)}function zu(e,t,r){var s=t.pendingProps,u=s.children,_=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(Yr,at),at|=r;else{if(!(r&1073741824))return e=_!==null?_.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ve(Yr,at),at|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=_!==null?_.baseLanes:r,ve(Yr,at),at|=s}else _!==null?(s=_.baseLanes|r,t.memoizedState=null):s=r,ve(Yr,at),at|=s;return qe(e,t,u,r),t.child}function $u(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function da(e,t,r,s,u){var _=rt(r)?Rr:Ke.current;return _=oi(t,_),ri(t,u),r=ol(e,t,r,s,_,u),s=al(),e!==null&&!et?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~u,Kt(e,t,u)):(ye&&s&&qa(t),t.flags|=1,qe(e,t,r,u),t.child)}function xc(e,t,r,s,u){if(rt(r)){var _=!0;un(t)}else _=!1;if(ri(t,u),t.stateNode===null)Xs(e,t),Iu(t,r,s),ha(t,r,s,u),s=!0;else if(e===null){var y=t.stateNode,i=t.memoizedProps;y.props=i;var a=y.context,f=r.contextType;typeof f=="object"&&f!==null?f=St(f):(f=rt(r)?Rr:Ke.current,f=oi(t,f));var p=r.getDerivedStateFromProps,h=typeof p=="function"||typeof y.getSnapshotBeforeUpdate=="function";h||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(i!==s||a!==f)&&Sc(t,y,s,f),tr=!1;var v=t.memoizedState;y.state=v,vn(t,s,y,u),a=t.memoizedState,i!==s||v!==a||tt.current||tr?(typeof p=="function"&&(ca(t,r,p,s),a=t.memoizedState),(i=tr||mc(t,r,i,s,v,a,f))?(h||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=a),y.props=s,y.state=a,y.context=f,s=i):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{y=t.stateNode,pu(e,t),i=t.memoizedProps,f=t.type===t.elementType?i:wt(t.type,i),y.props=f,h=t.pendingProps,v=y.context,a=r.contextType,typeof a=="object"&&a!==null?a=St(a):(a=rt(r)?Rr:Ke.current,a=oi(t,a));var C=r.getDerivedStateFromProps;(p=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(i!==h||v!==a)&&Sc(t,y,s,a),tr=!1,v=t.memoizedState,y.state=v,vn(t,s,y,u);var w=t.memoizedState;i!==h||v!==w||tt.current||tr?(typeof C=="function"&&(ca(t,r,C,s),w=t.memoizedState),(f=tr||mc(t,r,f,s,v,w,a)||!1)?(p||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(s,w,a),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(s,w,a)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||i===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=w),y.props=s,y.state=w,y.context=a,s=f):(typeof y.componentDidUpdate!="function"||i===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),s=!1)}return fa(e,t,r,s,_,u)}function fa(e,t,r,s,u,_){$u(e,t);var y=(t.flags&128)!==0;if(!s&&!y)return u&&hc(t,r,!1),Kt(e,t,_);s=t.stateNode,$_.current=t;var i=y&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&y?(t.child=li(t,e.child,null,_),t.child=li(t,null,i,_)):qe(e,t,i,_),t.memoizedState=s.state,u&&hc(t,r,!0),t.child}function Wu(e){var t=e.stateNode;t.pendingContext?cc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cc(e,t.context,!1),rl(e,t.containerInfo)}function Lc(e,t,r,s,u){return ai(),Ya(u),t.flags|=256,qe(e,t,r,s),t.child}var _a={dehydrated:null,treeContext:null,retryLane:0};function pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,r){var s=t.pendingProps,u=we.current,_=!1,y=(t.flags&128)!==0,i;if((i=y)||(i=e!==null&&e.memoizedState===null?!1:(u&2)!==0),i?(_=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(u|=1),ve(we,u&1),e===null)return aa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=s.children,e=s.fallback,_?(s=t.mode,_=t.child,y={mode:"hidden",children:y},!(s&1)&&_!==null?(_.childLanes=0,_.pendingProps=y):_=Un(y,s,0,null),e=kr(e,s,r,null),_.return=t,e.return=t,_.sibling=e,t.child=_,t.child.memoizedState=pa(r),t.memoizedState=_a,e):hl(t,y));if(u=e.memoizedState,u!==null&&(i=u.dehydrated,i!==null))return W_(e,t,y,s,i,u,r);if(_){_=s.fallback,y=t.mode,u=e.child,i=u.sibling;var a={mode:"hidden",children:s.children};return!(y&1)&&t.child!==u?(s=t.child,s.childLanes=0,s.pendingProps=a,t.deletions=null):(s=_r(u,a),s.subtreeFlags=u.subtreeFlags&14680064),i!==null?_=_r(i,_):(_=kr(_,y,r,null),_.flags|=2),_.return=t,s.return=t,s.sibling=_,t.child=s,s=_,_=t.child,y=e.child.memoizedState,y=y===null?pa(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},_.memoizedState=y,_.childLanes=e.childLanes&~r,t.memoizedState=_a,s}return _=e.child,e=_.sibling,s=_r(_,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function hl(e,t){return t=Un({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fs(e,t,r,s){return s!==null&&Ya(s),li(t,e.child,null,r),e=hl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function W_(e,t,r,s,u,_,y){if(r)return t.flags&256?(t.flags&=-257,s=Eo(Error(G(422))),Fs(e,t,y,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(_=s.fallback,u=t.mode,s=Un({mode:"visible",children:s.children},u,0,null),_=kr(_,u,y,null),_.flags|=2,s.return=t,_.return=t,s.sibling=_,t.child=s,t.mode&1&&li(t,e.child,null,y),t.child.memoizedState=pa(y),t.memoizedState=_a,_);if(!(t.mode&1))return Fs(e,t,y,null);if(u.data==="$!"){if(s=u.nextSibling&&u.nextSibling.dataset,s)var i=s.dgst;return s=i,_=Error(G(419)),s=Eo(_,s,void 0),Fs(e,t,y,s)}if(i=(y&e.childLanes)!==0,et||i){if(s=Fe,s!==null){switch(y&-y){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}u=u&(s.suspendedLanes|y)?0:u,u!==0&&u!==_.retryLane&&(_.retryLane=u,Vt(e,u),Lt(s,e,u,-1))}return vl(),s=Eo(Error(G(421))),Fs(e,t,y,s)}return u.data==="$?"?(t.flags|=128,t.child=e.child,t=tp.bind(null,e),u._reactRetry=t,null):(e=_.treeContext,lt=hr(u.nextSibling),ct=t,ye=!0,Et=null,e!==null&&(pt[vt++]=zt,pt[vt++]=$t,pt[vt++]=Dr,zt=e.id,$t=e.overflow,Dr=t),t=hl(t,s.children),t.flags|=4096,t)}function kc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),la(e.return,t,r)}function xo(e,t,r,s,u){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:u}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=s,_.tail=r,_.tailMode=u)}function ju(e,t,r){var s=t.pendingProps,u=s.revealOrder,_=s.tail;if(qe(e,t,s.children,r),s=we.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kc(e,r,t);else if(e.tag===19)kc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ve(we,s),!(t.mode&1))t.memoizedState=null;else switch(u){case"forwards":for(r=t.child,u=null;r!==null;)e=r.alternate,e!==null&&gn(e)===null&&(u=r),r=r.sibling;r=u,r===null?(u=t.child,t.child=null):(u=r.sibling,r.sibling=null),xo(t,!1,u,r,_);break;case"backwards":for(r=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&gn(e)===null){t.child=u;break}e=u.sibling,u.sibling=r,r=u,u=e}xo(t,!0,r,null,_);break;case"together":xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xs(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Kt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ar|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(G(153));if(t.child!==null){for(e=t.child,r=_r(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=_r(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function U_(e,t,r){switch(t.tag){case 3:Wu(t),ai();break;case 5:vu(t);break;case 1:rt(t.type)&&un(t);break;case 4:rl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,u=t.memoizedProps.value;ve(_n,s._currentValue),s._currentValue=u;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ve(we,we.current&1),t.flags|=128,null):r&t.child.childLanes?Uu(e,t,r):(ve(we,we.current&1),e=Kt(e,t,r),e!==null?e.sibling:null);ve(we,we.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return ju(e,t,r);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),ve(we,we.current),s)break;return null;case 22:case 23:return t.lanes=0,zu(e,t,r)}return Kt(e,t,r)}var Vu,va,Ku,Gu;Vu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};va=function(){};Ku=function(e,t,r,s){var u=e.memoizedProps;if(u!==s){e=t.stateNode,xr(It.current);var _=null;switch(r){case"input":u=No(e,u),s=No(e,s),_=[];break;case"select":u=Ee({},u,{value:void 0}),s=Ee({},s,{value:void 0}),_=[];break;case"textarea":u=$o(e,u),s=$o(e,s),_=[];break;default:typeof u.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=cn)}Uo(r,s);var y;r=null;for(f in u)if(!s.hasOwnProperty(f)&&u.hasOwnProperty(f)&&u[f]!=null)if(f==="style"){var i=u[f];for(y in i)i.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Gi.hasOwnProperty(f)?_||(_=[]):(_=_||[]).push(f,null));for(f in s){var a=s[f];if(i=u!=null?u[f]:void 0,s.hasOwnProperty(f)&&a!==i&&(a!=null||i!=null))if(f==="style")if(i){for(y in i)!i.hasOwnProperty(y)||a&&a.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in a)a.hasOwnProperty(y)&&i[y]!==a[y]&&(r||(r={}),r[y]=a[y])}else r||(_||(_=[]),_.push(f,r)),r=a;else f==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,i=i?i.__html:void 0,a!=null&&i!==a&&(_=_||[]).push(f,a)):f==="children"?typeof a!="string"&&typeof a!="number"||(_=_||[]).push(f,""+a):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Gi.hasOwnProperty(f)?(a!=null&&f==="onScroll"&&ge("scroll",e),_||i===a||(_=[])):(_=_||[]).push(f,a))}r&&(_=_||[]).push("style",r);var f=_;(t.updateQueue=f)&&(t.flags|=4)}};Gu=function(e,t,r,s){r!==s&&(t.flags|=4)};function Di(e,t){if(!ye)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function je(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var u=e.child;u!==null;)r|=u.lanes|u.childLanes,s|=u.subtreeFlags&14680064,s|=u.flags&14680064,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)r|=u.lanes|u.childLanes,s|=u.subtreeFlags,s|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function j_(e,t,r){var s=t.pendingProps;switch(Xa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(t),null;case 1:return rt(t.type)&&hn(),je(t),null;case 3:return s=t.stateNode,ci(),me(tt),me(Ke),sl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Os(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Et!==null&&(Ea(Et),Et=null))),va(e,t),je(t),null;case 5:il(t);var u=xr(ns.current);if(r=t.type,e!==null&&t.stateNode!=null)Ku(e,t,r,s,u),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(G(166));return je(t),null}if(e=xr(It.current),Os(t)){s=t.stateNode,r=t.type;var _=t.memoizedProps;switch(s[Bt]=t,s[is]=_,e=(t.mode&1)!==0,r){case"dialog":ge("cancel",s),ge("close",s);break;case"iframe":case"object":case"embed":ge("load",s);break;case"video":case"audio":for(u=0;u<Bi.length;u++)ge(Bi[u],s);break;case"source":ge("error",s);break;case"img":case"image":case"link":ge("error",s),ge("load",s);break;case"details":ge("toggle",s);break;case"input":Il(s,_),ge("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!_.multiple},ge("invalid",s);break;case"textarea":Nl(s,_),ge("invalid",s)}Uo(r,_),u=null;for(var y in _)if(_.hasOwnProperty(y)){var i=_[y];y==="children"?typeof i=="string"?s.textContent!==i&&(_.suppressHydrationWarning!==!0&&Bs(s.textContent,i,e),u=["children",i]):typeof i=="number"&&s.textContent!==""+i&&(_.suppressHydrationWarning!==!0&&Bs(s.textContent,i,e),u=["children",""+i]):Gi.hasOwnProperty(y)&&i!=null&&y==="onScroll"&&ge("scroll",s)}switch(r){case"input":Ls(s),Fl(s,_,!0);break;case"textarea":Ls(s),Hl(s);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(s.onclick=cn)}s=u,t.updateQueue=s,s!==null&&(t.flags|=4)}else{y=u.nodeType===9?u:u.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ch(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=y.createElement(r,{is:s.is}):(e=y.createElement(r),r==="select"&&(y=e,s.multiple?y.multiple=!0:s.size&&(y.size=s.size))):e=y.createElementNS(e,r),e[Bt]=t,e[is]=s,Vu(e,t,!1,!1),t.stateNode=e;e:{switch(y=jo(r,s),r){case"dialog":ge("cancel",e),ge("close",e),u=s;break;case"iframe":case"object":case"embed":ge("load",e),u=s;break;case"video":case"audio":for(u=0;u<Bi.length;u++)ge(Bi[u],e);u=s;break;case"source":ge("error",e),u=s;break;case"img":case"image":case"link":ge("error",e),ge("load",e),u=s;break;case"details":ge("toggle",e),u=s;break;case"input":Il(e,s),u=No(e,s),ge("invalid",e);break;case"option":u=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},u=Ee({},s,{value:void 0}),ge("invalid",e);break;case"textarea":Nl(e,s),u=$o(e,s),ge("invalid",e);break;default:u=s}Uo(r,u),i=u;for(_ in i)if(i.hasOwnProperty(_)){var a=i[_];_==="style"?Eh(e,a):_==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&wh(e,a)):_==="children"?typeof a=="string"?(r!=="textarea"||a!=="")&&qi(e,a):typeof a=="number"&&qi(e,""+a):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(Gi.hasOwnProperty(_)?a!=null&&_==="onScroll"&&ge("scroll",e):a!=null&&Ba(e,_,a,y))}switch(r){case"input":Ls(e),Fl(e,s,!1);break;case"textarea":Ls(e),Hl(e);break;case"option":s.value!=null&&e.setAttribute("value",""+pr(s.value));break;case"select":e.multiple=!!s.multiple,_=s.value,_!=null?Jr(e,!!s.multiple,_,!1):s.defaultValue!=null&&Jr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=cn)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return je(t),null;case 6:if(e&&t.stateNode!=null)Gu(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(G(166));if(r=xr(ns.current),xr(It.current),Os(t)){if(s=t.stateNode,r=t.memoizedProps,s[Bt]=t,(_=s.nodeValue!==r)&&(e=ct,e!==null))switch(e.tag){case 3:Bs(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bs(s.nodeValue,r,(e.mode&1)!==0)}_&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Bt]=t,t.stateNode=s}return je(t),null;case 13:if(me(we),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ye&&lt!==null&&t.mode&1&&!(t.flags&128))uu(),ai(),t.flags|=98560,_=!1;else if(_=Os(t),s!==null&&s.dehydrated!==null){if(e===null){if(!_)throw Error(G(318));if(_=t.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(G(317));_[Bt]=t}else ai(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;je(t),_=!1}else Et!==null&&(Ea(Et),Et=null),_=!0;if(!_)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||we.current&1?Pe===0&&(Pe=3):vl())),t.updateQueue!==null&&(t.flags|=4),je(t),null);case 4:return ci(),va(e,t),e===null&&ts(t.stateNode.containerInfo),je(t),null;case 10:return Za(t.type._context),je(t),null;case 17:return rt(t.type)&&hn(),je(t),null;case 19:if(me(we),_=t.memoizedState,_===null)return je(t),null;if(s=(t.flags&128)!==0,y=_.rendering,y===null)if(s)Di(_,!1);else{if(Pe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=gn(e),y!==null){for(t.flags|=128,Di(_,!1),s=y.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)_=r,e=s,_.flags&=14680066,y=_.alternate,y===null?(_.childLanes=0,_.lanes=e,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=y.childLanes,_.lanes=y.lanes,_.child=y.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=y.memoizedProps,_.memoizedState=y.memoizedState,_.updateQueue=y.updateQueue,_.type=y.type,e=y.dependencies,_.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ve(we,we.current&1|2),t.child}e=e.sibling}_.tail!==null&&Re()>ui&&(t.flags|=128,s=!0,Di(_,!1),t.lanes=4194304)}else{if(!s)if(e=gn(y),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Di(_,!0),_.tail===null&&_.tailMode==="hidden"&&!y.alternate&&!ye)return je(t),null}else 2*Re()-_.renderingStartTime>ui&&r!==1073741824&&(t.flags|=128,s=!0,Di(_,!1),t.lanes=4194304);_.isBackwards?(y.sibling=t.child,t.child=y):(r=_.last,r!==null?r.sibling=y:t.child=y,_.last=y)}return _.tail!==null?(t=_.tail,_.rendering=t,_.tail=t.sibling,_.renderingStartTime=Re(),t.sibling=null,r=we.current,ve(we,s?r&1|2:r&1),t):(je(t),null);case 22:case 23:return pl(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?at&1073741824&&(je(t),t.subtreeFlags&6&&(t.flags|=8192)):je(t),null;case 24:return null;case 25:return null}throw Error(G(156,t.tag))}function V_(e,t){switch(Xa(t),t.tag){case 1:return rt(t.type)&&hn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ci(),me(tt),me(Ke),sl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return il(t),null;case 13:if(me(we),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(G(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return me(we),null;case 4:return ci(),null;case 10:return Za(t.type._context),null;case 22:case 23:return pl(),null;case 24:return null;default:return null}}var Ns=!1,Ve=!1,K_=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Xr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){xe(e,t,s)}else r.current=null}function ga(e,t,r){try{r()}catch(s){xe(e,t,s)}}var Rc=!1;function G_(e,t){if(ea=on,e=Jh(),Ga(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var u=s.anchorOffset,_=s.focusNode;s=s.focusOffset;try{r.nodeType,_.nodeType}catch{r=null;break e}var y=0,i=-1,a=-1,f=0,p=0,h=e,v=null;t:for(;;){for(var C;h!==r||u!==0&&h.nodeType!==3||(i=y+u),h!==_||s!==0&&h.nodeType!==3||(a=y+s),h.nodeType===3&&(y+=h.nodeValue.length),(C=h.firstChild)!==null;)v=h,h=C;for(;;){if(h===e)break t;if(v===r&&++f===u&&(i=y),v===_&&++p===s&&(a=y),(C=h.nextSibling)!==null)break;h=v,v=h.parentNode}h=C}r=i===-1||a===-1?null:{start:i,end:a}}else r=null}r=r||{start:0,end:0}}else r=null;for(ta={focusedElem:e,selectionRange:r},on=!1,Z=t;Z!==null;)if(t=Z,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Z=e;else for(;Z!==null;){t=Z;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var d=w.memoizedProps,o=w.memoizedState,c=t.stateNode,n=c.getSnapshotBeforeUpdate(t.elementType===t.type?d:wt(t.type,d),o);c.__reactInternalSnapshotBeforeUpdate=n}break;case 3:var l=t.stateNode.containerInfo;l.nodeType===1?l.textContent="":l.nodeType===9&&l.documentElement&&l.removeChild(l.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(g){xe(t,t.return,g)}if(e=t.sibling,e!==null){e.return=t.return,Z=e;break}Z=t.return}return w=Rc,Rc=!1,w}function $i(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var u=s=s.next;do{if((u.tag&e)===e){var _=u.destroy;u.destroy=void 0,_!==void 0&&ga(t,r,_)}u=u.next}while(u!==s)}}function $n(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function ma(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function qu(e){var t=e.alternate;t!==null&&(e.alternate=null,qu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bt],delete t[is],delete t[sa],delete t[D_],delete t[M_])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Xu(e){return e.tag===5||e.tag===3||e.tag===4}function Dc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Xu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Sa(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=cn));else if(s!==4&&(e=e.child,e!==null))for(Sa(e,t,r),e=e.sibling;e!==null;)Sa(e,t,r),e=e.sibling}function ya(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(ya(e,t,r),e=e.sibling;e!==null;)ya(e,t,r),e=e.sibling}var He=null,bt=!1;function Zt(e,t,r){for(r=r.child;r!==null;)Yu(e,t,r),r=r.sibling}function Yu(e,t,r){if(Ot&&typeof Ot.onCommitFiberUnmount=="function")try{Ot.onCommitFiberUnmount(Pn,r)}catch{}switch(r.tag){case 5:Ve||Xr(r,t);case 6:var s=He,u=bt;He=null,Zt(e,t,r),He=s,bt=u,He!==null&&(bt?(e=He,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):He.removeChild(r.stateNode));break;case 18:He!==null&&(bt?(e=He,r=r.stateNode,e.nodeType===8?mo(e.parentNode,r):e.nodeType===1&&mo(e,r),Ji(e)):mo(He,r.stateNode));break;case 4:s=He,u=bt,He=r.stateNode.containerInfo,bt=!0,Zt(e,t,r),He=s,bt=u;break;case 0:case 11:case 14:case 15:if(!Ve&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){u=s=s.next;do{var _=u,y=_.destroy;_=_.tag,y!==void 0&&(_&2||_&4)&&ga(r,t,y),u=u.next}while(u!==s)}Zt(e,t,r);break;case 1:if(!Ve&&(Xr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(i){xe(r,t,i)}Zt(e,t,r);break;case 21:Zt(e,t,r);break;case 22:r.mode&1?(Ve=(s=Ve)||r.memoizedState!==null,Zt(e,t,r),Ve=s):Zt(e,t,r);break;default:Zt(e,t,r)}}function Mc(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new K_),t.forEach(function(s){var u=rp.bind(null,e,s);r.has(s)||(r.add(s),s.then(u,u))})}}function Ct(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var u=r[s];try{var _=e,y=t,i=y;e:for(;i!==null;){switch(i.tag){case 5:He=i.stateNode,bt=!1;break e;case 3:He=i.stateNode.containerInfo,bt=!0;break e;case 4:He=i.stateNode.containerInfo,bt=!0;break e}i=i.return}if(He===null)throw Error(G(160));Yu(_,y,u),He=null,bt=!1;var a=u.alternate;a!==null&&(a.return=null),u.return=null}catch(f){xe(u,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Qu(t,e),t=t.sibling}function Qu(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Tt(e),s&4){try{$i(3,e,e.return),$n(3,e)}catch(d){xe(e,e.return,d)}try{$i(5,e,e.return)}catch(d){xe(e,e.return,d)}}break;case 1:Ct(t,e),Tt(e),s&512&&r!==null&&Xr(r,r.return);break;case 5:if(Ct(t,e),Tt(e),s&512&&r!==null&&Xr(r,r.return),e.flags&32){var u=e.stateNode;try{qi(u,"")}catch(d){xe(e,e.return,d)}}if(s&4&&(u=e.stateNode,u!=null)){var _=e.memoizedProps,y=r!==null?r.memoizedProps:_,i=e.type,a=e.updateQueue;if(e.updateQueue=null,a!==null)try{i==="input"&&_.type==="radio"&&_.name!=null&&Sh(u,_),jo(i,y);var f=jo(i,_);for(y=0;y<a.length;y+=2){var p=a[y],h=a[y+1];p==="style"?Eh(u,h):p==="dangerouslySetInnerHTML"?wh(u,h):p==="children"?qi(u,h):Ba(u,p,h,f)}switch(i){case"input":Ho(u,_);break;case"textarea":yh(u,_);break;case"select":var v=u._wrapperState.wasMultiple;u._wrapperState.wasMultiple=!!_.multiple;var C=_.value;C!=null?Jr(u,!!_.multiple,C,!1):v!==!!_.multiple&&(_.defaultValue!=null?Jr(u,!!_.multiple,_.defaultValue,!0):Jr(u,!!_.multiple,_.multiple?[]:"",!1))}u[is]=_}catch(d){xe(e,e.return,d)}}break;case 6:if(Ct(t,e),Tt(e),s&4){if(e.stateNode===null)throw Error(G(162));u=e.stateNode,_=e.memoizedProps;try{u.nodeValue=_}catch(d){xe(e,e.return,d)}}break;case 3:if(Ct(t,e),Tt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Ji(t.containerInfo)}catch(d){xe(e,e.return,d)}break;case 4:Ct(t,e),Tt(e);break;case 13:Ct(t,e),Tt(e),u=e.child,u.flags&8192&&(_=u.memoizedState!==null,u.stateNode.isHidden=_,!_||u.alternate!==null&&u.alternate.memoizedState!==null||(fl=Re())),s&4&&Mc(e);break;case 22:if(p=r!==null&&r.memoizedState!==null,e.mode&1?(Ve=(f=Ve)||p,Ct(t,e),Ve=f):Ct(t,e),Tt(e),s&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!p&&e.mode&1)for(Z=e,p=e.child;p!==null;){for(h=Z=p;Z!==null;){switch(v=Z,C=v.child,v.tag){case 0:case 11:case 14:case 15:$i(4,v,v.return);break;case 1:Xr(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){s=v,r=v.return;try{t=s,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(d){xe(s,r,d)}}break;case 5:Xr(v,v.return);break;case 22:if(v.memoizedState!==null){Tc(h);continue}}C!==null?(C.return=v,Z=C):Tc(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{u=h.stateNode,f?(_=u.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(i=h.stateNode,a=h.memoizedProps.style,y=a!=null&&a.hasOwnProperty("display")?a.display:null,i.style.display=bh("display",y))}catch(d){xe(e,e.return,d)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(d){xe(e,e.return,d)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ct(t,e),Tt(e),s&4&&Mc(e);break;case 21:break;default:Ct(t,e),Tt(e)}}function Tt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Xu(r)){var s=r;break e}r=r.return}throw Error(G(160))}switch(s.tag){case 5:var u=s.stateNode;s.flags&32&&(qi(u,""),s.flags&=-33);var _=Dc(e);ya(e,_,u);break;case 3:case 4:var y=s.stateNode.containerInfo,i=Dc(e);Sa(e,i,y);break;default:throw Error(G(161))}}catch(a){xe(e,e.return,a)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function q_(e,t,r){Z=e,Ju(e)}function Ju(e,t,r){for(var s=(e.mode&1)!==0;Z!==null;){var u=Z,_=u.child;if(u.tag===22&&s){var y=u.memoizedState!==null||Ns;if(!y){var i=u.alternate,a=i!==null&&i.memoizedState!==null||Ve;i=Ns;var f=Ve;if(Ns=y,(Ve=a)&&!f)for(Z=u;Z!==null;)y=Z,a=y.child,y.tag===22&&y.memoizedState!==null?Pc(u):a!==null?(a.return=y,Z=a):Pc(u);for(;_!==null;)Z=_,Ju(_),_=_.sibling;Z=u,Ns=i,Ve=f}Ac(e)}else u.subtreeFlags&8772&&_!==null?(_.return=u,Z=_):Ac(e)}}function Ac(e){for(;Z!==null;){var t=Z;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ve||$n(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Ve)if(r===null)s.componentDidMount();else{var u=t.elementType===t.type?r.memoizedProps:wt(t.type,r.memoizedProps);s.componentDidUpdate(u,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var _=t.updateQueue;_!==null&&pc(t,_,s);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}pc(t,y,r)}break;case 5:var i=t.stateNode;if(r===null&&t.flags&4){r=i;var a=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&r.focus();break;case"img":a.src&&(r.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var p=f.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&Ji(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Ve||t.flags&512&&ma(t)}catch(v){xe(t,t.return,v)}}if(t===e){Z=null;break}if(r=t.sibling,r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Tc(e){for(;Z!==null;){var t=Z;if(t===e){Z=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Z=r;break}Z=t.return}}function Pc(e){for(;Z!==null;){var t=Z;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$n(4,t)}catch(a){xe(t,r,a)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var u=t.return;try{s.componentDidMount()}catch(a){xe(t,u,a)}}var _=t.return;try{ma(t)}catch(a){xe(t,_,a)}break;case 5:var y=t.return;try{ma(t)}catch(a){xe(t,y,a)}}}catch(a){xe(t,t.return,a)}if(t===e){Z=null;break}var i=t.sibling;if(i!==null){i.return=t.return,Z=i;break}Z=t.return}}var X_=Math.ceil,yn=qt.ReactCurrentDispatcher,ul=qt.ReactCurrentOwner,mt=qt.ReactCurrentBatchConfig,ue=0,Fe=null,De=null,ze=0,at=0,Yr=mr(0),Pe=0,cs=null,Ar=0,Wn=0,dl=0,Wi=null,Ze=null,fl=0,ui=1/0,Nt=null,Cn=!1,Ca=null,dr=null,Hs=!1,or=null,wn=0,Ui=0,wa=null,Ys=-1,Qs=0;function Xe(){return ue&6?Re():Ys!==-1?Ys:Ys=Re()}function fr(e){return e.mode&1?ue&2&&ze!==0?ze&-ze:T_.transition!==null?(Qs===0&&(Qs=Ih()),Qs):(e=de,e!==0||(e=window.event,e=e===void 0?16:Uh(e.type)),e):1}function Lt(e,t,r,s){if(50<Ui)throw Ui=0,wa=null,Error(G(185));_s(e,r,s),(!(ue&2)||e!==Fe)&&(e===Fe&&(!(ue&2)&&(Wn|=r),Pe===4&&sr(e,ze)),it(e,s),r===1&&ue===0&&!(t.mode&1)&&(ui=Re()+500,Nn&&Sr()))}function it(e,t){var r=e.callbackNode;Tf(e,t);var s=nn(e,e===Fe?ze:0);if(s===0)r!==null&&Wl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Wl(r),t===1)e.tag===0?A_(Bc.bind(null,e)):lu(Bc.bind(null,e)),k_(function(){!(ue&6)&&Sr()}),r=null;else{switch(Fh(s)){case 1:r=Ha;break;case 4:r=Bh;break;case 16:r=sn;break;case 536870912:r=Oh;break;default:r=sn}r=od(r,Zu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Zu(e,t){if(Ys=-1,Qs=0,ue&6)throw Error(G(327));var r=e.callbackNode;if(ii()&&e.callbackNode!==r)return null;var s=nn(e,e===Fe?ze:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=bn(e,s);else{t=s;var u=ue;ue|=2;var _=td();(Fe!==e||ze!==t)&&(Nt=null,ui=Re()+500,Lr(e,t));do try{J_();break}catch(i){ed(e,i)}while(!0);Ja(),yn.current=_,ue=u,De!==null?t=0:(Fe=null,ze=0,t=Pe)}if(t!==0){if(t===2&&(u=Xo(e),u!==0&&(s=u,t=ba(e,u))),t===1)throw r=cs,Lr(e,0),sr(e,s),it(e,Re()),r;if(t===6)sr(e,s);else{if(u=e.current.alternate,!(s&30)&&!Y_(u)&&(t=bn(e,s),t===2&&(_=Xo(e),_!==0&&(s=_,t=ba(e,_))),t===1))throw r=cs,Lr(e,0),sr(e,s),it(e,Re()),r;switch(e.finishedWork=u,e.finishedLanes=s,t){case 0:case 1:throw Error(G(345));case 2:wr(e,Ze,Nt);break;case 3:if(sr(e,s),(s&130023424)===s&&(t=fl+500-Re(),10<t)){if(nn(e,0)!==0)break;if(u=e.suspendedLanes,(u&s)!==s){Xe(),e.pingedLanes|=e.suspendedLanes&u;break}e.timeoutHandle=ia(wr.bind(null,e,Ze,Nt),t);break}wr(e,Ze,Nt);break;case 4:if(sr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,u=-1;0<s;){var y=31-xt(s);_=1<<y,y=t[y],y>u&&(u=y),s&=~_}if(s=u,s=Re()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*X_(s/1960))-s,10<s){e.timeoutHandle=ia(wr.bind(null,e,Ze,Nt),s);break}wr(e,Ze,Nt);break;case 5:wr(e,Ze,Nt);break;default:throw Error(G(329))}}}return it(e,Re()),e.callbackNode===r?Zu.bind(null,e):null}function ba(e,t){var r=Wi;return e.current.memoizedState.isDehydrated&&(Lr(e,t).flags|=256),e=bn(e,t),e!==2&&(t=Ze,Ze=r,t!==null&&Ea(t)),e}function Ea(e){Ze===null?Ze=e:Ze.push.apply(Ze,e)}function Y_(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var u=r[s],_=u.getSnapshot;u=u.value;try{if(!kt(_(),u))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function sr(e,t){for(t&=~dl,t&=~Wn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-xt(t),s=1<<r;e[r]=-1,t&=~s}}function Bc(e){if(ue&6)throw Error(G(327));ii();var t=nn(e,0);if(!(t&1))return it(e,Re()),null;var r=bn(e,t);if(e.tag!==0&&r===2){var s=Xo(e);s!==0&&(t=s,r=ba(e,s))}if(r===1)throw r=cs,Lr(e,0),sr(e,t),it(e,Re()),r;if(r===6)throw Error(G(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wr(e,Ze,Nt),it(e,Re()),null}function _l(e,t){var r=ue;ue|=1;try{return e(t)}finally{ue=r,ue===0&&(ui=Re()+500,Nn&&Sr())}}function Tr(e){or!==null&&or.tag===0&&!(ue&6)&&ii();var t=ue;ue|=1;var r=mt.transition,s=de;try{if(mt.transition=null,de=1,e)return e()}finally{de=s,mt.transition=r,ue=t,!(ue&6)&&Sr()}}function pl(){at=Yr.current,me(Yr)}function Lr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,L_(r)),De!==null)for(r=De.return;r!==null;){var s=r;switch(Xa(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&hn();break;case 3:ci(),me(tt),me(Ke),sl();break;case 5:il(s);break;case 4:ci();break;case 13:me(we);break;case 19:me(we);break;case 10:Za(s.type._context);break;case 22:case 23:pl()}r=r.return}if(Fe=e,De=e=_r(e.current,null),ze=at=t,Pe=0,cs=null,dl=Wn=Ar=0,Ze=Wi=null,Er!==null){for(t=0;t<Er.length;t++)if(r=Er[t],s=r.interleaved,s!==null){r.interleaved=null;var u=s.next,_=r.pending;if(_!==null){var y=_.next;_.next=u,s.next=y}r.pending=s}Er=null}return e}function ed(e,t){do{var r=De;try{if(Ja(),Gs.current=Sn,mn){for(var s=be.memoizedState;s!==null;){var u=s.queue;u!==null&&(u.pending=null),s=s.next}mn=!1}if(Mr=0,Oe=Ae=be=null,zi=!1,os=0,ul.current=null,r===null||r.return===null){Pe=1,cs=t,De=null;break}e:{var _=e,y=r.return,i=r,a=t;if(t=ze,i.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var f=a,p=i,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=Cc(y);if(C!==null){C.flags&=-257,wc(C,y,i,_,t),C.mode&1&&yc(_,f,t),t=C,a=f;var w=t.updateQueue;if(w===null){var d=new Set;d.add(a),t.updateQueue=d}else w.add(a);break e}else{if(!(t&1)){yc(_,f,t),vl();break e}a=Error(G(426))}}else if(ye&&i.mode&1){var o=Cc(y);if(o!==null){!(o.flags&65536)&&(o.flags|=256),wc(o,y,i,_,t),Ya(hi(a,i));break e}}_=a=hi(a,i),Pe!==4&&(Pe=2),Wi===null?Wi=[_]:Wi.push(_),_=y;do{switch(_.tag){case 3:_.flags|=65536,t&=-t,_.lanes|=t;var c=Fu(_,a,t);_c(_,c);break e;case 1:i=a;var n=_.type,l=_.stateNode;if(!(_.flags&128)&&(typeof n.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(dr===null||!dr.has(l)))){_.flags|=65536,t&=-t,_.lanes|=t;var g=Nu(_,i,t);_c(_,g);break e}}_=_.return}while(_!==null)}id(r)}catch(b){t=b,De===r&&r!==null&&(De=r=r.return);continue}break}while(!0)}function td(){var e=yn.current;return yn.current=Sn,e===null?Sn:e}function vl(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Fe===null||!(Ar&268435455)&&!(Wn&268435455)||sr(Fe,ze)}function bn(e,t){var r=ue;ue|=2;var s=td();(Fe!==e||ze!==t)&&(Nt=null,Lr(e,t));do try{Q_();break}catch(u){ed(e,u)}while(!0);if(Ja(),ue=r,yn.current=s,De!==null)throw Error(G(261));return Fe=null,ze=0,Pe}function Q_(){for(;De!==null;)rd(De)}function J_(){for(;De!==null&&!bf();)rd(De)}function rd(e){var t=nd(e.alternate,e,at);e.memoizedProps=e.pendingProps,t===null?id(e):De=t,ul.current=null}function id(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=V_(r,t),r!==null){r.flags&=32767,De=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pe=6,De=null;return}}else if(r=j_(r,t,at),r!==null){De=r;return}if(t=t.sibling,t!==null){De=t;return}De=t=e}while(t!==null);Pe===0&&(Pe=5)}function wr(e,t,r){var s=de,u=mt.transition;try{mt.transition=null,de=1,Z_(e,t,r,s)}finally{mt.transition=u,de=s}return null}function Z_(e,t,r,s){do ii();while(or!==null);if(ue&6)throw Error(G(327));r=e.finishedWork;var u=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(G(177));e.callbackNode=null,e.callbackPriority=0;var _=r.lanes|r.childLanes;if(Pf(e,_),e===Fe&&(De=Fe=null,ze=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hs||(Hs=!0,od(sn,function(){return ii(),null})),_=(r.flags&15990)!==0,r.subtreeFlags&15990||_){_=mt.transition,mt.transition=null;var y=de;de=1;var i=ue;ue|=4,ul.current=null,G_(e,r),Qu(r,e),S_(ta),on=!!ea,ta=ea=null,e.current=r,q_(r),Ef(),ue=i,de=y,mt.transition=_}else e.current=r;if(Hs&&(Hs=!1,or=e,wn=u),_=e.pendingLanes,_===0&&(dr=null),kf(r.stateNode),it(e,Re()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)u=t[r],s(u.value,{componentStack:u.stack,digest:u.digest});if(Cn)throw Cn=!1,e=Ca,Ca=null,e;return wn&1&&e.tag!==0&&ii(),_=e.pendingLanes,_&1?e===wa?Ui++:(Ui=0,wa=e):Ui=0,Sr(),null}function ii(){if(or!==null){var e=Fh(wn),t=mt.transition,r=de;try{if(mt.transition=null,de=16>e?16:e,or===null)var s=!1;else{if(e=or,or=null,wn=0,ue&6)throw Error(G(331));var u=ue;for(ue|=4,Z=e.current;Z!==null;){var _=Z,y=_.child;if(Z.flags&16){var i=_.deletions;if(i!==null){for(var a=0;a<i.length;a++){var f=i[a];for(Z=f;Z!==null;){var p=Z;switch(p.tag){case 0:case 11:case 15:$i(8,p,_)}var h=p.child;if(h!==null)h.return=p,Z=h;else for(;Z!==null;){p=Z;var v=p.sibling,C=p.return;if(qu(p),p===f){Z=null;break}if(v!==null){v.return=C,Z=v;break}Z=C}}}var w=_.alternate;if(w!==null){var d=w.child;if(d!==null){w.child=null;do{var o=d.sibling;d.sibling=null,d=o}while(d!==null)}}Z=_}}if(_.subtreeFlags&2064&&y!==null)y.return=_,Z=y;else e:for(;Z!==null;){if(_=Z,_.flags&2048)switch(_.tag){case 0:case 11:case 15:$i(9,_,_.return)}var c=_.sibling;if(c!==null){c.return=_.return,Z=c;break e}Z=_.return}}var n=e.current;for(Z=n;Z!==null;){y=Z;var l=y.child;if(y.subtreeFlags&2064&&l!==null)l.return=y,Z=l;else e:for(y=n;Z!==null;){if(i=Z,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:$n(9,i)}}catch(b){xe(i,i.return,b)}if(i===y){Z=null;break e}var g=i.sibling;if(g!==null){g.return=i.return,Z=g;break e}Z=i.return}}if(ue=u,Sr(),Ot&&typeof Ot.onPostCommitFiberRoot=="function")try{Ot.onPostCommitFiberRoot(Pn,e)}catch{}s=!0}return s}finally{de=r,mt.transition=t}}return!1}function Oc(e,t,r){t=hi(r,t),t=Fu(e,t,1),e=ur(e,t,1),t=Xe(),e!==null&&(_s(e,1,t),it(e,t))}function xe(e,t,r){if(e.tag===3)Oc(e,e,r);else for(;t!==null;){if(t.tag===3){Oc(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(dr===null||!dr.has(s))){e=hi(r,e),e=Nu(t,e,1),t=ur(t,e,1),e=Xe(),t!==null&&(_s(t,1,e),it(t,e));break}}t=t.return}}function ep(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Xe(),e.pingedLanes|=e.suspendedLanes&r,Fe===e&&(ze&r)===r&&(Pe===4||Pe===3&&(ze&130023424)===ze&&500>Re()-fl?Lr(e,0):dl|=r),it(e,t)}function sd(e,t){t===0&&(e.mode&1?(t=Ds,Ds<<=1,!(Ds&130023424)&&(Ds=4194304)):t=1);var r=Xe();e=Vt(e,t),e!==null&&(_s(e,t,r),it(e,r))}function tp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),sd(e,r)}function rp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,u=e.memoizedState;u!==null&&(r=u.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(G(314))}s!==null&&s.delete(t),sd(e,r)}var nd;nd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||tt.current)et=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return et=!1,U_(e,t,r);et=!!(e.flags&131072)}else et=!1,ye&&t.flags&1048576&&cu(t,fn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Xs(e,t),e=t.pendingProps;var u=oi(t,Ke.current);ri(t,r),u=ol(null,t,s,e,u,r);var _=al();return t.flags|=1,typeof u=="object"&&u!==null&&typeof u.render=="function"&&u.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(s)?(_=!0,un(t)):_=!1,t.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,tl(t),u.updater=zn,t.stateNode=u,u._reactInternals=t,ha(t,s,e,r),t=fa(null,t,s,!0,_,r)):(t.tag=0,ye&&_&&qa(t),qe(null,t,u,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Xs(e,t),e=t.pendingProps,u=s._init,s=u(s._payload),t.type=s,u=t.tag=sp(s),e=wt(s,e),u){case 0:t=da(null,t,s,e,r);break e;case 1:t=xc(null,t,s,e,r);break e;case 11:t=bc(null,t,s,e,r);break e;case 14:t=Ec(null,t,s,wt(s.type,e),r);break e}throw Error(G(306,s,""))}return t;case 0:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:wt(s,u),da(e,t,s,u,r);case 1:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:wt(s,u),xc(e,t,s,u,r);case 3:e:{if(Wu(t),e===null)throw Error(G(387));s=t.pendingProps,_=t.memoizedState,u=_.element,pu(e,t),vn(t,s,null,r);var y=t.memoizedState;if(s=y.element,_.isDehydrated)if(_={element:s,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=_,t.memoizedState=_,t.flags&256){u=hi(Error(G(423)),t),t=Lc(e,t,s,r,u);break e}else if(s!==u){u=hi(Error(G(424)),t),t=Lc(e,t,s,r,u);break e}else for(lt=hr(t.stateNode.containerInfo.firstChild),ct=t,ye=!0,Et=null,r=fu(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ai(),s===u){t=Kt(e,t,r);break e}qe(e,t,s,r)}t=t.child}return t;case 5:return vu(t),e===null&&aa(t),s=t.type,u=t.pendingProps,_=e!==null?e.memoizedProps:null,y=u.children,ra(s,u)?y=null:_!==null&&ra(s,_)&&(t.flags|=32),$u(e,t),qe(e,t,y,r),t.child;case 6:return e===null&&aa(t),null;case 13:return Uu(e,t,r);case 4:return rl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=li(t,null,s,r):qe(e,t,s,r),t.child;case 11:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:wt(s,u),bc(e,t,s,u,r);case 7:return qe(e,t,t.pendingProps,r),t.child;case 8:return qe(e,t,t.pendingProps.children,r),t.child;case 12:return qe(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,u=t.pendingProps,_=t.memoizedProps,y=u.value,ve(_n,s._currentValue),s._currentValue=y,_!==null)if(kt(_.value,y)){if(_.children===u.children&&!tt.current){t=Kt(e,t,r);break e}}else for(_=t.child,_!==null&&(_.return=t);_!==null;){var i=_.dependencies;if(i!==null){y=_.child;for(var a=i.firstContext;a!==null;){if(a.context===s){if(_.tag===1){a=Wt(-1,r&-r),a.tag=2;var f=_.updateQueue;if(f!==null){f=f.shared;var p=f.pending;p===null?a.next=a:(a.next=p.next,p.next=a),f.pending=a}}_.lanes|=r,a=_.alternate,a!==null&&(a.lanes|=r),la(_.return,r,t),i.lanes|=r;break}a=a.next}}else if(_.tag===10)y=_.type===t.type?null:_.child;else if(_.tag===18){if(y=_.return,y===null)throw Error(G(341));y.lanes|=r,i=y.alternate,i!==null&&(i.lanes|=r),la(y,r,t),y=_.sibling}else y=_.child;if(y!==null)y.return=_;else for(y=_;y!==null;){if(y===t){y=null;break}if(_=y.sibling,_!==null){_.return=y.return,y=_;break}y=y.return}_=y}qe(e,t,u.children,r),t=t.child}return t;case 9:return u=t.type,s=t.pendingProps.children,ri(t,r),u=St(u),s=s(u),t.flags|=1,qe(e,t,s,r),t.child;case 14:return s=t.type,u=wt(s,t.pendingProps),u=wt(s.type,u),Ec(e,t,s,u,r);case 15:return Hu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,u=t.pendingProps,u=t.elementType===s?u:wt(s,u),Xs(e,t),t.tag=1,rt(s)?(e=!0,un(t)):e=!1,ri(t,r),Iu(t,s,u),ha(t,s,u,r),fa(null,t,s,!0,e,r);case 19:return ju(e,t,r);case 22:return zu(e,t,r)}throw Error(G(156,t.tag))};function od(e,t){return Ph(e,t)}function ip(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gt(e,t,r,s){return new ip(e,t,r,s)}function gl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sp(e){if(typeof e=="function")return gl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ia)return 11;if(e===Fa)return 14}return 2}function _r(e,t){var r=e.alternate;return r===null?(r=gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Js(e,t,r,s,u,_){var y=2;if(s=e,typeof e=="function")gl(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case zr:return kr(r.children,u,_,t);case Oa:y=8,u|=8;break;case Bo:return e=gt(12,r,t,u|2),e.elementType=Bo,e.lanes=_,e;case Oo:return e=gt(13,r,t,u),e.elementType=Oo,e.lanes=_,e;case Io:return e=gt(19,r,t,u),e.elementType=Io,e.lanes=_,e;case vh:return Un(r,u,_,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _h:y=10;break e;case ph:y=9;break e;case Ia:y=11;break e;case Fa:y=14;break e;case er:y=16,s=null;break e}throw Error(G(130,e==null?e:typeof e,""))}return t=gt(y,r,t,u),t.elementType=e,t.type=s,t.lanes=_,t}function kr(e,t,r,s){return e=gt(7,e,s,t),e.lanes=r,e}function Un(e,t,r,s){return e=gt(22,e,s,t),e.elementType=vh,e.lanes=r,e.stateNode={isHidden:!1},e}function Lo(e,t,r){return e=gt(6,e,null,t),e.lanes=r,e}function ko(e,t,r){return t=gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function np(e,t,r,s,u){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oo(0),this.expirationTimes=oo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oo(0),this.identifierPrefix=s,this.onRecoverableError=u,this.mutableSourceEagerHydrationData=null}function ml(e,t,r,s,u,_,y,i,a){return e=new np(e,t,r,i,a),t===1?(t=1,_===!0&&(t|=8)):t=0,_=gt(3,null,null,t),e.current=_,_.stateNode=e,_.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},tl(_),e}function op(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function ad(e){if(!e)return vr;e=e._reactInternals;e:{if(Br(e)!==e||e.tag!==1)throw Error(G(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(G(171))}if(e.tag===1){var r=e.type;if(rt(r))return au(e,r,t)}return t}function ld(e,t,r,s,u,_,y,i,a){return e=ml(r,s,!0,e,u,_,y,i,a),e.context=ad(null),r=e.current,s=Xe(),u=fr(r),_=Wt(s,u),_.callback=t??null,ur(r,_,u),e.current.lanes=u,_s(e,u,s),it(e,s),e}function jn(e,t,r,s){var u=t.current,_=Xe(),y=fr(u);return r=ad(r),t.context===null?t.context=r:t.pendingContext=r,t=Wt(_,y),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=ur(u,t,y),e!==null&&(Lt(e,u,y,_),Ks(e,u,y)),y}function En(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ic(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Sl(e,t){Ic(e,t),(e=e.alternate)&&Ic(e,t)}function ap(){return null}var cd=typeof reportError=="function"?reportError:function(e){console.error(e)};function yl(e){this._internalRoot=e}Vn.prototype.render=yl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(G(409));jn(e,t,null,null)};Vn.prototype.unmount=yl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Tr(function(){jn(null,e,null,null)}),t[jt]=null}};function Vn(e){this._internalRoot=e}Vn.prototype.unstable_scheduleHydration=function(e){if(e){var t=zh();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ir.length&&t!==0&&t<ir[r].priority;r++);ir.splice(r,0,e),r===0&&Wh(e)}};function Cl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Kn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Fc(){}function lp(e,t,r,s,u){if(u){if(typeof s=="function"){var _=s;s=function(){var f=En(y);_.call(f)}}var y=ld(t,s,e,0,null,!1,!1,"",Fc);return e._reactRootContainer=y,e[jt]=y.current,ts(e.nodeType===8?e.parentNode:e),Tr(),y}for(;u=e.lastChild;)e.removeChild(u);if(typeof s=="function"){var i=s;s=function(){var f=En(a);i.call(f)}}var a=ml(e,0,!1,null,null,!1,!1,"",Fc);return e._reactRootContainer=a,e[jt]=a.current,ts(e.nodeType===8?e.parentNode:e),Tr(function(){jn(t,a,r,s)}),a}function Gn(e,t,r,s,u){var _=r._reactRootContainer;if(_){var y=_;if(typeof u=="function"){var i=u;u=function(){var a=En(y);i.call(a)}}jn(t,y,e,u)}else y=lp(r,t,e,u,s);return En(y)}Nh=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pi(t.pendingLanes);r!==0&&(za(t,r|1),it(t,Re()),!(ue&6)&&(ui=Re()+500,Sr()))}break;case 13:Tr(function(){var s=Vt(e,1);if(s!==null){var u=Xe();Lt(s,e,1,u)}}),Sl(e,1)}};$a=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var r=Xe();Lt(t,e,134217728,r)}Sl(e,134217728)}};Hh=function(e){if(e.tag===13){var t=fr(e),r=Vt(e,t);if(r!==null){var s=Xe();Lt(r,e,t,s)}Sl(e,t)}};zh=function(){return de};$h=function(e,t){var r=de;try{return de=e,t()}finally{de=r}};Ko=function(e,t,r){switch(t){case"input":if(Ho(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var u=Fn(s);if(!u)throw Error(G(90));mh(s),Ho(s,u)}}}break;case"textarea":yh(e,r);break;case"select":t=r.value,t!=null&&Jr(e,!!r.multiple,t,!1)}};kh=_l;Rh=Tr;var cp={usingClientEntryPoint:!1,Events:[vs,jr,Fn,xh,Lh,_l]},Mi={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hp={bundleType:Mi.bundleType,version:Mi.version,rendererPackageName:Mi.rendererPackageName,rendererConfig:Mi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ah(e),e===null?null:e.stateNode},findFiberByHostInstance:Mi.findFiberByHostInstance||ap,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zs.isDisabled&&zs.supportsFiber)try{Pn=zs.inject(hp),Ot=zs}catch{}}ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cp;ut.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cl(t))throw Error(G(200));return op(e,t,null,r)};ut.createRoot=function(e,t){if(!Cl(e))throw Error(G(299));var r=!1,s="",u=cd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(u=t.onRecoverableError)),t=ml(e,1,!1,null,null,r,!1,s,u),e[jt]=t.current,ts(e.nodeType===8?e.parentNode:e),new yl(t)};ut.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(G(188)):(e=Object.keys(e).join(","),Error(G(268,e)));return e=Ah(t),e=e===null?null:e.stateNode,e};ut.flushSync=function(e){return Tr(e)};ut.hydrate=function(e,t,r){if(!Kn(t))throw Error(G(200));return Gn(null,e,t,!0,r)};ut.hydrateRoot=function(e,t,r){if(!Cl(e))throw Error(G(405));var s=r!=null&&r.hydratedSources||null,u=!1,_="",y=cd;if(r!=null&&(r.unstable_strictMode===!0&&(u=!0),r.identifierPrefix!==void 0&&(_=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=ld(t,null,e,1,r??null,u,!1,_,y),e[jt]=t.current,ts(e),s)for(e=0;e<s.length;e++)r=s[e],u=r._getVersion,u=u(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,u]:t.mutableSourceEagerHydrationData.push(r,u);return new Vn(t)};ut.render=function(e,t,r){if(!Kn(t))throw Error(G(200));return Gn(null,e,t,!1,r)};ut.unmountComponentAtNode=function(e){if(!Kn(e))throw Error(G(40));return e._reactRootContainer?(Tr(function(){Gn(null,null,e,!1,function(){e._reactRootContainer=null,e[jt]=null})}),!0):!1};ut.unstable_batchedUpdates=_l;ut.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!Kn(r))throw Error(G(200));if(e==null||e._reactInternals===void 0)throw Error(G(38));return Gn(e,t,r,!1,s)};ut.version="18.3.1-next-f1338f8080-20240426";function hd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hd)}catch(e){console.error(e)}}hd(),hh.exports=ut;var Qr=hh.exports,Nc=Qr;To.createRoot=Nc.createRoot,To.hydrateRoot=Nc.hydrateRoot;const qn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function pi(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function wl(e){return"nodeType"in e}function Je(e){var t,r;return e?pi(e)?e:wl(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function bl(e){const{Document:t}=Je(e);return e instanceof t}function ms(e){return pi(e)?!1:e instanceof Je(e).HTMLElement}function ud(e){return e instanceof Je(e).SVGElement}function vi(e){return e?pi(e)?e.document:wl(e)?bl(e)?e:ms(e)||ud(e)?e.ownerDocument:document:document:document}const Gt=qn?$.useLayoutEffect:$.useEffect;function Xn(e){const t=$.useRef(e);return Gt(()=>{t.current=e}),$.useCallback(function(){for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return t.current==null?void 0:t.current(...s)},[])}function up(){const e=$.useRef(null),t=$.useCallback((s,u)=>{e.current=setInterval(s,u)},[]),r=$.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function hs(e,t){t===void 0&&(t=[e]);const r=$.useRef(e);return Gt(()=>{r.current!==e&&(r.current=e)},t),r}function Ss(e,t){const r=$.useRef();return $.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...t])}function xn(e){const t=Xn(e),r=$.useRef(null),s=$.useCallback(u=>{u!==r.current&&(t==null||t(u,r.current)),r.current=u},[]);return[r,s]}function Ln(e){const t=$.useRef();return $.useEffect(()=>{t.current=e},[e]),t.current}let Ro={};function Yn(e,t){return $.useMemo(()=>{if(t)return t;const r=Ro[e]==null?0:Ro[e]+1;return Ro[e]=r,e+"-"+r},[e,t])}function dd(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),u=1;u<r;u++)s[u-1]=arguments[u];return s.reduce((_,y)=>{const i=Object.entries(y);for(const[a,f]of i){const p=_[a];p!=null&&(_[a]=p+e*f)}return _},{...t})}}const si=dd(1),kn=dd(-1);function dp(e){return"clientX"in e&&"clientY"in e}function El(e){if(!e)return!1;const{KeyboardEvent:t}=Je(e.target);return t&&e instanceof t}function fp(e){if(!e)return!1;const{TouchEvent:t}=Je(e.target);return t&&e instanceof t}function Rn(e){if(fp(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return dp(e)?{x:e.clientX,y:e.clientY}:null}const us=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[us.Translate.toString(e),us.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),Hc="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function _p(e){return e.matches(Hc)?e:e.querySelector(Hc)}const pp={display:"none"};function vp(e){let{id:t,value:r}=e;return Le.createElement("div",{id:t,style:pp},r)}function gp(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;const u={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Le.createElement("div",{id:t,style:u,role:"status","aria-live":s,"aria-atomic":!0},r)}function mp(){const[e,t]=$.useState("");return{announce:$.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const fd=$.createContext(null);function Sp(e){const t=$.useContext(fd);$.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function yp(){const[e]=$.useState(()=>new Set),t=$.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[$.useCallback(s=>{let{type:u,event:_}=s;e.forEach(y=>{var i;return(i=y[u])==null?void 0:i.call(y,_)})},[e]),t]}const Cp={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},wp={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function bp(e){let{announcements:t=wp,container:r,hiddenTextDescribedById:s,screenReaderInstructions:u=Cp}=e;const{announce:_,announcement:y}=mp(),i=Yn("DndLiveRegion"),[a,f]=$.useState(!1);if($.useEffect(()=>{f(!0)},[]),Sp($.useMemo(()=>({onDragStart(h){let{active:v}=h;_(t.onDragStart({active:v}))},onDragMove(h){let{active:v,over:C}=h;t.onDragMove&&_(t.onDragMove({active:v,over:C}))},onDragOver(h){let{active:v,over:C}=h;_(t.onDragOver({active:v,over:C}))},onDragEnd(h){let{active:v,over:C}=h;_(t.onDragEnd({active:v,over:C}))},onDragCancel(h){let{active:v,over:C}=h;_(t.onDragCancel({active:v,over:C}))}}),[_,t])),!a)return null;const p=Le.createElement(Le.Fragment,null,Le.createElement(vp,{id:s,value:u.draggable}),Le.createElement(gp,{id:i,announcement:y}));return r?Qr.createPortal(p,r):p}var Te;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Te||(Te={}));function Dn(){}function Ep(e,t){return $.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function xp(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return $.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const Rt=Object.freeze({x:0,y:0});function Lp(e,t){const r=Rn(e);if(!r)return"0 0";const s={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return s.x+"% "+s.y+"%"}function kp(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function Rp(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function Dp(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),u=Math.min(t.left+t.width,e.left+e.width),_=Math.min(t.top+t.height,e.top+e.height),y=u-s,i=_-r;if(s<u&&r<_){const a=t.width*t.height,f=e.width*e.height,p=y*i,h=p/(a+f-p);return Number(h.toFixed(4))}return 0}const Mp=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const u=[];for(const _ of s){const{id:y}=_,i=r.get(y);if(i){const a=Dp(i,t);a>0&&u.push({id:y,data:{droppableContainer:_,value:a}})}}return u.sort(kp)};function Ap(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function _d(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Rt}function Tp(e){return function(r){for(var s=arguments.length,u=new Array(s>1?s-1:0),_=1;_<s;_++)u[_-1]=arguments[_];return u.reduce((y,i)=>({...y,top:y.top+e*i.y,bottom:y.bottom+e*i.y,left:y.left+e*i.x,right:y.right+e*i.x}),{...r})}}const Pp=Tp(1);function pd(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Bp(e,t,r){const s=pd(t);if(!s)return e;const{scaleX:u,scaleY:_,x:y,y:i}=s,a=e.left-y-(1-u)*parseFloat(r),f=e.top-i-(1-_)*parseFloat(r.slice(r.indexOf(" ")+1)),p=u?e.width/u:e.width,h=_?e.height/_:e.height;return{width:p,height:h,top:f,right:a+p,bottom:f+h,left:a}}const Op={ignoreTransform:!1};function ys(e,t){t===void 0&&(t=Op);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:f,transformOrigin:p}=Je(e).getComputedStyle(e);f&&(r=Bp(r,f,p))}const{top:s,left:u,width:_,height:y,bottom:i,right:a}=r;return{top:s,left:u,width:_,height:y,bottom:i,right:a}}function zc(e){return ys(e,{ignoreTransform:!0})}function Ip(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function Fp(e,t){return t===void 0&&(t=Je(e).getComputedStyle(e)),t.position==="fixed"}function Np(e,t){t===void 0&&(t=Je(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(u=>{const _=t[u];return typeof _=="string"?r.test(_):!1})}function xl(e,t){const r=[];function s(u){if(t!=null&&r.length>=t||!u)return r;if(bl(u)&&u.scrollingElement!=null&&!r.includes(u.scrollingElement))return r.push(u.scrollingElement),r;if(!ms(u)||ud(u)||r.includes(u))return r;const _=Je(e).getComputedStyle(u);return u!==e&&Np(u,_)&&r.push(u),Fp(u,_)?r:s(u.parentNode)}return e?s(e):r}function vd(e){const[t]=xl(e,1);return t??null}function Do(e){return!qn||!e?null:pi(e)?e:wl(e)?bl(e)||e===vi(e).scrollingElement?window:ms(e)?e:null:null}function gd(e){return pi(e)?e.scrollX:e.scrollLeft}function md(e){return pi(e)?e.scrollY:e.scrollTop}function xa(e){return{x:gd(e),y:md(e)}}var Ie;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Ie||(Ie={}));function Sd(e){return!qn||!e?!1:e===document.scrollingElement}function yd(e){const t={x:0,y:0},r=Sd(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},u=e.scrollTop<=t.y,_=e.scrollLeft<=t.x,y=e.scrollTop>=s.y,i=e.scrollLeft>=s.x;return{isTop:u,isLeft:_,isBottom:y,isRight:i,maxScroll:s,minScroll:t}}const Hp={x:.2,y:.2};function zp(e,t,r,s,u){let{top:_,left:y,right:i,bottom:a}=r;s===void 0&&(s=10),u===void 0&&(u=Hp);const{isTop:f,isBottom:p,isLeft:h,isRight:v}=yd(e),C={x:0,y:0},w={x:0,y:0},d={height:t.height*u.y,width:t.width*u.x};return!f&&_<=t.top+d.height?(C.y=Ie.Backward,w.y=s*Math.abs((t.top+d.height-_)/d.height)):!p&&a>=t.bottom-d.height&&(C.y=Ie.Forward,w.y=s*Math.abs((t.bottom-d.height-a)/d.height)),!v&&i>=t.right-d.width?(C.x=Ie.Forward,w.x=s*Math.abs((t.right-d.width-i)/d.width)):!h&&y<=t.left+d.width&&(C.x=Ie.Backward,w.x=s*Math.abs((t.left+d.width-y)/d.width)),{direction:C,speed:w}}function $p(e){if(e===document.scrollingElement){const{innerWidth:_,innerHeight:y}=window;return{top:0,left:0,right:_,bottom:y,width:_,height:y}}const{top:t,left:r,right:s,bottom:u}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:u,width:e.clientWidth,height:e.clientHeight}}function Cd(e){return e.reduce((t,r)=>si(t,xa(r)),Rt)}function Wp(e){return e.reduce((t,r)=>t+gd(r),0)}function Up(e){return e.reduce((t,r)=>t+md(r),0)}function wd(e,t){if(t===void 0&&(t=ys),!e)return;const{top:r,left:s,bottom:u,right:_}=t(e);vd(e)&&(u<=0||_<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const jp=[["x",["left","right"],Wp],["y",["top","bottom"],Up]];class Ll{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=xl(r),u=Cd(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[_,y,i]of jp)for(const a of y)Object.defineProperty(this,a,{get:()=>{const f=i(s),p=u[_]-f;return this.rect[a]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ji{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=t}add(t,r,s){var u;(u=this.target)==null||u.addEventListener(t,r,s),this.listeners.push([t,r,s])}}function Vp(e){const{EventTarget:t}=Je(e);return e instanceof t?e:vi(e)}function Mo(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t?s>t.y:!1}var _t;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(_t||(_t={}));function $c(e){e.preventDefault()}function Kp(e){e.stopPropagation()}var pe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(pe||(pe={}));const bd={start:[pe.Space,pe.Enter],cancel:[pe.Esc],end:[pe.Space,pe.Enter,pe.Tab]},Gp=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case pe.Right:return{...r,x:r.x+25};case pe.Left:return{...r,x:r.x-25};case pe.Down:return{...r,y:r.y+25};case pe.Up:return{...r,y:r.y-25}}};class Ed{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new ji(vi(r)),this.windowListeners=new ji(Je(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_t.Resize,this.handleCancel),this.windowListeners.add(_t.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(_t.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,s=t.node.current;s&&wd(s),r(Rt)}handleKeyDown(t){if(El(t)){const{active:r,context:s,options:u}=this.props,{keyboardCodes:_=bd,coordinateGetter:y=Gp,scrollBehavior:i="smooth"}=u,{code:a}=t;if(_.end.includes(a)){this.handleEnd(t);return}if(_.cancel.includes(a)){this.handleCancel(t);return}const{collisionRect:f}=s.current,p=f?{x:f.left,y:f.top}:Rt;this.referenceCoordinates||(this.referenceCoordinates=p);const h=y(t,{active:r,context:s.current,currentCoordinates:p});if(h){const v=kn(h,p),C={x:0,y:0},{scrollableAncestors:w}=s.current;for(const d of w){const o=t.code,{isTop:c,isRight:n,isLeft:l,isBottom:g,maxScroll:b,minScroll:S}=yd(d),E=$p(d),m={x:Math.min(o===pe.Right?E.right-E.width/2:E.right,Math.max(o===pe.Right?E.left:E.left+E.width/2,h.x)),y:Math.min(o===pe.Down?E.bottom-E.height/2:E.bottom,Math.max(o===pe.Down?E.top:E.top+E.height/2,h.y))},x=o===pe.Right&&!n||o===pe.Left&&!l,L=o===pe.Down&&!g||o===pe.Up&&!c;if(x&&m.x!==h.x){const M=d.scrollLeft+v.x,R=o===pe.Right&&M<=b.x||o===pe.Left&&M>=S.x;if(R&&!v.y){d.scrollTo({left:M,behavior:i});return}R?C.x=d.scrollLeft-M:C.x=o===pe.Right?d.scrollLeft-b.x:d.scrollLeft-S.x,C.x&&d.scrollBy({left:-C.x,behavior:i});break}else if(L&&m.y!==h.y){const M=d.scrollTop+v.y,R=o===pe.Down&&M<=b.y||o===pe.Up&&M>=S.y;if(R&&!v.x){d.scrollTo({top:M,behavior:i});return}R?C.y=d.scrollTop-M:C.y=o===pe.Down?d.scrollTop-b.y:d.scrollTop-S.y,C.y&&d.scrollBy({top:-C.y,behavior:i});break}}this.handleMove(t,si(kn(h,this.referenceCoordinates),C))}}}handleMove(t,r){const{onMove:s}=this.props;t.preventDefault(),s(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Ed.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=bd,onActivation:u}=t,{active:_}=r;const{code:y}=e.nativeEvent;if(s.start.includes(y)){const i=_.activatorNode.current;return i&&e.target!==i?!1:(e.preventDefault(),u==null||u({event:e.nativeEvent}),!0)}return!1}}];function Wc(e){return!!(e&&"distance"in e)}function Uc(e){return!!(e&&"delay"in e)}class kl{constructor(t,r,s){var u;s===void 0&&(s=Vp(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:_}=t,{target:y}=_;this.props=t,this.events=r,this.document=vi(y),this.documentListeners=new ji(this.document),this.listeners=new ji(s),this.windowListeners=new ji(Je(y)),this.initialCoordinates=(u=Rn(_))!=null?u:Rt,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(_t.Resize,this.handleCancel),this.windowListeners.add(_t.DragStart,$c),this.windowListeners.add(_t.VisibilityChange,this.handleCancel),this.windowListeners.add(_t.ContextMenu,$c),this.documentListeners.add(_t.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Uc(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(Wc(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:s,onPending:u}=this.props;u(s,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(_t.Click,Kp,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_t.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:s,initialCoordinates:u,props:_}=this,{onMove:y,options:{activationConstraint:i}}=_;if(!u)return;const a=(r=Rn(t))!=null?r:Rt,f=kn(u,a);if(!s&&i){if(Wc(i)){if(i.tolerance!=null&&Mo(f,i.tolerance))return this.handleCancel();if(Mo(f,i.distance))return this.handleStart()}if(Uc(i)&&Mo(f,i.tolerance))return this.handleCancel();this.handlePending(i,f);return}t.cancelable&&t.preventDefault(),y(a)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===pe.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const qp={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Rl extends kl{constructor(t){const{event:r}=t,s=vi(r.target);super(t,qp,s)}}Rl.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!r.isPrimary||r.button!==0?!1:(s==null||s({event:r}),!0)}}];const Xp={move:{name:"mousemove"},end:{name:"mouseup"}};var La;(function(e){e[e.RightClick=2]="RightClick"})(La||(La={}));class Yp extends kl{constructor(t){super(t,Xp,vi(t.event.target))}}Yp.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button===La.RightClick?!1:(s==null||s({event:r}),!0)}}];const Ao={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Qp extends kl{constructor(t){super(t,Ao)}static setup(){return window.addEventListener(Ao.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Ao.move.name,t)};function t(){}}}Qp.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:u}=r;return u.length>1?!1:(s==null||s({event:r}),!0)}}];var Vi;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Vi||(Vi={}));var Mn;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Mn||(Mn={}));function Jp(e){let{acceleration:t,activator:r=Vi.Pointer,canScroll:s,draggingRect:u,enabled:_,interval:y=5,order:i=Mn.TreeOrder,pointerCoordinates:a,scrollableAncestors:f,scrollableAncestorRects:p,delta:h,threshold:v}=e;const C=ev({delta:h,disabled:!_}),[w,d]=up(),o=$.useRef({x:0,y:0}),c=$.useRef({x:0,y:0}),n=$.useMemo(()=>{switch(r){case Vi.Pointer:return a?{top:a.y,bottom:a.y,left:a.x,right:a.x}:null;case Vi.DraggableRect:return u}},[r,u,a]),l=$.useRef(null),g=$.useCallback(()=>{const S=l.current;if(!S)return;const E=o.current.x*c.current.x,m=o.current.y*c.current.y;S.scrollBy(E,m)},[]),b=$.useMemo(()=>i===Mn.TreeOrder?[...f].reverse():f,[i,f]);$.useEffect(()=>{if(!_||!f.length||!n){d();return}for(const S of b){if((s==null?void 0:s(S))===!1)continue;const E=f.indexOf(S),m=p[E];if(!m)continue;const{direction:x,speed:L}=zp(S,m,n,t,v);for(const M of["x","y"])C[M][x[M]]||(L[M]=0,x[M]=0);if(L.x>0||L.y>0){d(),l.current=S,w(g,y),o.current=L,c.current=x;return}}o.current={x:0,y:0},c.current={x:0,y:0},d()},[t,g,s,d,_,y,JSON.stringify(n),JSON.stringify(C),w,f,b,p,JSON.stringify(v)])}const Zp={x:{[Ie.Backward]:!1,[Ie.Forward]:!1},y:{[Ie.Backward]:!1,[Ie.Forward]:!1}};function ev(e){let{delta:t,disabled:r}=e;const s=Ln(t);return Ss(u=>{if(r||!s||!u)return Zp;const _={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[Ie.Backward]:u.x[Ie.Backward]||_.x===-1,[Ie.Forward]:u.x[Ie.Forward]||_.x===1},y:{[Ie.Backward]:u.y[Ie.Backward]||_.y===-1,[Ie.Forward]:u.y[Ie.Forward]||_.y===1}}},[r,t,s])}function tv(e,t){const r=t!=null?e.get(t):void 0,s=r?r.node.current:null;return Ss(u=>{var _;return t==null?null:(_=s??u)!=null?_:null},[s,t])}function rv(e,t){return $.useMemo(()=>e.reduce((r,s)=>{const{sensor:u}=s,_=u.activators.map(y=>({eventName:y.eventName,handler:t(y.handler,s)}));return[...r,..._]},[]),[e,t])}var ds;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ds||(ds={}));var ka;(function(e){e.Optimized="optimized"})(ka||(ka={}));const jc=new Map;function iv(e,t){let{dragging:r,dependencies:s,config:u}=t;const[_,y]=$.useState(null),{frequency:i,measure:a,strategy:f}=u,p=$.useRef(e),h=o(),v=hs(h),C=$.useCallback(function(c){c===void 0&&(c=[]),!v.current&&y(n=>n===null?c:n.concat(c.filter(l=>!n.includes(l))))},[v]),w=$.useRef(null),d=Ss(c=>{if(h&&!r)return jc;if(!c||c===jc||p.current!==e||_!=null){const n=new Map;for(let l of e){if(!l)continue;if(_&&_.length>0&&!_.includes(l.id)&&l.rect.current){n.set(l.id,l.rect.current);continue}const g=l.node.current,b=g?new Ll(a(g),g):null;l.rect.current=b,b&&n.set(l.id,b)}return n}return c},[e,_,r,h,a]);return $.useEffect(()=>{p.current=e},[e]),$.useEffect(()=>{h||C()},[r,h]),$.useEffect(()=>{_&&_.length>0&&y(null)},[JSON.stringify(_)]),$.useEffect(()=>{h||typeof i!="number"||w.current!==null||(w.current=setTimeout(()=>{C(),w.current=null},i))},[i,h,C,...s]),{droppableRects:d,measureDroppableContainers:C,measuringScheduled:_!=null};function o(){switch(f){case ds.Always:return!1;case ds.BeforeDragging:return r;default:return!r}}}function Dl(e,t){return Ss(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function sv(e,t){return Dl(e,t)}function nv(e){let{callback:t,disabled:r}=e;const s=Xn(t),u=$.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:_}=window;return new _(s)},[s,r]);return $.useEffect(()=>()=>u==null?void 0:u.disconnect(),[u]),u}function Qn(e){let{callback:t,disabled:r}=e;const s=Xn(t),u=$.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:_}=window;return new _(s)},[r]);return $.useEffect(()=>()=>u==null?void 0:u.disconnect(),[u]),u}function ov(e){return new Ll(ys(e),e)}function Vc(e,t,r){t===void 0&&(t=ov);const[s,u]=$.useState(null);function _(){u(a=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=a??r)!=null?f:null}const p=t(e);return JSON.stringify(a)===JSON.stringify(p)?a:p})}const y=nv({callback(a){if(e)for(const f of a){const{type:p,target:h}=f;if(p==="childList"&&h instanceof HTMLElement&&h.contains(e)){_();break}}}}),i=Qn({callback:_});return Gt(()=>{_(),e?(i==null||i.observe(e),y==null||y.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),y==null||y.disconnect())},[e]),s}function av(e){const t=Dl(e);return _d(e,t)}const Kc=[];function lv(e){const t=$.useRef(e),r=Ss(s=>e?s&&s!==Kc&&e&&t.current&&e.parentNode===t.current.parentNode?s:xl(e):Kc,[e]);return $.useEffect(()=>{t.current=e},[e]),r}function cv(e){const[t,r]=$.useState(null),s=$.useRef(e),u=$.useCallback(_=>{const y=Do(_.target);y&&r(i=>i?(i.set(y,xa(y)),new Map(i)):null)},[]);return $.useEffect(()=>{const _=s.current;if(e!==_){y(_);const i=e.map(a=>{const f=Do(a);return f?(f.addEventListener("scroll",u,{passive:!0}),[f,xa(f)]):null}).filter(a=>a!=null);r(i.length?new Map(i):null),s.current=e}return()=>{y(e),y(_)};function y(i){i.forEach(a=>{const f=Do(a);f==null||f.removeEventListener("scroll",u)})}},[u,e]),$.useMemo(()=>e.length?t?Array.from(t.values()).reduce((_,y)=>si(_,y),Rt):Cd(e):Rt,[e,t])}function Gc(e,t){t===void 0&&(t=[]);const r=$.useRef(null);return $.useEffect(()=>{r.current=null},t),$.useEffect(()=>{const s=e!==Rt;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?kn(e,r.current):Rt}function hv(e){$.useEffect(()=>{if(!qn)return;const t=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function uv(e,t){return $.useMemo(()=>e.reduce((r,s)=>{let{eventName:u,handler:_}=s;return r[u]=y=>{_(y,t)},r},{}),[e,t])}function xd(e){return $.useMemo(()=>e?Ip(e):null,[e])}const qc=[];function dv(e,t){t===void 0&&(t=ys);const[r]=e,s=xd(r?Je(r):null),[u,_]=$.useState(qc);function y(){_(()=>e.length?e.map(a=>Sd(a)?s:new Ll(t(a),a)):qc)}const i=Qn({callback:y});return Gt(()=>{i==null||i.disconnect(),y(),e.forEach(a=>i==null?void 0:i.observe(a))},[e]),u}function Ld(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ms(t)?t:e}function fv(e){let{measure:t}=e;const[r,s]=$.useState(null),u=$.useCallback(f=>{for(const{target:p}of f)if(ms(p)){s(h=>{const v=t(p);return h?{...h,width:v.width,height:v.height}:v});break}},[t]),_=Qn({callback:u}),y=$.useCallback(f=>{const p=Ld(f);_==null||_.disconnect(),p&&(_==null||_.observe(p)),s(p?t(p):null)},[t,_]),[i,a]=xn(y);return $.useMemo(()=>({nodeRef:i,rect:r,setRef:a}),[r,i,a])}const _v=[{sensor:Rl,options:{}},{sensor:Ed,options:{}}],pv={current:{}},Zs={draggable:{measure:zc},droppable:{measure:zc,strategy:ds.WhileDragging,frequency:ka.Optimized},dragOverlay:{measure:ys}};class Ki extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,s;return(r=(s=this.get(t))==null?void 0:s.node.current)!=null?r:void 0}}const vv={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ki,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Dn},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Zs,measureDroppableContainers:Dn,windowRect:null,measuringScheduled:!1},kd={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Dn,draggableNodes:new Map,over:null,measureDroppableContainers:Dn},Cs=$.createContext(kd),Rd=$.createContext(vv);function gv(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ki}}}function mv(e,t){switch(t.type){case Te.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Te.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Te.DragEnd:case Te.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Te.RegisterDroppable:{const{element:r}=t,{id:s}=r,u=new Ki(e.droppable.containers);return u.set(s,r),{...e,droppable:{...e.droppable,containers:u}}}case Te.SetDroppableDisabled:{const{id:r,key:s,disabled:u}=t,_=e.droppable.containers.get(r);if(!_||s!==_.key)return e;const y=new Ki(e.droppable.containers);return y.set(r,{..._,disabled:u}),{...e,droppable:{...e.droppable,containers:y}}}case Te.UnregisterDroppable:{const{id:r,key:s}=t,u=e.droppable.containers.get(r);if(!u||s!==u.key)return e;const _=new Ki(e.droppable.containers);return _.delete(r),{...e,droppable:{...e.droppable,containers:_}}}default:return e}}function Sv(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:u}=$.useContext(Cs),_=Ln(s),y=Ln(r==null?void 0:r.id);return $.useEffect(()=>{if(!t&&!s&&_&&y!=null){if(!El(_)||document.activeElement===_.target)return;const i=u.get(y);if(!i)return;const{activatorNode:a,node:f}=i;if(!a.current&&!f.current)return;requestAnimationFrame(()=>{for(const p of[a.current,f.current]){if(!p)continue;const h=_p(p);if(h){h.focus();break}}})}},[s,t,u,y,_]),null}function Dd(e,t){let{transform:r,...s}=t;return e!=null&&e.length?e.reduce((u,_)=>_({transform:u,...s}),r):r}function yv(e){return $.useMemo(()=>({draggable:{...Zs.draggable,...e==null?void 0:e.draggable},droppable:{...Zs.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Zs.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Cv(e){let{activeNode:t,measure:r,initialRect:s,config:u=!0}=e;const _=$.useRef(!1),{x:y,y:i}=typeof u=="boolean"?{x:u,y:u}:u;Gt(()=>{if(!y&&!i||!t){_.current=!1;return}if(_.current||!s)return;const f=t==null?void 0:t.node.current;if(!f||f.isConnected===!1)return;const p=r(f),h=_d(p,s);if(y||(h.x=0),i||(h.y=0),_.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const v=vd(f);v&&v.scrollBy({top:h.y,left:h.x})}},[t,y,i,s,r])}const Jn=$.createContext({...Rt,scaleX:1,scaleY:1});var rr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(rr||(rr={}));const wv=$.memo(function(t){var r,s,u,_;let{id:y,accessibility:i,autoScroll:a=!0,children:f,sensors:p=_v,collisionDetection:h=Mp,measuring:v,modifiers:C,...w}=t;const d=$.useReducer(mv,void 0,gv),[o,c]=d,[n,l]=yp(),[g,b]=$.useState(rr.Uninitialized),S=g===rr.Initialized,{draggable:{active:E,nodes:m,translate:x},droppable:{containers:L}}=o,M=E!=null?m.get(E):null,R=$.useRef({initial:null,translated:null}),D=$.useMemo(()=>{var Me;return E!=null?{id:E,data:(Me=M==null?void 0:M.data)!=null?Me:pv,rect:R}:null},[E,M]),P=$.useRef(null),[z,H]=$.useState(null),[N,O]=$.useState(null),k=hs(w,Object.values(w)),A=Yn("DndDescribedBy",y),B=$.useMemo(()=>L.getEnabled(),[L]),I=yv(v),{droppableRects:U,measureDroppableContainers:V,measuringScheduled:Q}=iv(B,{dragging:S,dependencies:[x.x,x.y],config:I.droppable}),X=tv(m,E),F=$.useMemo(()=>N?Rn(N):null,[N]),T=bs(),j=sv(X,I.draggable.measure);Cv({activeNode:E!=null?m.get(E):null,config:T.layoutShiftCompensation,initialRect:j,measure:I.draggable.measure});const W=Vc(X,I.draggable.measure,j),Y=Vc(X?X.parentElement:null),q=$.useRef({activatorEvent:null,active:null,activeNode:X,collisionRect:null,collisions:null,droppableRects:U,draggableNodes:m,draggingNode:null,draggingNodeRect:null,droppableContainers:L,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),re=L.getNodeFor((r=q.current.over)==null?void 0:r.id),ee=fv({measure:I.dragOverlay.measure}),ce=(s=ee.nodeRef.current)!=null?s:X,fe=S?(u=ee.rect)!=null?u:W:null,te=!!(ee.nodeRef.current&&ee.rect),st=av(te?null:W),Dt=xd(ce?Je(ce):null),ie=lv(S?re??X:null),se=dv(ie),ne=Dd(C,{transform:{x:x.x-st.x,y:x.y-st.y,scaleX:1,scaleY:1},activatorEvent:N,active:D,activeNodeRect:W,containerNodeRect:Y,draggingNodeRect:fe,over:q.current.over,overlayNodeRect:ee.rect,scrollableAncestors:ie,scrollableAncestorRects:se,windowRect:Dt}),J=F?si(F,x):null,le=cv(ie),Se=Gc(le),_e=Gc(le,[W]),We=si(ne,Se),ke=fe?Pp(fe,ne):null,Be=D&&ke?h({active:D,collisionRect:ke,droppableRects:U,droppableContainers:B,pointerCoordinates:J}):null,Ce=Rp(Be,"id"),[he,oe]=$.useState(null),yr=te?ne:si(ne,_e),Or=Ap(yr,(_=he==null?void 0:he.rect)!=null?_:null,W),Xt=$.useRef(null),mi=$.useCallback((Me,Ge)=>{let{sensor:nt,options:Yt}=Ge;if(P.current==null)return;const ft=m.get(P.current);if(!ft)return;const ot=Me.nativeEvent,Mt=new nt({active:P.current,activeNode:ft,event:ot,options:Yt,context:q,onAbort(Ne){if(!m.get(Ne))return;const{onDragAbort:At}=k.current,Ft={id:Ne};At==null||At(Ft),n({type:"onDragAbort",event:Ft})},onPending(Ne,Qt,At,Ft){if(!m.get(Ne))return;const{onDragPending:Ci}=k.current,Jt={id:Ne,constraint:Qt,initialCoordinates:At,offset:Ft};Ci==null||Ci(Jt),n({type:"onDragPending",event:Jt})},onStart(Ne){const Qt=P.current;if(Qt==null)return;const At=m.get(Qt);if(!At)return;const{onDragStart:Ft}=k.current,yi={activatorEvent:ot,active:{id:Qt,data:At.data,rect:R}};Qr.unstable_batchedUpdates(()=>{Ft==null||Ft(yi),b(rr.Initializing),c({type:Te.DragStart,initialCoordinates:Ne,active:Qt}),n({type:"onDragStart",event:yi}),H(Xt.current),O(ot)})},onMove(Ne){c({type:Te.DragMove,coordinates:Ne})},onEnd:Fr(Te.DragEnd),onCancel:Fr(Te.DragCancel)});Xt.current=Mt;function Fr(Ne){return async function(){const{active:At,collisions:Ft,over:yi,scrollAdjustedTranslate:Ci}=q.current;let Jt=null;if(At&&Ci){const{cancelDrop:wi}=k.current;Jt={activatorEvent:ot,active:At,collisions:Ft,delta:Ci,over:yi},Ne===Te.DragEnd&&typeof wi=="function"&&await Promise.resolve(wi(Jt))&&(Ne=Te.DragCancel)}P.current=null,Qr.unstable_batchedUpdates(()=>{c({type:Ne}),b(rr.Uninitialized),oe(null),H(null),O(null),Xt.current=null;const wi=Ne===Te.DragEnd?"onDragEnd":"onDragCancel";if(Jt){const eo=k.current[wi];eo==null||eo(Jt),n({type:wi,event:Jt})}})}}},[m]),Ir=$.useCallback((Me,Ge)=>(nt,Yt)=>{const ft=nt.nativeEvent,ot=m.get(Yt);if(P.current!==null||!ot||ft.dndKit||ft.defaultPrevented)return;const Mt={active:ot};Me(nt,Ge.options,Mt)===!0&&(ft.dndKit={capturedBy:Ge.sensor},P.current=Yt,mi(nt,Ge))},[m,mi]),ws=rv(p,Ir);hv(p),Gt(()=>{W&&g===rr.Initializing&&b(rr.Initialized)},[W,g]),$.useEffect(()=>{const{onDragMove:Me}=k.current,{active:Ge,activatorEvent:nt,collisions:Yt,over:ft}=q.current;if(!Ge||!nt)return;const ot={active:Ge,activatorEvent:nt,collisions:Yt,delta:{x:We.x,y:We.y},over:ft};Qr.unstable_batchedUpdates(()=>{Me==null||Me(ot),n({type:"onDragMove",event:ot})})},[We.x,We.y]),$.useEffect(()=>{const{active:Me,activatorEvent:Ge,collisions:nt,droppableContainers:Yt,scrollAdjustedTranslate:ft}=q.current;if(!Me||P.current==null||!Ge||!ft)return;const{onDragOver:ot}=k.current,Mt=Yt.get(Ce),Fr=Mt&&Mt.rect.current?{id:Mt.id,rect:Mt.rect.current,data:Mt.data,disabled:Mt.disabled}:null,Ne={active:Me,activatorEvent:Ge,collisions:nt,delta:{x:ft.x,y:ft.y},over:Fr};Qr.unstable_batchedUpdates(()=>{oe(Fr),ot==null||ot(Ne),n({type:"onDragOver",event:Ne})})},[Ce]),Gt(()=>{q.current={activatorEvent:N,active:D,activeNode:X,collisionRect:ke,collisions:Be,droppableRects:U,draggableNodes:m,draggingNode:ce,draggingNodeRect:fe,droppableContainers:L,over:he,scrollableAncestors:ie,scrollAdjustedTranslate:We},R.current={initial:fe,translated:ke}},[D,X,Be,ke,m,ce,fe,U,L,he,ie,We]),Jp({...T,delta:x,draggingRect:ke,pointerCoordinates:J,scrollableAncestors:ie,scrollableAncestorRects:se});const Zn=$.useMemo(()=>({active:D,activeNode:X,activeNodeRect:W,activatorEvent:N,collisions:Be,containerNodeRect:Y,dragOverlay:ee,draggableNodes:m,droppableContainers:L,droppableRects:U,over:he,measureDroppableContainers:V,scrollableAncestors:ie,scrollableAncestorRects:se,measuringConfiguration:I,measuringScheduled:Q,windowRect:Dt}),[D,X,W,N,Be,Y,ee,m,L,U,he,V,ie,se,I,Q,Dt]),Si=$.useMemo(()=>({activatorEvent:N,activators:ws,active:D,activeNodeRect:W,ariaDescribedById:{draggable:A},dispatch:c,draggableNodes:m,over:he,measureDroppableContainers:V}),[N,ws,D,W,c,A,m,he,V]);return Le.createElement(fd.Provider,{value:l},Le.createElement(Cs.Provider,{value:Si},Le.createElement(Rd.Provider,{value:Zn},Le.createElement(Jn.Provider,{value:Or},f)),Le.createElement(Sv,{disabled:(i==null?void 0:i.restoreFocus)===!1})),Le.createElement(bp,{...i,hiddenTextDescribedById:A}));function bs(){const Me=(z==null?void 0:z.autoScrollEnabled)===!1,Ge=typeof a=="object"?a.enabled===!1:a===!1,nt=S&&!Me&&!Ge;return typeof a=="object"?{...a,enabled:nt}:{enabled:nt}}}),bv=$.createContext(null),Xc="button",Ev="Draggable";function Md(e){let{id:t,data:r,disabled:s=!1,attributes:u}=e;const _=Yn(Ev),{activators:y,activatorEvent:i,active:a,activeNodeRect:f,ariaDescribedById:p,draggableNodes:h,over:v}=$.useContext(Cs),{role:C=Xc,roleDescription:w="draggable",tabIndex:d=0}=u??{},o=(a==null?void 0:a.id)===t,c=$.useContext(o?Jn:bv),[n,l]=xn(),[g,b]=xn(),S=uv(y,t),E=hs(r);Gt(()=>(h.set(t,{id:t,key:_,node:n,activatorNode:g,data:E}),()=>{const x=h.get(t);x&&x.key===_&&h.delete(t)}),[h,t]);const m=$.useMemo(()=>({role:C,tabIndex:d,"aria-disabled":s,"aria-pressed":o&&C===Xc?!0:void 0,"aria-roledescription":w,"aria-describedby":p.draggable}),[s,C,d,o,w,p.draggable]);return{active:a,activatorEvent:i,activeNodeRect:f,attributes:m,isDragging:o,listeners:s?void 0:S,node:n,over:v,setNodeRef:l,setActivatorNodeRef:b,transform:c}}function xv(){return $.useContext(Rd)}const Lv="Droppable",kv={timeout:25};function Rv(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:u}=e;const _=Yn(Lv),{active:y,dispatch:i,over:a,measureDroppableContainers:f}=$.useContext(Cs),p=$.useRef({disabled:r}),h=$.useRef(!1),v=$.useRef(null),C=$.useRef(null),{disabled:w,updateMeasurementsFor:d,timeout:o}={...kv,...u},c=hs(d??s),n=$.useCallback(()=>{if(!h.current){h.current=!0;return}C.current!=null&&clearTimeout(C.current),C.current=setTimeout(()=>{f(Array.isArray(c.current)?c.current:[c.current]),C.current=null},o)},[o]),l=Qn({callback:n,disabled:w||!y}),g=$.useCallback((m,x)=>{l&&(x&&(l.unobserve(x),h.current=!1),m&&l.observe(m))},[l]),[b,S]=xn(g),E=hs(t);return $.useEffect(()=>{!l||!b.current||(l.disconnect(),h.current=!1,l.observe(b.current))},[b,l]),$.useEffect(()=>(i({type:Te.RegisterDroppable,element:{id:s,key:_,disabled:r,node:b,rect:v,data:E}}),()=>i({type:Te.UnregisterDroppable,key:_,id:s})),[s]),$.useEffect(()=>{r!==p.current.disabled&&(i({type:Te.SetDroppableDisabled,id:s,key:_,disabled:r}),p.current.disabled=r)},[s,_,r,i]),{active:y,rect:v,isOver:(a==null?void 0:a.id)===s,node:b,over:a,setNodeRef:S}}function Dv(e){let{animation:t,children:r}=e;const[s,u]=$.useState(null),[_,y]=$.useState(null),i=Ln(r);return!r&&!s&&i&&u(i),Gt(()=>{if(!_)return;const a=s==null?void 0:s.key,f=s==null?void 0:s.props.id;if(a==null||f==null){u(null);return}Promise.resolve(t(f,_)).then(()=>{u(null)})},[t,s,_]),Le.createElement(Le.Fragment,null,r,s?$.cloneElement(s,{ref:y}):null)}const Mv={x:0,y:0,scaleX:1,scaleY:1};function Av(e){let{children:t}=e;return Le.createElement(Cs.Provider,{value:kd},Le.createElement(Jn.Provider,{value:Mv},t))}const Tv={position:"fixed",touchAction:"none"},Pv=e=>El(e)?"transform 250ms ease":void 0,Bv=$.forwardRef((e,t)=>{let{as:r,activatorEvent:s,adjustScale:u,children:_,className:y,rect:i,style:a,transform:f,transition:p=Pv}=e;if(!i)return null;const h=u?f:{...f,scaleX:1,scaleY:1},v={...Tv,width:i.width,height:i.height,top:i.top,left:i.left,transform:us.Transform.toString(h),transformOrigin:u&&s?Lp(s,i):void 0,transition:typeof p=="function"?p(s):p,...a};return Le.createElement(r,{className:y,style:v,ref:t},_)}),Ov=e=>t=>{let{active:r,dragOverlay:s}=t;const u={},{styles:_,className:y}=e;if(_!=null&&_.active)for(const[i,a]of Object.entries(_.active))a!==void 0&&(u[i]=r.node.style.getPropertyValue(i),r.node.style.setProperty(i,a));if(_!=null&&_.dragOverlay)for(const[i,a]of Object.entries(_.dragOverlay))a!==void 0&&s.node.style.setProperty(i,a);return y!=null&&y.active&&r.node.classList.add(y.active),y!=null&&y.dragOverlay&&s.node.classList.add(y.dragOverlay),function(){for(const[a,f]of Object.entries(u))r.node.style.setProperty(a,f);y!=null&&y.active&&r.node.classList.remove(y.active)}},Iv=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:us.Transform.toString(t)},{transform:us.Transform.toString(r)}]},Fv={duration:250,easing:"ease",keyframes:Iv,sideEffects:Ov({styles:{active:{opacity:"0"}}})};function Nv(e){let{config:t,draggableNodes:r,droppableContainers:s,measuringConfiguration:u}=e;return Xn((_,y)=>{if(t===null)return;const i=r.get(_);if(!i)return;const a=i.node.current;if(!a)return;const f=Ld(y);if(!f)return;const{transform:p}=Je(y).getComputedStyle(y),h=pd(p);if(!h)return;const v=typeof t=="function"?t:Hv(t);return wd(a,u.draggable.measure),v({active:{id:_,data:i.data,node:a,rect:u.draggable.measure(a)},draggableNodes:r,dragOverlay:{node:y,rect:u.dragOverlay.measure(f)},droppableContainers:s,measuringConfiguration:u,transform:h})})}function Hv(e){const{duration:t,easing:r,sideEffects:s,keyframes:u}={...Fv,...e};return _=>{let{active:y,dragOverlay:i,transform:a,...f}=_;if(!t)return;const p={x:i.rect.left-y.rect.left,y:i.rect.top-y.rect.top},h={scaleX:a.scaleX!==1?y.rect.width*a.scaleX/i.rect.width:1,scaleY:a.scaleY!==1?y.rect.height*a.scaleY/i.rect.height:1},v={x:a.x-p.x,y:a.y-p.y,...h},C=u({...f,active:y,dragOverlay:i,transform:{initial:a,final:v}}),[w]=C,d=C[C.length-1];if(JSON.stringify(w)===JSON.stringify(d))return;const o=s==null?void 0:s({active:y,dragOverlay:i,...f}),c=i.node.animate(C,{duration:t,easing:r,fill:"forwards"});return new Promise(n=>{c.onfinish=()=>{o==null||o(),n()}})}}let Yc=0;function zv(e){return $.useMemo(()=>{if(e!=null)return Yc++,Yc},[e])}const $v=Le.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:s,style:u,transition:_,modifiers:y,wrapperElement:i="div",className:a,zIndex:f=999}=e;const{activatorEvent:p,active:h,activeNodeRect:v,containerNodeRect:C,draggableNodes:w,droppableContainers:d,dragOverlay:o,over:c,measuringConfiguration:n,scrollableAncestors:l,scrollableAncestorRects:g,windowRect:b}=xv(),S=$.useContext(Jn),E=zv(h==null?void 0:h.id),m=Dd(y,{activatorEvent:p,active:h,activeNodeRect:v,containerNodeRect:C,draggingNodeRect:o.rect,over:c,overlayNodeRect:o.rect,scrollableAncestors:l,scrollableAncestorRects:g,transform:S,windowRect:b}),x=Dl(v),L=Nv({config:s,draggableNodes:w,droppableContainers:d,measuringConfiguration:n}),M=x?o.setRef:void 0;return Le.createElement(Av,null,Le.createElement(Dv,{animation:L},h&&E?Le.createElement(Bv,{key:E,id:h.id,ref:M,as:i,activatorEvent:p,adjustScale:t,className:a,transition:_,rect:x,style:{zIndex:f,...u},transform:m},r):null))}),Ad="arena-dashboard-state",Wv=5e3;function Uv(){try{const e=localStorage.getItem(Ad);if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load stored state:",e)}return null}function jv(e){try{localStorage.setItem(Ad,JSON.stringify(e))}catch(t){console.warn("Failed to save state:",t)}}function Vv(e){return Array.from({length:e},(t,r)=>({id:`window-${r}`,boundSessions:[],activeSession:null,colorIndex:r}))}const Td=$.createContext(null);function Kv({children:e}){const t=$.useMemo(()=>Uv(),[]),[r,s]=$.useState([]),[u,_]=$.useState({}),[y,i]=$.useState(!0),[a,f]=$.useState(null),[p,h]=$.useState((t==null?void 0:t.windowCount)??2),[v,C]=$.useState((t==null?void 0:t.windows)??Vv(2)),[w,d]=$.useState((t==null?void 0:t.sidebarCollapsed)??!1),[o,c]=$.useState(null),[n,l]=$.useState(!1),g=$.useMemo(()=>{const H=new Set;return v.forEach(N=>N.boundSessions.forEach(O=>H.add(O))),H},[v]);$.useEffect(()=>{jv({windows:v,windowCount:p,sidebarCollapsed:w})},[v,p,w]);const b=$.useCallback(async()=>{try{const N=await(await fetch("/api/tmux/sessions")).json();N.error?(f(N.error),s([]),_({})):(f(null),s(N.sessions),_(N.grouped))}catch(H){f("Failed to fetch sessions"),console.error("Failed to fetch sessions:",H)}finally{i(!1)}},[]);$.useEffect(()=>{b();const H=setInterval(b,Wv);return()=>clearInterval(H)},[b]);const S=$.useCallback(H=>{const N=Math.max(1,Math.min(4,H));h(N),C(O=>{if(N>O.length){const k=[...O];for(let A=O.length;A<N;A++)k.push({id:`window-${A}`,boundSessions:[],activeSession:null,colorIndex:A});return k}else if(N<O.length)return O.slice(0,N);return O})},[]),E=$.useCallback((H,N)=>{C(O=>O.map(k=>{if(k.id!==H||k.boundSessions.includes(N))return k;const A=[...k.boundSessions,N];return{...k,boundSessions:A,activeSession:k.activeSession??N}})),C(O=>O.map(k=>{if(k.id===H||!k.boundSessions.includes(N))return k;const A=k.boundSessions.filter(B=>B!==N);return{...k,boundSessions:A,activeSession:k.activeSession===N?A[0]??null:k.activeSession}}))},[]),m=$.useCallback((H,N)=>{C(O=>O.map(k=>{if(k.id!==H||!k.boundSessions.includes(N))return k;const A=k.boundSessions.filter(B=>B!==N);return{...k,boundSessions:A,activeSession:k.activeSession===N?A[0]??null:k.activeSession}}))},[]),x=$.useCallback((H,N)=>{C(O=>O.map(k=>k.id!==H||!k.boundSessions.includes(N)?k:{...k,activeSession:N}))},[]),L=$.useCallback((H,N)=>{C(O=>O.map(k=>{if(k.id!==H||k.boundSessions.length<=1)return k;const A=k.activeSession?k.boundSessions.indexOf(k.activeSession):0;let B;return N==="next"?B=(A+1)%k.boundSessions.length:B=(A-1+k.boundSessions.length)%k.boundSessions.length,{...k,activeSession:k.boundSessions[B]}}))},[]),M=$.useCallback(()=>{d(H=>!H)},[]),R=$.useCallback(H=>{c(H)},[]),D=$.useCallback(()=>{c(null)},[]),P=$.useCallback(H=>{const N=v.find(O=>O.boundSessions.includes(H));N?x(N.id,H):R(H)},[v,x,R]),z={sessions:r,groupedSessions:u,loading:y,error:a,windows:v,windowCount:p,sidebarCollapsed:w,floatingSession:o,assignedSessions:g,isDragging:n,setWindowCount:S,addSessionToWindow:E,removeSessionFromWindow:m,setActiveSession:x,cycleSession:L,toggleSidebar:M,openFloatingModal:R,closeFloatingModal:D,handleSessionClick:P,refreshSessions:b,setIsDragging:l};return K.jsx(Td.Provider,{value:z,children:e})}function gi(){const e=$.useContext(Td);if(!e)throw new Error("useSession must be used within a SessionProvider");return e}function Gv({activeTab:e,onTabChange:t}){const r=[{id:"terminal",label:"Terminal"},{id:"files",label:"Files"},{id:"status",label:"Status"},{id:"beads",label:"Beads ",external:!0,url:"https://github.com/Dicklesworthstone/beads_viewer"}],s=u=>{u.external?window.open(u.url,"_blank","noopener,noreferrer"):t(u.id)};return K.jsx("div",{className:"tab-bar",children:r.map(u=>K.jsx("button",{className:`tab ${!u.external&&e===u.id?"active":""} ${u.external?"external":""}`,onClick:()=>s(u),title:u.external?`Open ${u.label.replace(" ","")} in new tab`:void 0,children:u.label},u.id))})}const Qc=[{name:"blue",bg:"#0a0a1a",border:"#4a9eff",accent:"#4a9eff"},{name:"purple",bg:"#0f0a1a",border:"#9966ff",accent:"#9966ff"},{name:"green",bg:"#0a1a0a",border:"#00ff41",accent:"#00ff41"},{name:"orange",bg:"#1a140a",border:"#ff9933",accent:"#ff9933"}],An={hq:{displayName:"HQ",priority:0},main:{displayName:"Main",priority:1},other:{displayName:"Other",priority:100}};function qv(e){if(An[e])return An[e].displayName;if(e.startsWith("gt-")){const t=e.slice(3);return t.charAt(0).toUpperCase()+t.slice(1)}return e}function Jc(e){return An[e]?An[e].priority:e.startsWith("gt-")?2:99}function Xv({session:e}){const{assignedSessions:t,handleSessionClick:r}=gi(),s=t.has(e.name),{attributes:u,listeners:_,setNodeRef:y,transform:i,isDragging:a}=Md({id:e.name,data:{type:"session",session:e}}),f=i?{transform:`translate3d(${i.x}px, ${i.y}px, 0)`,zIndex:a?1e3:void 0}:void 0;return K.jsxs("div",{ref:y,className:`session-item ${s?"assigned":""} ${a?"dragging":""}`,style:f,..._,...u,onClick:()=>r(e.name),children:[K.jsx("span",{className:"session-agent-name",children:e.agentName}),e.attached&&K.jsx("span",{className:"attached-indicator",title:"Attached",children:""})]})}function Yv({groupKey:e,sessions:t}){const[r,s]=$.useState(!0),u=qv(e);return K.jsxs("div",{className:"session-group",children:[K.jsxs("div",{className:"session-group-header",onClick:()=>s(!r),children:[K.jsx("span",{className:"expand-icon",children:r?"":""}),K.jsx("span",{className:"group-name",children:u}),K.jsx("span",{className:"session-count",children:t.length})]}),r&&K.jsx("div",{className:"session-group-items",children:t.map(_=>K.jsx(Xv,{session:_},_.name))})]})}function Qv(){const{groupedSessions:e,loading:t,error:r,sidebarCollapsed:s,toggleSidebar:u,refreshSessions:_}=gi(),[y,i]=$.useState(!1),a=$.useMemo(()=>Object.entries(e).sort(([p],[h])=>{const v=Jc(p),C=Jc(h);return v!==C?v-C:p.localeCompare(h)}),[e]),f=async()=>{i(!0);try{(await fetch("/api/tmux/sessions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})})).ok&&_()}catch(p){console.error("Failed to create session:",p)}finally{i(!1)}};return K.jsxs("div",{className:`session-panel ${s?"collapsed":""}`,children:[K.jsxs("div",{className:"session-panel-header",children:[K.jsx("button",{className:"toggle-btn",onClick:u,title:s?"Expand":"Collapse",children:s?"":""}),!s&&K.jsxs(K.Fragment,{children:[K.jsx("span",{className:"panel-title",children:"Sessions"}),K.jsx("button",{className:"add-btn",onClick:f,disabled:y,title:"New tmux session",children:"+"}),K.jsx("button",{className:"refresh-btn",onClick:_,title:"Refresh sessions",children:""})]})]}),!s&&K.jsxs("div",{className:"session-panel-content",children:[t&&K.jsx("div",{className:"panel-status",children:"Loading..."}),r&&K.jsx("div",{className:"panel-error",children:r}),!t&&!r&&a.length===0&&K.jsx("div",{className:"panel-status",children:"No tmux sessions"}),a.map(([p,h])=>K.jsx(Yv,{groupKey:p,sessions:h},p))]})]})}function Jv({windowId:e,isVisible:t}){const{setNodeRef:r,isOver:s}=Rv({id:`drop-${e}`,data:{type:"window",windowId:e}});return t?K.jsx("div",{ref:r,className:`terminal-drop-overlay ${s?"is-over":""}`,children:K.jsx("span",{className:"drop-hint",children:s?"Release to add":"Drop here"})}):null}function Zv({sessionName:e,isActive:t,windowId:r,onRemove:s,onClick:u}){const{attributes:_,listeners:y,setNodeRef:i,transform:a,isDragging:f}=Md({id:`tag-${r}-${e}`,data:{type:"tag",sessionName:e,sourceWindowId:r}}),p=a?{transform:`translate3d(${a.x}px, ${a.y}px, 0)`,zIndex:f?1e3:void 0}:void 0,h=e.includes("-")?e.split("-").slice(-1)[0]:e;return K.jsxs("div",{ref:i,className:`session-tag ${t?"active":""} ${f?"dragging":""}`,style:p,...y,..._,children:[K.jsx("span",{className:"tag-name",onClick:u,children:h}),K.jsx("button",{className:"tag-remove",onClick:v=>{v.stopPropagation(),s()},children:""})]})}function eg({window:e,isDragging:t=!1}){const[r,s]=$.useState(!1),{removeSessionFromWindow:u,setActiveSession:_,cycleSession:y}=gi(),i=Qc[e.colorIndex%Qc.length],a=C=>{u(e.id,C)},f=C=>{_(e.id,C)},p=e.boundSessions.length>0,h=e.activeSession,v=h?`/terminal/?arg=${encodeURIComponent(h)}`:"/terminal/";return K.jsxs("div",{className:"terminal-window",style:{"--window-accent":i.accent,"--window-bg":i.bg,"--window-border":i.border},children:[K.jsxs("div",{className:"terminal-window-header",children:[K.jsxs("div",{className:"session-tags",children:[e.boundSessions.map(C=>K.jsx(Zv,{sessionName:C,isActive:C===h,windowId:e.id,onRemove:()=>a(C),onClick:()=>f(C)},C)),!p&&K.jsx("span",{className:"no-sessions",children:"Shell ready"})]}),K.jsxs("div",{className:"window-controls",children:[p&&e.boundSessions.length>1&&K.jsxs(K.Fragment,{children:[K.jsx("button",{className:"cycle-btn",onClick:()=>y(e.id,"prev"),title:"Previous session",children:""}),K.jsx("button",{className:"cycle-btn",onClick:()=>y(e.id,"next"),title:"Next session",children:""})]}),K.jsx("span",{className:`status-dot ${r?"":"disconnected"}`})]})]}),K.jsxs("div",{className:"terminal-window-body",children:[K.jsx("iframe",{src:v,onLoad:()=>s(!0),style:{width:"100%",height:"100%",border:"none",backgroundColor:i.bg},title:`Terminal ${e.id}${h?` - ${h}`:""}`},h||"shell"),K.jsx(Jv,{windowId:e.id,isVisible:t})]})]})}function tg(){const{windows:e,windowCount:t,setWindowCount:r,isDragging:s}=gi(),u=()=>{switch(t){case 1:return"grid-1";case 2:return"grid-2";case 3:return"grid-3";case 4:return"grid-4";default:return"grid-2"}};return K.jsxs("div",{className:"terminal-area",children:[K.jsxs("div",{className:"terminal-area-controls",children:[K.jsx("span",{className:"layout-label",children:"Layout:"}),[1,2,3,4].map(_=>K.jsx("button",{className:`layout-btn ${t===_?"active":""}`,onClick:()=>r(_),title:`${_} window${_>1?"s":""}`,children:_},_))]}),K.jsx("div",{className:`terminal-grid ${u()}`,children:e.slice(0,t).map(_=>K.jsx(eg,{window:_,isDragging:s},_.id))})]})}function rg(){return K.jsx("div",{className:"files-view",children:K.jsx("iframe",{src:"/files/",title:"File Browser"})})}function ig(){const[e,t]=$.useState([]),[r,s]=$.useState(null);return $.useEffect(()=>{t([{name:"main",status:"active",attached:!1}]),s(new Date)},[]),K.jsxs("div",{className:"status-view",children:[K.jsxs("div",{className:"status-card",children:[K.jsx("h3",{children:"Gastown Status"}),K.jsxs("div",{className:"status-item",children:[K.jsx("span",{className:"label",children:"Dashboard"}),K.jsx("span",{className:"value",style:{color:"#00ff41"},children:"Online"})]}),K.jsxs("div",{className:"status-item",children:[K.jsx("span",{className:"label",children:"ttyd"}),K.jsx("span",{className:"value",style:{color:"#00ff41"},children:"Running"})]}),K.jsxs("div",{className:"status-item",children:[K.jsx("span",{className:"label",children:"Last Updated"}),K.jsx("span",{className:"value",children:r?r.toLocaleTimeString():"Never"})]})]}),K.jsxs("div",{className:"status-card",children:[K.jsx("h3",{children:"tmux Sessions"}),e.length===0?K.jsx("div",{className:"status-item",children:K.jsx("span",{className:"label",children:"No sessions found"})}):e.map(u=>K.jsxs("div",{className:"status-item",children:[K.jsx("span",{className:"label",children:u.name}),K.jsxs("span",{className:"value",style:{color:u.status==="active"?"#00ff41":"#00cc33"},children:[u.status,u.attached&&" (attached)"]})]},u.name))]}),K.jsxs("div",{className:"status-card",children:[K.jsx("h3",{children:"Quick Commands"}),K.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"13px",lineHeight:"1.6"},children:"From any terminal pane, run:"}),K.jsxs("ul",{style:{color:"var(--text-dim)",fontSize:"12px",lineHeight:"2",listStyle:"none",marginTop:"8px"},children:[K.jsxs("li",{children:[K.jsx("code",{style:{color:"var(--text-primary)"},children:"tmux ls"})," - List all sessions"]}),K.jsxs("li",{children:[K.jsx("code",{style:{color:"var(--text-primary)"},children:"tmux attach -t <name>"})," - Attach to session"]}),K.jsxs("li",{children:[K.jsx("code",{style:{color:"var(--text-primary)"},children:"gt peek"})," - Monitor Gastown activity"]}),K.jsxs("li",{children:[K.jsx("code",{style:{color:"var(--text-primary)"},children:"gt status"})," - View agent status"]})]})]})]})}var Pd={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(globalThis,()=>(()=>{var r={4567:function(y,i,a){var f=this&&this.__decorate||function(n,l,g,b){var S,E=arguments.length,m=E<3?l:b===null?b=Object.getOwnPropertyDescriptor(l,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(n,l,g,b);else for(var x=n.length-1;x>=0;x--)(S=n[x])&&(m=(E<3?S(m):E>3?S(l,g,m):S(l,g))||m);return E>3&&m&&Object.defineProperty(l,g,m),m},p=this&&this.__param||function(n,l){return function(g,b){l(g,b,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const h=a(9042),v=a(9924),C=a(844),w=a(4725),d=a(2585),o=a(3656);let c=i.AccessibilityManager=class extends C.Disposable{constructor(n,l,g,b){super(),this._terminal=n,this._coreBrowserService=g,this._renderService=b,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new v.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(S=>this._handleResize(S.rows))),this.register(this._terminal.onRender(S=>this._refreshRows(S.start,S.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(S=>this._handleChar(S))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(S=>this._handleTab(S))),this.register(this._terminal.onKey(S=>this._handleKey(S.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,o.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,C.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(n){for(let l=0;l<n;l++)this._handleChar(" ")}_handleChar(n){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==n&&(this._charsToAnnounce+=n):this._charsToAnnounce+=n,n===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(n){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(n)||this._charsToConsume.push(n)}_refreshRows(n,l){this._liveRegionDebouncer.refresh(n,l,this._terminal.rows)}_renderRows(n,l){const g=this._terminal.buffer,b=g.lines.length.toString();for(let S=n;S<=l;S++){const E=g.lines.get(g.ydisp+S),m=[],x=(E==null?void 0:E.translateToString(!0,void 0,void 0,m))||"",L=(g.ydisp+S+1).toString(),M=this._rowElements[S];M&&(x.length===0?(M.innerText="",this._rowColumns.set(M,[0,1])):(M.textContent=x,this._rowColumns.set(M,m)),M.setAttribute("aria-posinset",L),M.setAttribute("aria-setsize",b))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(n,l){const g=n.target,b=this._rowElements[l===0?1:this._rowElements.length-2];if(g.getAttribute("aria-posinset")===(l===0?"1":`${this._terminal.buffer.lines.length}`)||n.relatedTarget!==b)return;let S,E;if(l===0?(S=g,E=this._rowElements.pop(),this._rowContainer.removeChild(E)):(S=this._rowElements.shift(),E=g,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),E.removeEventListener("focus",this._bottomBoundaryFocusListener),l===0){const m=this._createAccessibilityTreeNode();this._rowElements.unshift(m),this._rowContainer.insertAdjacentElement("afterbegin",m)}else{const m=this._createAccessibilityTreeNode();this._rowElements.push(m),this._rowContainer.appendChild(m)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(l===0?-1:1),this._rowElements[l===0?1:this._rowElements.length-2].focus(),n.preventDefault(),n.stopImmediatePropagation()}_handleSelectionChange(){var x;if(this._rowElements.length===0)return;const n=document.getSelection();if(!n)return;if(n.isCollapsed)return void(this._rowContainer.contains(n.anchorNode)&&this._terminal.clearSelection());if(!n.anchorNode||!n.focusNode)return void console.error("anchorNode and/or focusNode are null");let l={node:n.anchorNode,offset:n.anchorOffset},g={node:n.focusNode,offset:n.focusOffset};if((l.node.compareDocumentPosition(g.node)&Node.DOCUMENT_POSITION_PRECEDING||l.node===g.node&&l.offset>g.offset)&&([l,g]=[g,l]),l.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(l={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(l.node))return;const b=this._rowElements.slice(-1)[0];if(g.node.compareDocumentPosition(b)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(g={node:b,offset:((x=b.textContent)==null?void 0:x.length)??0}),!this._rowContainer.contains(g.node))return;const S=({node:L,offset:M})=>{const R=L instanceof Text?L.parentNode:L;let D=parseInt(R==null?void 0:R.getAttribute("aria-posinset"),10)-1;if(isNaN(D))return console.warn("row is invalid. Race condition?"),null;const P=this._rowColumns.get(R);if(!P)return console.warn("columns is null. Race condition?"),null;let z=M<P.length?P[M]:P.slice(-1)[0]+1;return z>=this._terminal.cols&&(++D,z=0),{row:D,column:z}},E=S(l),m=S(g);if(E&&m){if(E.row>m.row||E.row===m.row&&E.column>=m.column)throw new Error("invalid range");this._terminal.select(E.column,E.row,(m.row-E.row)*this._terminal.cols-E.column+m.column)}}_handleResize(n){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let l=this._rowContainer.children.length;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);for(;this._rowElements.length>n;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const n=this._coreBrowserService.mainDocument.createElement("div");return n.setAttribute("role","listitem"),n.tabIndex=-1,this._refreshRowDimensions(n),n}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let n=0;n<this._terminal.rows;n++)this._refreshRowDimensions(this._rowElements[n])}}_refreshRowDimensions(n){n.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=c=f([p(1,d.IInstantiationService),p(2,w.ICoreBrowserService),p(3,w.IRenderService)],c)},3614:(y,i)=>{function a(v){return v.replace(/\r?\n/g,"\r")}function f(v,C){return C?"\x1B[200~"+v+"\x1B[201~":v}function p(v,C,w,d){v=f(v=a(v),w.decPrivateModes.bracketedPasteMode&&d.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(v,!0),C.value=""}function h(v,C,w){const d=w.getBoundingClientRect(),o=v.clientX-d.left-10,c=v.clientY-d.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${o}px`,C.style.top=`${c}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=a,i.bracketTextForPaste=f,i.copyHandler=function(v,C){v.clipboardData&&v.clipboardData.setData("text/plain",C.selectionText),v.preventDefault()},i.handlePasteEvent=function(v,C,w,d){v.stopPropagation(),v.clipboardData&&p(v.clipboardData.getData("text/plain"),C,w,d)},i.paste=p,i.moveTextAreaUnderMouseCursor=h,i.rightClickHandler=function(v,C,w,d,o){h(v,C,w),o&&d.rightClickSelect(v),C.value=d.selectionText,C.select()}},7239:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const f=a(1505);i.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(p,h,v){this._css.set(p,h,v)}getCss(p,h){return this._css.get(p,h)}setColor(p,h,v){this._color.set(p,h,v)}getColor(p,h){return this._color.get(p,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(a,f,p,h){a.addEventListener(f,p,h);let v=!1;return{dispose:()=>{v||(v=!0,a.removeEventListener(f,p,h))}}}},3551:function(y,i,a){var f=this&&this.__decorate||function(c,n,l,g){var b,S=arguments.length,E=S<3?n:g===null?g=Object.getOwnPropertyDescriptor(n,l):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,n,l,g);else for(var m=c.length-1;m>=0;m--)(b=c[m])&&(E=(S<3?b(E):S>3?b(n,l,E):b(n,l))||E);return S>3&&E&&Object.defineProperty(n,l,E),E},p=this&&this.__param||function(c,n){return function(l,g){n(l,g,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier=void 0;const h=a(3656),v=a(8460),C=a(844),w=a(2585),d=a(4725);let o=i.Linkifier=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(c,n,l,g,b){super(),this._element=c,this._mouseService=n,this._renderService=l,this._bufferService=g,this._linkProviderService=b,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{var S;this._lastMouseEvent=void 0,(S=this._activeProviderReplies)==null||S.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){this._lastMouseEvent=c;const n=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!n)return;this._isMouseOut=!1;const l=c.composedPath();for(let g=0;g<l.length;g++){const b=l[g];if(b.classList.contains("xterm"))break;if(b.classList.contains("xterm-hover"))return}this._lastBufferCell&&n.x===this._lastBufferCell.x&&n.y===this._lastBufferCell.y||(this._handleHover(n),this._lastBufferCell=n)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,n){var g,b;this._activeProviderReplies&&n||((g=this._activeProviderReplies)==null||g.forEach(S=>{S==null||S.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let l=!1;for(const[S,E]of this._linkProviderService.linkProviders.entries())n?(b=this._activeProviderReplies)!=null&&b.get(S)&&(l=this._checkLinkProviderResult(S,c,l)):E.provideLinks(c.y,m=>{var L,M;if(this._isMouseOut)return;const x=m==null?void 0:m.map(R=>({link:R}));(L=this._activeProviderReplies)==null||L.set(S,x),l=this._checkLinkProviderResult(S,c,l),((M=this._activeProviderReplies)==null?void 0:M.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,n){const l=new Set;for(let g=0;g<n.size;g++){const b=n.get(g);if(b)for(let S=0;S<b.length;S++){const E=b[S],m=E.link.range.start.y<c?0:E.link.range.start.x,x=E.link.range.end.y>c?this._bufferService.cols:E.link.range.end.x;for(let L=m;L<=x;L++){if(l.has(L)){b.splice(S--,1);break}l.add(L)}}}}_checkLinkProviderResult(c,n,l){var S;if(!this._activeProviderReplies)return l;const g=this._activeProviderReplies.get(c);let b=!1;for(let E=0;E<c;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(b=!0);if(!b&&g){const E=g.find(m=>this._linkAtPosition(m.link,n));E&&(l=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!l)for(let E=0;E<this._activeProviderReplies.size;E++){const m=(S=this._activeProviderReplies.get(E))==null?void 0:S.find(x=>this._linkAtPosition(x.link,n));if(m){l=!0,this._handleNewLink(m);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._currentLink)return;const n=this._positionFromMouseEvent(c,this._element,this._mouseService);n&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,n)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,n){this._currentLink&&this._lastMouseEvent&&(!c||!n||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=n)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._lastMouseEvent)return;const n=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);n&&this._linkAtPosition(c.link,n)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var l,g;return(g=(l=this._currentLink)==null?void 0:l.state)==null?void 0:g.decorations.pointerCursor},set:l=>{var g;(g=this._currentLink)!=null&&g.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",l))}},underline:{get:()=>{var l,g;return(g=(l=this._currentLink)==null?void 0:l.state)==null?void 0:g.decorations.underline},set:l=>{var g,b,S;(g=this._currentLink)!=null&&g.state&&((S=(b=this._currentLink)==null?void 0:b.state)==null?void 0:S.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,l))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(l=>{if(!this._currentLink)return;const g=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,b=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=g&&this._currentLink.link.range.end.y<=b&&(this._clearCurrentLink(g,b),this._lastMouseEvent)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}})))}_linkHover(c,n,l){var g;(g=this._currentLink)!=null&&g.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),n.hover&&n.hover(l,n.text)}_fireUnderlineEvent(c,n){const l=c.range,g=this._bufferService.buffer.ydisp,b=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-g-1,l.end.x,l.end.y-g-1,void 0);(n?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(b)}_linkLeave(c,n,l){var g;(g=this._currentLink)!=null&&g.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(n,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),n.leave&&n.leave(l,n.text)}_linkAtPosition(c,n){const l=c.range.start.y*this._bufferService.cols+c.range.start.x,g=c.range.end.y*this._bufferService.cols+c.range.end.x,b=n.y*this._bufferService.cols+n.x;return l<=b&&b<=g}_positionFromMouseEvent(c,n,l){const g=l.getCoords(c,n,this._bufferService.cols,this._bufferService.rows);if(g)return{x:g[0],y:g[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,n,l,g,b){return{x1:c,y1:n,x2:l,y2:g,cols:this._bufferService.cols,fg:b}}};i.Linkifier=o=f([p(1,d.IMouseService),p(2,d.IRenderService),p(3,w.IBufferService),p(4,d.ILinkProviderService)],o)},9042:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(y,i,a){var f=this&&this.__decorate||function(d,o,c,n){var l,g=arguments.length,b=g<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,c):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,o,c,n);else for(var S=d.length-1;S>=0;S--)(l=d[S])&&(b=(g<3?l(b):g>3?l(o,c,b):l(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},p=this&&this.__param||function(d,o){return function(c,n){o(c,n,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const h=a(511),v=a(2585);let C=i.OscLinkProvider=class{constructor(d,o,c){this._bufferService=d,this._optionsService=o,this._oscLinkService=c}provideLinks(d,o){var x;const c=this._bufferService.buffer.lines.get(d-1);if(!c)return void o(void 0);const n=[],l=this._optionsService.rawOptions.linkHandler,g=new h.CellData,b=c.getTrimmedLength();let S=-1,E=-1,m=!1;for(let L=0;L<b;L++)if(E!==-1||c.hasContent(L)){if(c.loadCell(L,g),g.hasExtendedAttrs()&&g.extended.urlId){if(E===-1){E=L,S=g.extended.urlId;continue}m=g.extended.urlId!==S}else E!==-1&&(m=!0);if(m||E!==-1&&L===b-1){const M=(x=this._oscLinkService.getLinkData(S))==null?void 0:x.uri;if(M){const R={start:{x:E+1,y:d},end:{x:L+(m||L!==b-1?0:1),y:d}};let D=!1;if(!(l!=null&&l.allowNonHttpProtocols))try{const P=new URL(M);["http:","https:"].includes(P.protocol)||(D=!0)}catch{D=!0}D||n.push({text:M,range:R,activate:(P,z)=>l?l.activate(P,z,R):w(0,z),hover:(P,z)=>{var H;return(H=l==null?void 0:l.hover)==null?void 0:H.call(l,P,z,R)},leave:(P,z)=>{var H;return(H=l==null?void 0:l.leave)==null?void 0:H.call(l,P,z,R)}})}m=!1,g.hasExtendedAttrs()&&g.extended.urlId?(E=L,S=g.extended.urlId):(E=-1,S=-1)}}o(n)}};function w(d,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const c=window.open();if(c){try{c.opener=null}catch{}c.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=C=f([p(0,v.IBufferService),p(1,v.IOptionsService),p(2,v.IOscLinkService)],C)},6193:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(a,f){this._renderCallback=a,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,f,p){this._rowCount=p,a=a!==void 0?a:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const a=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},3236:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const f=a(3614),p=a(3656),h=a(3551),v=a(9042),C=a(3730),w=a(1680),d=a(3107),o=a(5744),c=a(2950),n=a(1296),l=a(428),g=a(4269),b=a(5114),S=a(8934),E=a(3230),m=a(9312),x=a(4725),L=a(6731),M=a(8055),R=a(8969),D=a(8460),P=a(844),z=a(6114),H=a(8437),N=a(2584),O=a(7399),k=a(5941),A=a(9074),B=a(2585),I=a(5435),U=a(4567),V=a(779);class Q extends R.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(F={}){super(F),this.browser=z,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new P.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(A.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(V.LinkProviderService),this._instantiationService.setService(x.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((T,j)=>this.refresh(T,j))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(T=>this._reportWindowsOptions(T))),this.register(this._inputHandler.onColor(T=>this._handleColorEvent(T))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(T=>this._afterResize(T.cols,T.rows))),this.register((0,P.toDisposable)(()=>{var T,j;this._customKeyEventHandler=void 0,(j=(T=this.element)==null?void 0:T.parentNode)==null||j.removeChild(this.element)}))}_handleColorEvent(F){if(this._themeService)for(const T of F){let j,W="";switch(T.index){case 256:j="foreground",W="10";break;case 257:j="background",W="11";break;case 258:j="cursor",W="12";break;default:j="ansi",W="4;"+T.index}switch(T.type){case 0:const Y=M.color.toColorRGB(j==="ansi"?this._themeService.colors.ansi[T.index]:this._themeService.colors[j]);this.coreService.triggerDataEvent(`${N.C0.ESC}]${W};${(0,k.toRgbString)(Y)}${N.C1_ESCAPED.ST}`);break;case 1:if(j==="ansi")this._themeService.modifyColors(q=>q.ansi[T.index]=M.channels.toColor(...T.color));else{const q=j;this._themeService.modifyColors(re=>re[q]=M.channels.toColor(...T.color))}break;case 2:this._themeService.restoreColor(T.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(F){F?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(F){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var F;return(F=this.textarea)==null?void 0:F.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(N.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const F=this.buffer.ybase+this.buffer.y,T=this.buffer.lines.get(F);if(!T)return;const j=Math.min(this.buffer.x,this.cols-1),W=this._renderService.dimensions.css.cell.height,Y=T.getWidth(j),q=this._renderService.dimensions.css.cell.width*Y,re=this.buffer.y*this._renderService.dimensions.css.cell.height,ee=j*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ee+"px",this.textarea.style.top=re+"px",this.textarea.style.width=q+"px",this.textarea.style.height=W+"px",this.textarea.style.lineHeight=W+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,p.addDisposableDomListener)(this.element,"copy",T=>{this.hasSelection()&&(0,f.copyHandler)(T,this._selectionService)}));const F=T=>(0,f.handlePasteEvent)(T,this.textarea,this.coreService,this.optionsService);this.register((0,p.addDisposableDomListener)(this.textarea,"paste",F)),this.register((0,p.addDisposableDomListener)(this.element,"paste",F)),z.isFirefox?this.register((0,p.addDisposableDomListener)(this.element,"mousedown",T=>{T.button===2&&(0,f.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,p.addDisposableDomListener)(this.element,"contextmenu",T=>{(0,f.rightClickHandler)(T,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),z.isLinux&&this.register((0,p.addDisposableDomListener)(this.element,"auxclick",T=>{T.button===1&&(0,f.moveTextAreaUnderMouseCursor)(T,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,p.addDisposableDomListener)(this.textarea,"keyup",F=>this._keyUp(F),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keydown",F=>this._keyDown(F),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keypress",F=>this._keyPress(F),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionupdate",F=>this._compositionHelper.compositionupdate(F))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,p.addDisposableDomListener)(this.textarea,"input",F=>this._inputEvent(F),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(F){var j;if(!F)throw new Error("Terminal requires a parent element.");if(F.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((j=this.element)==null?void 0:j.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=F.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),F.appendChild(this.element);const T=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),T.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,p.addDisposableDomListener)(this.screenElement,"mousemove",W=>this.updateCursorStyle(W))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),T.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),z.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,F.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(x.ICoreBrowserService,this._coreBrowserService),this.register((0,p.addDisposableDomListener)(this.textarea,"focus",W=>this._handleTextAreaFocus(W))),this.register((0,p.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(l.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(x.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(L.ThemeService),this._instantiationService.setService(x.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(g.CharacterJoinerService),this._instantiationService.setService(x.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(E.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(x.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(W=>this._onRender.fire(W))),this.onResize(W=>this._renderService.resize(W.cols,W.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(c.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(x.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(T);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(m.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(x.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(W=>this.scrollLines(W.amount,W.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(W=>this._renderService.handleSelectionChanged(W.start,W.end,W.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(W=>{this.textarea.value=W,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(W=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(d.BufferDecorationRenderer,this.screenElement)),this.register((0,p.addDisposableDomListener)(this.element,"mousedown",W=>this._selectionService.handleMouseDown(W))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(U.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",W=>this._handleScreenReaderModeOptionChange(W))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",W=>{!this._overviewRulerRenderer&&W&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(n.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const F=this,T=this.element;function j(q){const re=F._mouseService.getMouseReportCoords(q,F.screenElement);if(!re)return!1;let ee,ce;switch(q.overrideType||q.type){case"mousemove":ce=32,q.buttons===void 0?(ee=3,q.button!==void 0&&(ee=q.button<3?q.button:3)):ee=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":ce=0,ee=q.button<3?q.button:3;break;case"mousedown":ce=1,ee=q.button<3?q.button:3;break;case"wheel":if(F._customWheelEventHandler&&F._customWheelEventHandler(q)===!1||F.viewport.getLinesScrolled(q)===0)return!1;ce=q.deltaY<0?0:1,ee=4;break;default:return!1}return!(ce===void 0||ee===void 0||ee>4)&&F.coreMouseService.triggerMouseEvent({col:re.col,row:re.row,x:re.x,y:re.y,button:ee,action:ce,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}const W={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y={mouseup:q=>(j(q),q.buttons||(this._document.removeEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.removeEventListener("mousemove",W.mousedrag)),this.cancel(q)),wheel:q=>(j(q),this.cancel(q,!0)),mousedrag:q=>{q.buttons&&j(q)},mousemove:q=>{q.buttons||j(q)}};this.register(this.coreMouseService.onProtocolChange(q=>{q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&q?W.mousemove||(T.addEventListener("mousemove",Y.mousemove),W.mousemove=Y.mousemove):(T.removeEventListener("mousemove",W.mousemove),W.mousemove=null),16&q?W.wheel||(T.addEventListener("wheel",Y.wheel,{passive:!1}),W.wheel=Y.wheel):(T.removeEventListener("wheel",W.wheel),W.wheel=null),2&q?W.mouseup||(W.mouseup=Y.mouseup):(this._document.removeEventListener("mouseup",W.mouseup),W.mouseup=null),4&q?W.mousedrag||(W.mousedrag=Y.mousedrag):(this._document.removeEventListener("mousemove",W.mousedrag),W.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,p.addDisposableDomListener)(T,"mousedown",q=>{if(q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(q))return j(q),W.mouseup&&this._document.addEventListener("mouseup",W.mouseup),W.mousedrag&&this._document.addEventListener("mousemove",W.mousedrag),this.cancel(q)})),this.register((0,p.addDisposableDomListener)(T,"wheel",q=>{if(!W.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(q)===!1)return!1;if(!this.buffer.hasScrollback){const re=this.viewport.getLinesScrolled(q);if(re===0)return;const ee=N.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B");let ce="";for(let fe=0;fe<Math.abs(re);fe++)ce+=ee;return this.coreService.triggerDataEvent(ce,!0),this.cancel(q,!0)}return this.viewport.handleWheel(q)?this.cancel(q):void 0}},{passive:!1})),this.register((0,p.addDisposableDomListener)(T,"touchstart",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(q),this.cancel(q)},{passive:!0})),this.register((0,p.addDisposableDomListener)(T,"touchmove",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(q)?void 0:this.cancel(q)},{passive:!1}))}refresh(F,T){var j;(j=this._renderService)==null||j.refreshRows(F,T)}updateCursorStyle(F){var T;(T=this._selectionService)!=null&&T.shouldColumnSelect(F)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(F,T,j=0){var W;j===1?(super.scrollLines(F,T,j),this.refresh(0,this.rows-1)):(W=this.viewport)==null||W.scrollLines(F)}paste(F){(0,f.paste)(F,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(F){this._customKeyEventHandler=F}attachCustomWheelEventHandler(F){this._customWheelEventHandler=F}registerLinkProvider(F){return this._linkProviderService.registerLinkProvider(F)}registerCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const T=this._characterJoinerService.register(F);return this.refresh(0,this.rows-1),T}deregisterCharacterJoiner(F){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(F)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(F){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+F)}registerDecoration(F){return this._decorationService.registerDecoration(F)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(F,T,j){this._selectionService.setSelection(F,T,j)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var F;(F=this._selectionService)==null||F.clearSelection()}selectAll(){var F;(F=this._selectionService)==null||F.selectAll()}selectLines(F,T){var j;(j=this._selectionService)==null||j.selectLines(F,T)}_keyDown(F){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;const T=this.browser.isMac&&this.options.macOptionIsMeta&&F.altKey;if(!T&&!this._compositionHelper.keydown(F))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;T||F.key!=="Dead"&&F.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const j=(0,O.evaluateKeyboardEvent)(F,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(F),j.type===3||j.type===2){const W=this.rows-1;return this.scrollLines(j.type===2?-W:W),this.cancel(F,!0)}return j.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,F)||(j.cancel&&this.cancel(F,!0),!j.key||!!(F.key&&!F.ctrlKey&&!F.altKey&&!F.metaKey&&F.key.length===1&&F.key.charCodeAt(0)>=65&&F.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(j.key!==N.C0.ETX&&j.key!==N.C0.CR||(this.textarea.value=""),this._onKey.fire({key:j.key,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(j.key,!0),!this.optionsService.rawOptions.screenReaderMode||F.altKey||F.ctrlKey?this.cancel(F,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(F,T){const j=F.isMac&&!this.options.macOptionIsMeta&&T.altKey&&!T.ctrlKey&&!T.metaKey||F.isWindows&&T.altKey&&T.ctrlKey&&!T.metaKey||F.isWindows&&T.getModifierState("AltGraph");return T.type==="keypress"?j:j&&(!T.keyCode||T.keyCode>47)}_keyUp(F){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1||(function(T){return T.keyCode===16||T.keyCode===17||T.keyCode===18}(F)||this.focus(),this.updateCursorStyle(F),this._keyPressHandled=!1)}_keyPress(F){let T;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(F)===!1)return!1;if(this.cancel(F),F.charCode)T=F.charCode;else if(F.which===null||F.which===void 0)T=F.keyCode;else{if(F.which===0||F.charCode===0)return!1;T=F.which}return!(!T||(F.altKey||F.ctrlKey||F.metaKey)&&!this._isThirdLevelShift(this.browser,F)||(T=String.fromCharCode(T),this._onKey.fire({key:T,domEvent:F}),this._showCursor(),this.coreService.triggerDataEvent(T,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(F){if(F.data&&F.inputType==="insertText"&&(!F.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const T=F.data;return this.coreService.triggerDataEvent(T,!0),this.cancel(F),!0}return!1}resize(F,T){F!==this.cols||T!==this.rows?super.resize(F,T):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(F,T){var j,W;(j=this._charSizeService)==null||j.measure(),(W=this.viewport)==null||W.syncScrollArea(!0)}clear(){var F;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let T=1;T<this.rows;T++)this.buffer.lines.push(this.buffer.getBlankLine(H.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(F=this.viewport)==null||F.reset(),this.refresh(0,this.rows-1)}}reset(){var T,j;this.options.rows=this.rows,this.options.cols=this.cols;const F=this._customKeyEventHandler;this._setup(),super.reset(),(T=this._selectionService)==null||T.reset(),this._decorationService.reset(),(j=this.viewport)==null||j.reset(),this._customKeyEventHandler=F,this.refresh(0,this.rows-1)}clearTextureAtlas(){var F;(F=this._renderService)==null||F.clearTextureAtlas()}_reportFocus(){var F;(F=this.element)!=null&&F.classList.contains("focus")?this.coreService.triggerDataEvent(N.C0.ESC+"[I"):this.coreService.triggerDataEvent(N.C0.ESC+"[O")}_reportWindowsOptions(F){if(this._renderService)switch(F){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const T=this._renderService.dimensions.css.canvas.width.toFixed(0),j=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[4;${j};${T}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const W=this._renderService.dimensions.css.cell.width.toFixed(0),Y=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${N.C0.ESC}[6;${Y};${W}t`)}}cancel(F,T){if(this.options.cancelEvents||T)return F.preventDefault(),F.stopPropagation(),!1}}i.Terminal=Q},9924:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(a,f=1e3){this._renderCallback=a,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,f,p){this._rowCount=p,a=a!==void 0?a:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=h-this._lastRefreshMs,C=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const a=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,f)}}},1680:function(y,i,a){var f=this&&this.__decorate||function(c,n,l,g){var b,S=arguments.length,E=S<3?n:g===null?g=Object.getOwnPropertyDescriptor(n,l):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,n,l,g);else for(var m=c.length-1;m>=0;m--)(b=c[m])&&(E=(S<3?b(E):S>3?b(n,l,E):b(n,l))||E);return S>3&&E&&Object.defineProperty(n,l,E),E},p=this&&this.__param||function(c,n){return function(l,g){n(l,g,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const h=a(3656),v=a(4725),C=a(8460),w=a(844),d=a(2585);let o=i.Viewport=class extends w.Disposable{constructor(c,n,l,g,b,S,E,m){super(),this._viewportElement=c,this._scrollArea=n,this._bufferService=l,this._optionsService=g,this._charSizeService=b,this._renderService=S,this._coreBrowserService=E,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(x=>this._activeBuffer=x.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(x=>this._renderDimensions=x)),this._handleThemeChange(m.colors),this.register(m.onChangeColors(x=>this._handleThemeChange(x))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(c){this._viewportElement.style.backgroundColor=c.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(c){if(c)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const n=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==n&&(this._lastRecordedBufferHeight=n,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const c=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==c&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=c),this._refreshAnimationFrame=null}syncScrollArea(c=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(c);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(c)}_handleScroll(c){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const n=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:n,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const c=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(c*(this._smoothScrollState.target-this._smoothScrollState.origin)),c<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(c,n){const l=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(n<0&&this._viewportElement.scrollTop!==0||n>0&&l<this._lastRecordedBufferHeight)||(c.cancelable&&c.preventDefault(),!1)}handleWheel(c){const n=this._getPixelsScrolled(c);return n!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+n:this._smoothScrollState.target+=n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=n,this._bubbleScroll(c,n))}scrollLines(c){if(c!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const n=c*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+n,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!1})}_getPixelsScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let n=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_LINE?n*=this._currentRowHeight:c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._currentRowHeight*this._bufferService.rows),n}getBufferElements(c,n){var m;let l,g="";const b=[],S=n??this._bufferService.buffer.lines.length,E=this._bufferService.buffer.lines;for(let x=c;x<S;x++){const L=E.get(x);if(!L)continue;const M=(m=E.get(x+1))==null?void 0:m.isWrapped;if(g+=L.translateToString(!M),!M||x===E.length-1){const R=document.createElement("div");R.textContent=g,b.push(R),g.length>0&&(l=R),g=""}}return{bufferElements:b,cursorElement:l}}getLinesScrolled(c){if(c.deltaY===0||c.shiftKey)return 0;let n=this._applyScrollModifier(c.deltaY,c);return c.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(n/=this._currentRowHeight+0,this._wheelPartialScroll+=n,n=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):c.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(n*=this._bufferService.rows),n}_applyScrollModifier(c,n){const l=this._optionsService.rawOptions.fastScrollModifier;return l==="alt"&&n.altKey||l==="ctrl"&&n.ctrlKey||l==="shift"&&n.shiftKey?c*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:c*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(c){this._lastTouchY=c.touches[0].pageY}handleTouchMove(c){const n=this._lastTouchY-c.touches[0].pageY;return this._lastTouchY=c.touches[0].pageY,n!==0&&(this._viewportElement.scrollTop+=n,this._bubbleScroll(c,n))}};i.Viewport=o=f([p(2,d.IBufferService),p(3,d.IOptionsService),p(4,v.ICharSizeService),p(5,v.IRenderService),p(6,v.ICoreBrowserService),p(7,v.IThemeService)],o)},3107:function(y,i,a){var f=this&&this.__decorate||function(d,o,c,n){var l,g=arguments.length,b=g<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,c):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,o,c,n);else for(var S=d.length-1;S>=0;S--)(l=d[S])&&(b=(g<3?l(b):g>3?l(o,c,b):l(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},p=this&&this.__param||function(d,o){return function(c,n){o(c,n,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const h=a(4725),v=a(844),C=a(2585);let w=i.BufferDecorationRenderer=class extends v.Disposable{constructor(d,o,c,n,l){super(),this._screenElement=d,this._bufferService=o,this._coreBrowserService=c,this._decorationService=n,this._renderService=l,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(g=>this._removeDecoration(g))),this.register((0,v.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const d of this._decorationService.decorations)this._renderDecoration(d);this._dimensionsChanged=!1}_renderDecoration(d){this._refreshStyle(d),this._dimensionsChanged&&this._refreshXPosition(d)}_createElement(d){var n;const o=this._coreBrowserService.mainDocument.createElement("div");o.classList.add("xterm-decoration"),o.classList.toggle("xterm-decoration-top-layer",((n=d==null?void 0:d.options)==null?void 0:n.layer)==="top"),o.style.width=`${Math.round((d.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,o.style.height=(d.options.height||1)*this._renderService.dimensions.css.cell.height+"px",o.style.top=(d.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",o.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const c=d.options.x??0;return c&&c>this._bufferService.cols&&(o.style.display="none"),this._refreshXPosition(d,o),o}_refreshStyle(d){const o=d.marker.line-this._bufferService.buffers.active.ydisp;if(o<0||o>=this._bufferService.rows)d.element&&(d.element.style.display="none",d.onRenderEmitter.fire(d.element));else{let c=this._decorationElements.get(d);c||(c=this._createElement(d),d.element=c,this._decorationElements.set(d,c),this._container.appendChild(c),d.onDispose(()=>{this._decorationElements.delete(d),c.remove()})),c.style.top=o*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",d.onRenderEmitter.fire(c)}}_refreshXPosition(d,o=d.element){if(!o)return;const c=d.options.x??0;(d.options.anchor||"left")==="right"?o.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":o.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(d){var o;(o=this._decorationElements.get(d))==null||o.remove(),this._decorationElements.delete(d),d.dispose()}};i.BufferDecorationRenderer=w=f([p(1,C.IBufferService),p(2,h.ICoreBrowserService),p(3,C.IDecorationService),p(4,h.IRenderService)],w)},5871:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(const f of this._zones)if(f.color===a.options.overviewRulerOptions.color&&f.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,a.marker.line))return;if(this._lineAdjacentToZone(f,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(f,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,f){return f>=a.startBufferLine&&f<=a.endBufferLine}_lineAdjacentToZone(a,f,p){return f>=a.startBufferLine-this._linePadding[p||"full"]&&f<=a.endBufferLine+this._linePadding[p||"full"]}_addLineToZone(a,f){a.startBufferLine=Math.min(a.startBufferLine,f),a.endBufferLine=Math.max(a.endBufferLine,f)}}},5744:function(y,i,a){var f=this&&this.__decorate||function(l,g,b,S){var E,m=arguments.length,x=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,g,b,S);else for(var L=l.length-1;L>=0;L--)(E=l[L])&&(x=(m<3?E(x):m>3?E(g,b,x):E(g,b))||x);return m>3&&x&&Object.defineProperty(g,b,x),x},p=this&&this.__param||function(l,g){return function(b,S){g(b,S,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const h=a(5871),v=a(4725),C=a(844),w=a(2585),d={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let n=i.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(l,g,b,S,E,m,x){var M;super(),this._viewportElement=l,this._screenElement=g,this._bufferService=b,this._decorationService=S,this._renderService=E,this._optionsService=m,this._coreBrowserService=x,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(M=this._viewportElement.parentElement)==null||M.insertBefore(this._canvas,this._viewportElement);const L=this._canvas.getContext("2d");if(!L)throw new Error("Ctx cannot be null");this._ctx=L,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)(()=>{var R;(R=this._canvas)==null||R.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const l=Math.floor(this._canvas.width/3),g=Math.ceil(this._canvas.width/3);o.full=this._canvas.width,o.left=l,o.center=g,o.right=l,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=o.left,c.right=o.left+o.center}_refreshDrawHeightConstants(){d.full=Math.round(2*this._coreBrowserService.dpr);const l=this._canvas.height/this._bufferService.buffer.lines.length,g=Math.round(Math.max(Math.min(l,12),6)*this._coreBrowserService.dpr);d.left=g,d.center=g,d.right=g}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const g of this._decorationService.decorations)this._colorZoneStore.addDecoration(g);this._ctx.lineWidth=1;const l=this._colorZoneStore.zones;for(const g of l)g.position!=="full"&&this._renderColorZone(g);for(const g of l)g.position==="full"&&this._renderColorZone(g);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(l){this._ctx.fillStyle=l.color,this._ctx.fillRect(c[l.position||"full"],Math.round((this._canvas.height-1)*(l.startBufferLine/this._bufferService.buffers.active.lines.length)-d[l.position||"full"]/2),o[l.position||"full"],Math.round((this._canvas.height-1)*((l.endBufferLine-l.startBufferLine)/this._bufferService.buffers.active.lines.length)+d[l.position||"full"]))}_queueRefresh(l,g){this._shouldUpdateDimensions=l||this._shouldUpdateDimensions,this._shouldUpdateAnchor=g||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=n=f([p(2,w.IBufferService),p(3,w.IDecorationService),p(4,v.IRenderService),p(5,w.IOptionsService),p(6,v.ICoreBrowserService)],n)},2950:function(y,i,a){var f=this&&this.__decorate||function(d,o,c,n){var l,g=arguments.length,b=g<3?o:n===null?n=Object.getOwnPropertyDescriptor(o,c):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(d,o,c,n);else for(var S=d.length-1;S>=0;S--)(l=d[S])&&(b=(g<3?l(b):g>3?l(o,c,b):l(o,c))||b);return g>3&&b&&Object.defineProperty(o,c,b),b},p=this&&this.__param||function(d,o){return function(c,n){o(c,n,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const h=a(4725),v=a(2585),C=a(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(d,o,c,n,l,g){this._textarea=d,this._compositionView=o,this._bufferService=c,this._optionsService=n,this._coreService=l,this._renderService=g,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(d){this._compositionView.textContent=d.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(d){if(this._isComposing||this._isSendingComposition){if(d.keyCode===229||d.keyCode===16||d.keyCode===17||d.keyCode===18)return!1;this._finalizeComposition(!1)}return d.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(d){if(this._compositionView.classList.remove("active"),this._isComposing=!1,d){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let c;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,c=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),c.length>0&&this._coreService.triggerDataEvent(c,!0)}},0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const d=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const o=this._textarea.value,c=o.replace(d,"");this._dataAlreadySent=c,o.length>d.length?this._coreService.triggerDataEvent(c,!0):o.length<d.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):o.length===d.length&&o!==d&&this._coreService.triggerDataEvent(o,!0)}},0)}updateCompositionElements(d){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),c=this._renderService.dimensions.css.cell.height,n=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,l=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=l+"px",this._compositionView.style.top=n+"px",this._compositionView.style.height=c+"px",this._compositionView.style.lineHeight=c+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const g=this._compositionView.getBoundingClientRect();this._textarea.style.left=l+"px",this._textarea.style.top=n+"px",this._textarea.style.width=Math.max(g.width,1)+"px",this._textarea.style.height=Math.max(g.height,1)+"px",this._textarea.style.lineHeight=g.height+"px"}d||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=w=f([p(2,v.IBufferService),p(3,v.IOptionsService),p(4,v.ICoreService),p(5,h.IRenderService)],w)},9806:(y,i)=>{function a(f,p,h){const v=h.getBoundingClientRect(),C=f.getComputedStyle(h),w=parseInt(C.getPropertyValue("padding-left")),d=parseInt(C.getPropertyValue("padding-top"));return[p.clientX-v.left-w,p.clientY-v.top-d]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=a,i.getCoords=function(f,p,h,v,C,w,d,o,c){if(!w)return;const n=a(f,p,h);return n?(n[0]=Math.ceil((n[0]+(c?d/2:0))/d),n[1]=Math.ceil(n[1]/o),n[0]=Math.min(Math.max(n[0],1),v+(c?1:0)),n[1]=Math.min(Math.max(n[1],1),C),n):void 0}},9504:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const f=a(2584);function p(o,c,n,l){const g=o-h(o,n),b=c-h(c,n),S=Math.abs(g-b)-function(E,m,x){let L=0;const M=E-h(E,x),R=m-h(m,x);for(let D=0;D<Math.abs(M-R);D++){const P=v(E,m)==="A"?-1:1,z=x.buffer.lines.get(M+P*D);z!=null&&z.isWrapped&&L++}return L}(o,c,n);return d(S,w(v(o,c),l))}function h(o,c){let n=0,l=c.buffer.lines.get(o),g=l==null?void 0:l.isWrapped;for(;g&&o>=0&&o<c.rows;)n++,l=c.buffer.lines.get(--o),g=l==null?void 0:l.isWrapped;return n}function v(o,c){return o>c?"A":"B"}function C(o,c,n,l,g,b){let S=o,E=c,m="";for(;S!==n||E!==l;)S+=g?1:-1,g&&S>b.cols-1?(m+=b.buffer.translateBufferLineToString(E,!1,o,S),S=0,o=0,E++):!g&&S<0&&(m+=b.buffer.translateBufferLineToString(E,!1,0,o+1),S=b.cols-1,o=S,E--);return m+b.buffer.translateBufferLineToString(E,!1,o,S)}function w(o,c){const n=c?"O":"[";return f.C0.ESC+n+o}function d(o,c){o=Math.floor(o);let n="";for(let l=0;l<o;l++)n+=c;return n}i.moveToCellSequence=function(o,c,n,l){const g=n.buffer.x,b=n.buffer.y;if(!n.buffer.hasScrollback)return function(m,x,L,M,R,D){return p(x,M,R,D).length===0?"":d(C(m,x,m,x-h(x,R),!1,R).length,w("D",D))}(g,b,0,c,n,l)+p(b,c,n,l)+function(m,x,L,M,R,D){let P;P=p(x,M,R,D).length>0?M-h(M,R):x;const z=M,H=function(N,O,k,A,B,I){let U;return U=p(k,A,B,I).length>0?A-h(A,B):O,N<k&&U<=A||N>=k&&U<A?"C":"D"}(m,x,L,M,R,D);return d(C(m,P,L,z,H==="C",R).length,w(H,D))}(g,b,o,c,n,l);let S;if(b===c)return S=g>o?"D":"C",d(Math.abs(g-o),w(S,l));S=b>c?"D":"C";const E=Math.abs(b-c);return d(function(m,x){return x.cols-m}(b>c?o:g,n)+(E-1)*n.cols+1+((b>c?g:o)-1),w(S,l))}},1296:function(y,i,a){var f=this&&this.__decorate||function(D,P,z,H){var N,O=arguments.length,k=O<3?P:H===null?H=Object.getOwnPropertyDescriptor(P,z):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(D,P,z,H);else for(var A=D.length-1;A>=0;A--)(N=D[A])&&(k=(O<3?N(k):O>3?N(P,z,k):N(P,z))||k);return O>3&&k&&Object.defineProperty(P,z,k),k},p=this&&this.__param||function(D,P){return function(z,H){P(z,H,D)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const h=a(3787),v=a(2550),C=a(2223),w=a(6171),d=a(6052),o=a(4725),c=a(8055),n=a(8460),l=a(844),g=a(2585),b="xterm-dom-renderer-owner-",S="xterm-rows",E="xterm-fg-",m="xterm-bg-",x="xterm-focus",L="xterm-selection";let M=1,R=i.DomRenderer=class extends l.Disposable{constructor(D,P,z,H,N,O,k,A,B,I,U,V,Q){super(),this._terminal=D,this._document=P,this._element=z,this._screenElement=H,this._viewportElement=N,this._helperContainer=O,this._linkifier2=k,this._charSizeService=B,this._optionsService=I,this._bufferService=U,this._coreBrowserService=V,this._themeService=Q,this._terminalClass=M++,this._rowElements=[],this._selectionRenderModel=(0,d.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new n.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(L),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(X=>this._injectCss(X))),this._injectCss(this._themeService.colors),this._rowFactory=A.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(b+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(X=>this._handleLinkHover(X))),this.register(this._linkifier2.onHideLinkUnderline(X=>this._handleLinkLeave(X))),this.register((0,l.toDisposable)(()=>{this._element.classList.remove(b+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const D=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*D,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*D),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/D),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/D),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const z of this._rowElements)z.style.width=`${this.dimensions.css.canvas.width}px`,z.style.height=`${this.dimensions.css.cell.height}px`,z.style.lineHeight=`${this.dimensions.css.cell.height}px`,z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const P=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=P,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(D){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let P=`${this._terminalSelector} .${S} { color: ${D.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;P+=`${this._terminalSelector} .${S} .xterm-dim { color: ${c.color.multiplyOpacity(D.foreground,.5).css};}`,P+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const z=`blink_underline_${this._terminalClass}`,H=`blink_bar_${this._terminalClass}`,N=`blink_block_${this._terminalClass}`;P+=`@keyframes ${z} { 50% {  border-bottom-style: hidden; }}`,P+=`@keyframes ${H} { 50% {  box-shadow: none; }}`,P+=`@keyframes ${N} { 0% {  background-color: ${D.cursor.css};  color: ${D.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${D.cursor.css}; }}`,P+=`${this._terminalSelector} .${S}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${S}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${H} 1s step-end infinite;}${this._terminalSelector} .${S}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${N} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${D.cursor.css}; color: ${D.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${D.cursor.css} !important; color: ${D.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${D.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${D.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${D.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,P+=`${this._terminalSelector} .${L} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${L} div { position: absolute; background-color: ${D.selectionBackgroundOpaque.css};}${this._terminalSelector} .${L} div { position: absolute; background-color: ${D.selectionInactiveBackgroundOpaque.css};}`;for(const[O,k]of D.ansi.entries())P+=`${this._terminalSelector} .${E}${O} { color: ${k.css}; }${this._terminalSelector} .${E}${O}.xterm-dim { color: ${c.color.multiplyOpacity(k,.5).css}; }${this._terminalSelector} .${m}${O} { background-color: ${k.css}; }`;P+=`${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(D.background).css}; }${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(D.background),.5).css}; }${this._terminalSelector} .${m}${C.INVERTED_DEFAULT_COLOR} { background-color: ${D.foreground.css}; }`,this._themeStyleElement.textContent=P}_setDefaultSpacing(){const D=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${D}px`,this._rowFactory.defaultSpacing=D}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(D,P){for(let z=this._rowElements.length;z<=P;z++){const H=this._document.createElement("div");this._rowContainer.appendChild(H),this._rowElements.push(H)}for(;this._rowElements.length>P;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(D,P){this._refreshRowElements(D,P),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(D,P,z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(D,P,z),this.renderRows(0,this._bufferService.rows-1),!D||!P)return;this._selectionRenderModel.update(this._terminal,D,P,z);const H=this._selectionRenderModel.viewportStartRow,N=this._selectionRenderModel.viewportEndRow,O=this._selectionRenderModel.viewportCappedStartRow,k=this._selectionRenderModel.viewportCappedEndRow;if(O>=this._bufferService.rows||k<0)return;const A=this._document.createDocumentFragment();if(z){const B=D[0]>P[0];A.appendChild(this._createSelectionElement(O,B?P[0]:D[0],B?D[0]:P[0],k-O+1))}else{const B=H===O?D[0]:0,I=O===N?P[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(O,B,I));const U=k-O-1;if(A.appendChild(this._createSelectionElement(O+1,0,this._bufferService.cols,U)),O!==k){const V=N===k?P[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(k,0,V))}}this._selectionContainer.appendChild(A)}_createSelectionElement(D,P,z,H=1){const N=this._document.createElement("div"),O=P*this.dimensions.css.cell.width;let k=this.dimensions.css.cell.width*(z-P);return O+k>this.dimensions.css.canvas.width&&(k=this.dimensions.css.canvas.width-O),N.style.height=H*this.dimensions.css.cell.height+"px",N.style.top=D*this.dimensions.css.cell.height+"px",N.style.left=`${O}px`,N.style.width=`${k}px`,N}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const D of this._rowElements)D.replaceChildren()}renderRows(D,P){const z=this._bufferService.buffer,H=z.ybase+z.y,N=Math.min(z.x,this._bufferService.cols-1),O=this._optionsService.rawOptions.cursorBlink,k=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=D;B<=P;B++){const I=B+z.ydisp,U=this._rowElements[B],V=z.lines.get(I);if(!U||!V)break;U.replaceChildren(...this._rowFactory.createRow(V,I,I===H,k,A,N,O,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${b}${this._terminalClass}`}_handleLinkHover(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!0)}_handleLinkLeave(D){this._setCellUnderline(D.x1,D.x2,D.y1,D.y2,D.cols,!1)}_setCellUnderline(D,P,z,H,N,O){z<0&&(D=0),H<0&&(P=0);const k=this._bufferService.rows-1;z=Math.max(Math.min(z,k),0),H=Math.max(Math.min(H,k),0),N=Math.min(N,this._bufferService.cols);const A=this._bufferService.buffer,B=A.ybase+A.y,I=Math.min(A.x,N-1),U=this._optionsService.rawOptions.cursorBlink,V=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let X=z;X<=H;++X){const F=X+A.ydisp,T=this._rowElements[X],j=A.lines.get(F);if(!T||!j)break;T.replaceChildren(...this._rowFactory.createRow(j,F,F===B,V,Q,I,U,this.dimensions.css.cell.width,this._widthCache,O?X===z?D:0:-1,O?(X===H?P:N)-1:-1))}}};i.DomRenderer=R=f([p(7,g.IInstantiationService),p(8,o.ICharSizeService),p(9,g.IOptionsService),p(10,g.IBufferService),p(11,o.ICoreBrowserService),p(12,o.IThemeService)],R)},3787:function(y,i,a){var f=this&&this.__decorate||function(S,E,m,x){var L,M=arguments.length,R=M<3?E:x===null?x=Object.getOwnPropertyDescriptor(E,m):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(S,E,m,x);else for(var D=S.length-1;D>=0;D--)(L=S[D])&&(R=(M<3?L(R):M>3?L(E,m,R):L(E,m))||R);return M>3&&R&&Object.defineProperty(E,m,R),R},p=this&&this.__param||function(S,E){return function(m,x){E(m,x,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const h=a(2223),v=a(643),C=a(511),w=a(2585),d=a(8055),o=a(4725),c=a(4269),n=a(6171),l=a(3734);let g=i.DomRendererRowFactory=class{constructor(S,E,m,x,L,M,R){this._document=S,this._characterJoinerService=E,this._optionsService=m,this._coreBrowserService=x,this._coreService=L,this._decorationService=M,this._themeService=R,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,E,m){this._selectionStart=S,this._selectionEnd=E,this._columnSelectMode=m}createRow(S,E,m,x,L,M,R,D,P,z,H){const N=[],O=this._characterJoinerService.getJoinedCharacters(E),k=this._themeService.colors;let A,B=S.getNoBgTrimmedLength();m&&B<M+1&&(B=M+1);let I=0,U="",V=0,Q=0,X=0,F=!1,T=0,j=!1,W=0;const Y=[],q=z!==-1&&H!==-1;for(let re=0;re<B;re++){S.loadCell(re,this._workCell);let ee=this._workCell.getWidth();if(ee===0)continue;let ce=!1,fe=re,te=this._workCell;if(O.length>0&&re===O[0][0]){ce=!0;const oe=O.shift();te=new c.JoinedCellData(this._workCell,S.translateToString(!0,oe[0],oe[1]),oe[1]-oe[0]),fe=oe[1]-1,ee=te.getWidth()}const st=this._isCellInSelection(re,E),Dt=m&&re===M,ie=q&&re>=z&&re<=H;let se=!1;this._decorationService.forEachDecorationAtCell(re,E,void 0,oe=>{se=!0});let ne=te.getChars()||v.WHITESPACE_CELL_CHAR;if(ne===" "&&(te.isUnderline()||te.isOverline())&&(ne=""),W=ee*D-P.get(ne,te.isBold(),te.isItalic()),A){if(I&&(st&&j||!st&&!j&&te.bg===V)&&(st&&j&&k.selectionForeground||te.fg===Q)&&te.extended.ext===X&&ie===F&&W===T&&!Dt&&!ce&&!se){te.isInvisible()?U+=v.WHITESPACE_CELL_CHAR:U+=ne,I++;continue}I&&(A.textContent=U),A=this._document.createElement("span"),I=0,U=""}else A=this._document.createElement("span");if(V=te.bg,Q=te.fg,X=te.extended.ext,F=ie,T=W,j=st,ce&&M>=re&&M<=fe&&(M=re),!this._coreService.isCursorHidden&&Dt&&this._coreService.isCursorInitialized){if(Y.push("xterm-cursor"),this._coreBrowserService.isFocused)R&&Y.push("xterm-cursor-blink"),Y.push(x==="bar"?"xterm-cursor-bar":x==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(L)switch(L){case"outline":Y.push("xterm-cursor-outline");break;case"block":Y.push("xterm-cursor-block");break;case"bar":Y.push("xterm-cursor-bar");break;case"underline":Y.push("xterm-cursor-underline")}}if(te.isBold()&&Y.push("xterm-bold"),te.isItalic()&&Y.push("xterm-italic"),te.isDim()&&Y.push("xterm-dim"),U=te.isInvisible()?v.WHITESPACE_CELL_CHAR:te.getChars()||v.WHITESPACE_CELL_CHAR,te.isUnderline()&&(Y.push(`xterm-underline-${te.extended.underlineStyle}`),U===" "&&(U=""),!te.isUnderlineColorDefault()))if(te.isUnderlineColorRGB())A.style.textDecorationColor=`rgb(${l.AttributeData.toColorRGB(te.getUnderlineColor()).join(",")})`;else{let oe=te.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&te.isBold()&&oe<8&&(oe+=8),A.style.textDecorationColor=k.ansi[oe].css}te.isOverline()&&(Y.push("xterm-overline"),U===" "&&(U="")),te.isStrikethrough()&&Y.push("xterm-strikethrough"),ie&&(A.style.textDecoration="underline");let J=te.getFgColor(),le=te.getFgColorMode(),Se=te.getBgColor(),_e=te.getBgColorMode();const We=!!te.isInverse();if(We){const oe=J;J=Se,Se=oe;const yr=le;le=_e,_e=yr}let ke,Be,Ce,he=!1;switch(this._decorationService.forEachDecorationAtCell(re,E,void 0,oe=>{oe.options.layer!=="top"&&he||(oe.backgroundColorRGB&&(_e=50331648,Se=oe.backgroundColorRGB.rgba>>8&16777215,ke=oe.backgroundColorRGB),oe.foregroundColorRGB&&(le=50331648,J=oe.foregroundColorRGB.rgba>>8&16777215,Be=oe.foregroundColorRGB),he=oe.options.layer==="top")}),!he&&st&&(ke=this._coreBrowserService.isFocused?k.selectionBackgroundOpaque:k.selectionInactiveBackgroundOpaque,Se=ke.rgba>>8&16777215,_e=50331648,he=!0,k.selectionForeground&&(le=50331648,J=k.selectionForeground.rgba>>8&16777215,Be=k.selectionForeground)),he&&Y.push("xterm-decoration-top"),_e){case 16777216:case 33554432:Ce=k.ansi[Se],Y.push(`xterm-bg-${Se}`);break;case 50331648:Ce=d.channels.toColor(Se>>16,Se>>8&255,255&Se),this._addStyle(A,`background-color:#${b((Se>>>0).toString(16),"0",6)}`);break;default:We?(Ce=k.foreground,Y.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Ce=k.background}switch(ke||te.isDim()&&(ke=d.color.multiplyOpacity(Ce,.5)),le){case 16777216:case 33554432:te.isBold()&&J<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(J+=8),this._applyMinimumContrast(A,Ce,k.ansi[J],te,ke,void 0)||Y.push(`xterm-fg-${J}`);break;case 50331648:const oe=d.channels.toColor(J>>16&255,J>>8&255,255&J);this._applyMinimumContrast(A,Ce,oe,te,ke,Be)||this._addStyle(A,`color:#${b(J.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(A,Ce,k.foreground,te,ke,Be)||We&&Y.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}Y.length&&(A.className=Y.join(" "),Y.length=0),Dt||ce||se?A.textContent=U:I++,W!==this.defaultSpacing&&(A.style.letterSpacing=`${W}px`),N.push(A),re=fe}return A&&I&&(A.textContent=U),N}_applyMinimumContrast(S,E,m,x,L,M){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,n.treatGlyphAsBackgroundColor)(x.getCode()))return!1;const R=this._getContrastCache(x);let D;if(L||M||(D=R.getColor(E.rgba,m.rgba)),D===void 0){const P=this._optionsService.rawOptions.minimumContrastRatio/(x.isDim()?2:1);D=d.color.ensureContrastRatio(L||E,M||m,P),R.setColor((L||E).rgba,(M||m).rgba,D??null)}return!!D&&(this._addStyle(S,`color:${D.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,E){S.setAttribute("style",`${S.getAttribute("style")||""}${E};`)}_isCellInSelection(S,E){const m=this._selectionStart,x=this._selectionEnd;return!(!m||!x)&&(this._columnSelectMode?m[0]<=x[0]?S>=m[0]&&E>=m[1]&&S<x[0]&&E<=x[1]:S<m[0]&&E>=m[1]&&S>=x[0]&&E<=x[1]:E>m[1]&&E<x[1]||m[1]===x[1]&&E===m[1]&&S>=m[0]&&S<x[0]||m[1]<x[1]&&E===x[1]&&S<x[0]||m[1]<x[1]&&E===m[1]&&S>=m[0])}};function b(S,E,m){for(;S.length<m;)S=E+S;return S}i.DomRendererRowFactory=g=f([p(1,o.ICharacterJoinerService),p(2,w.IOptionsService),p(3,o.ICoreBrowserService),p(4,w.ICoreService),p(5,w.IDecorationService),p(6,o.IThemeService)],g)},2550:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(a,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=a.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const p=a.createElement("span");p.classList.add("xterm-char-measure-element");const h=a.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const v=a.createElement("span");v.classList.add("xterm-char-measure-element"),v.style.fontStyle="italic";const C=a.createElement("span");C.classList.add("xterm-char-measure-element"),C.style.fontWeight="bold",C.style.fontStyle="italic",this._measureElements=[p,h,v,C],this._container.appendChild(p),this._container.appendChild(h),this._container.appendChild(v),this._container.appendChild(C),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(a,f,p,h){a===this._font&&f===this._fontSize&&p===this._weight&&h===this._weightBold||(this._font=a,this._fontSize=f,this._weight=p,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${p}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${p}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(a,f,p){let h=0;if(!f&&!p&&a.length===1&&(h=a.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const w=this._measure(a,0);return w>0&&(this._flat[h]=w),w}let v=a;f&&(v+="B"),p&&(v+="I");let C=this._holey.get(v);if(C===void 0){let w=0;f&&(w|=1),p&&(w|=2),C=this._measure(a,w),C>0&&this._holey.set(v,C)}return C}_measure(a,f){const p=this._measureElements[f];return p.textContent=a.repeat(32),p.offsetWidth/32}}},2223:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=a(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(y,i)=>{function a(p){return 57508<=p&&p<=57558}function f(p){return p>=128512&&p<=128591||p>=127744&&p<=128511||p>=128640&&p<=128767||p>=9728&&p<=9983||p>=9984&&p<=10175||p>=65024&&p<=65039||p>=129280&&p<=129535||p>=127462&&p<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},i.isPowerlineGlyph=a,i.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},i.isEmoji=f,i.allowRescaling=function(p,h,v,C){return h===1&&v>Math.ceil(1.5*C)&&p!==void 0&&p>255&&!f(p)&&!a(p)&&!function(w){return 57344<=w&&w<=63743}(p)},i.treatGlyphAsBackgroundColor=function(p){return a(p)||function(h){return 9472<=h&&h<=9631}(p)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(p,h,v=0){return(p-(2*Math.round(h)-v))%(2*Math.round(h))}},6052:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(p,h,v,C=!1){if(this.selectionStart=h,this.selectionEnd=v,!h||!v||h[0]===v[0]&&h[1]===v[1])return void this.clear();const w=p.buffers.active.ydisp,d=h[1]-w,o=v[1]-w,c=Math.max(d,0),n=Math.min(o,p.rows-1);c>=p.rows||n<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=C,this.viewportStartRow=d,this.viewportEndRow=o,this.viewportCappedStartRow=c,this.viewportCappedEndRow=n,this.startCol=h[0],this.endCol=v[0])}isCellSelected(p,h,v){return!!this.hasSelection&&(v-=p.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&v>=this.viewportCappedStartRow&&h<this.endCol&&v<=this.viewportCappedEndRow:h<this.startCol&&v>=this.viewportCappedStartRow&&h>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new a}},456:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const a=this.selectionStart,f=this.selectionEnd;return!(!a||!f)&&(a[1]>f[1]||a[1]===f[1]&&a[0]>f[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(y,i,a){var f=this&&this.__decorate||function(n,l,g,b){var S,E=arguments.length,m=E<3?l:b===null?b=Object.getOwnPropertyDescriptor(l,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(n,l,g,b);else for(var x=n.length-1;x>=0;x--)(S=n[x])&&(m=(E<3?S(m):E>3?S(l,g,m):S(l,g))||m);return E>3&&m&&Object.defineProperty(l,g,m),m},p=this&&this.__param||function(n,l){return function(g,b){l(g,b,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const h=a(2585),v=a(8460),C=a(844);let w=i.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(n,l,g){super(),this._optionsService=g,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new c(this._optionsService))}catch{this._measureStrategy=this.register(new o(n,l,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const n=this._measureStrategy.measure();n.width===this.width&&n.height===this.height||(this.width=n.width,this.height=n.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=f([p(2,h.IOptionsService)],w);class d extends C.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(l,g){l!==void 0&&l>0&&g!==void 0&&g>0&&(this._result.width=l,this._result.height=g)}}class o extends d{constructor(l,g,b){super(),this._document=l,this._parentElement=g,this._optionsService=b,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class c extends d{constructor(l){super(),this._optionsService=l,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const g=this._ctx.measureText("W");if(!("width"in g&&"fontBoundingBoxAscent"in g&&"fontBoundingBoxDescent"in g))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const l=this._ctx.measureText("W");return this._validateAndSet(l.width,l.fontBoundingBoxAscent+l.fontBoundingBoxDescent),this._result}}},4269:function(y,i,a){var f=this&&this.__decorate||function(c,n,l,g){var b,S=arguments.length,E=S<3?n:g===null?g=Object.getOwnPropertyDescriptor(n,l):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,n,l,g);else for(var m=c.length-1;m>=0;m--)(b=c[m])&&(E=(S<3?b(E):S>3?b(n,l,E):b(n,l))||E);return S>3&&E&&Object.defineProperty(n,l,E),E},p=this&&this.__param||function(c,n){return function(l,g){n(l,g,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const h=a(3734),v=a(643),C=a(511),w=a(2585);class d extends h.AttributeData{constructor(n,l,g){super(),this.content=0,this.combinedData="",this.fg=n.fg,this.bg=n.bg,this.combinedData=l,this._width=g}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(n){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=d;let o=i.CharacterJoinerService=class Bd{constructor(n){this._bufferService=n,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(n){const l={id:this._nextCharacterJoinerId++,handler:n};return this._characterJoiners.push(l),l.id}deregister(n){for(let l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===n)return this._characterJoiners.splice(l,1),!0;return!1}getJoinedCharacters(n){if(this._characterJoiners.length===0)return[];const l=this._bufferService.buffer.lines.get(n);if(!l||l.length===0)return[];const g=[],b=l.translateToString(!0);let S=0,E=0,m=0,x=l.getFg(0),L=l.getBg(0);for(let M=0;M<l.getTrimmedLength();M++)if(l.loadCell(M,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==x||this._workCell.bg!==L){if(M-S>1){const R=this._getJoinedRanges(b,m,E,l,S);for(let D=0;D<R.length;D++)g.push(R[D])}S=M,m=E,x=this._workCell.fg,L=this._workCell.bg}E+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const M=this._getJoinedRanges(b,m,E,l,S);for(let R=0;R<M.length;R++)g.push(M[R])}return g}_getJoinedRanges(n,l,g,b,S){const E=n.substring(l,g);let m=[];try{m=this._characterJoiners[0].handler(E)}catch(x){console.error(x)}for(let x=1;x<this._characterJoiners.length;x++)try{const L=this._characterJoiners[x].handler(E);for(let M=0;M<L.length;M++)Bd._mergeRanges(m,L[M])}catch(L){console.error(L)}return this._stringRangesToCellRanges(m,b,S),m}_stringRangesToCellRanges(n,l,g){let b=0,S=!1,E=0,m=n[b];if(m){for(let x=g;x<this._bufferService.cols;x++){const L=l.getWidth(x),M=l.getString(x).length||v.WHITESPACE_CELL_CHAR.length;if(L!==0){if(!S&&m[0]<=E&&(m[0]=x,S=!0),m[1]<=E){if(m[1]=x,m=n[++b],!m)break;m[0]<=E?(m[0]=x,S=!0):S=!1}E+=M}}m&&(m[1]=this._bufferService.cols)}}static _mergeRanges(n,l){let g=!1;for(let b=0;b<n.length;b++){const S=n[b];if(g){if(l[1]<=S[0])return n[b-1][1]=l[1],n;if(l[1]<=S[1])return n[b-1][1]=Math.max(l[1],S[1]),n.splice(b,1),n;n.splice(b,1),b--}else{if(l[1]<=S[0])return n.splice(b,0,l),n;if(l[1]<=S[1])return S[0]=Math.min(l[0],S[0]),n;l[0]<S[1]&&(S[0]=Math.min(l[0],S[0]),g=!0)}}return g?n[n.length-1][1]=l[1]:n.push(l),n}};i.CharacterJoinerService=o=f([p(0,w.IBufferService)],o)},5114:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0;const f=a(844),p=a(8460),h=a(3656);class v extends f.Disposable{constructor(d,o,c){super(),this._textarea=d,this._window=o,this.mainDocument=c,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new C(this._window),this._onDprChange=this.register(new p.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new p.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(n=>this._screenDprMonitor.setWindow(n))),this.register((0,p.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(d){this._window!==d&&(this._window=d,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}i.CoreBrowserService=v;class C extends f.Disposable{constructor(d){super(),this._parentWindow=d,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new p.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(d){this._parentWindow=d,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var d;this._outerListener&&((d=this._resolutionMediaMatchList)==null||d.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkProviderService=void 0;const f=a(844);class p extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(v){return this.linkProviders.push(v),{dispose:()=>{const C=this.linkProviders.indexOf(v);C!==-1&&this.linkProviders.splice(C,1)}}}}i.LinkProviderService=p},8934:function(y,i,a){var f=this&&this.__decorate||function(w,d,o,c){var n,l=arguments.length,g=l<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(w,d,o,c);else for(var b=w.length-1;b>=0;b--)(n=w[b])&&(g=(l<3?n(g):l>3?n(d,o,g):n(d,o))||g);return l>3&&g&&Object.defineProperty(d,o,g),g},p=this&&this.__param||function(w,d){return function(o,c){d(o,c,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const h=a(4725),v=a(9806);let C=i.MouseService=class{constructor(w,d){this._renderService=w,this._charSizeService=d}getCoords(w,d,o,c,n){return(0,v.getCoords)(window,w,d,o,c,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,n)}getMouseReportCoords(w,d){const o=(0,v.getCoordsRelativeToElement)(window,w,d);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};i.MouseService=C=f([p(0,h.IRenderService),p(1,h.ICharSizeService)],C)},3230:function(y,i,a){var f=this&&this.__decorate||function(n,l,g,b){var S,E=arguments.length,m=E<3?l:b===null?b=Object.getOwnPropertyDescriptor(l,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(n,l,g,b);else for(var x=n.length-1;x>=0;x--)(S=n[x])&&(m=(E<3?S(m):E>3?S(l,g,m):S(l,g))||m);return E>3&&m&&Object.defineProperty(l,g,m),m},p=this&&this.__param||function(n,l){return function(g,b){l(g,b,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const h=a(6193),v=a(4725),C=a(8460),w=a(844),d=a(7226),o=a(2585);let c=i.RenderService=class extends w.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(n,l,g,b,S,E,m,x){super(),this._rowCount=n,this._charSizeService=b,this._renderer=this.register(new w.MutableDisposable),this._pausedResizeTask=new d.DebouncedIdleTask,this._observerDisposable=this.register(new w.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new C.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new C.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new C.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new C.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer((L,M)=>this._renderRows(L,M),m),this.register(this._renderDebouncer),this.register(m.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(E.onResize(()=>this._fullRefresh())),this.register(E.buffers.onBufferActivate(()=>{var L;return(L=this._renderer.value)==null?void 0:L.clear()})),this.register(g.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(g.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(E.cols,E.rows),this._fullRefresh()})),this.register(g.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(E.buffer.y,E.buffer.y,!0))),this.register(x.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(m.window,l),this.register(m.onWindowChange(L=>this._registerIntersectionObserver(L,l)))}_registerIntersectionObserver(n,l){if("IntersectionObserver"in n){const g=new n.IntersectionObserver(b=>this._handleIntersectionChange(b[b.length-1]),{threshold:0});g.observe(l),this._observerDisposable.value=(0,w.toDisposable)(()=>g.disconnect())}}_handleIntersectionChange(n){this._isPaused=n.isIntersecting===void 0?n.intersectionRatio===0:!n.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(n,l,g=!1){this._isPaused?this._needsFullRefresh=!0:(g||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(n,l,this._rowCount))}_renderRows(n,l){this._renderer.value&&(n=Math.min(n,this._rowCount-1),l=Math.min(l,this._rowCount-1),this._renderer.value.renderRows(n,l),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:n,end:l}),this._onRender.fire({start:n,end:l}),this._isNextRenderRedrawOnly=!0)}resize(n,l){this._rowCount=l,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(n){this._renderer.value=n,this._renderer.value&&(this._renderer.value.onRequestRedraw(l=>this.refreshRows(l.start,l.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(n){return this._renderDebouncer.addRefreshCallback(n)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var n,l;this._renderer.value&&((l=(n=this._renderer.value).clearTextureAtlas)==null||l.call(n),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(n,l){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var g;return(g=this._renderer.value)==null?void 0:g.handleResize(n,l)}):this._renderer.value.handleResize(n,l),this._fullRefresh())}handleCharSizeChanged(){var n;(n=this._renderer.value)==null||n.handleCharSizeChanged()}handleBlur(){var n;(n=this._renderer.value)==null||n.handleBlur()}handleFocus(){var n;(n=this._renderer.value)==null||n.handleFocus()}handleSelectionChanged(n,l,g){var b;this._selectionState.start=n,this._selectionState.end=l,this._selectionState.columnSelectMode=g,(b=this._renderer.value)==null||b.handleSelectionChanged(n,l,g)}handleCursorMove(){var n;(n=this._renderer.value)==null||n.handleCursorMove()}clear(){var n;(n=this._renderer.value)==null||n.clear()}};i.RenderService=c=f([p(2,o.IOptionsService),p(3,v.ICharSizeService),p(4,o.IDecorationService),p(5,o.IBufferService),p(6,v.ICoreBrowserService),p(7,v.IThemeService)],c)},9312:function(y,i,a){var f=this&&this.__decorate||function(m,x,L,M){var R,D=arguments.length,P=D<3?x:M===null?M=Object.getOwnPropertyDescriptor(x,L):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(m,x,L,M);else for(var z=m.length-1;z>=0;z--)(R=m[z])&&(P=(D<3?R(P):D>3?R(x,L,P):R(x,L))||P);return D>3&&P&&Object.defineProperty(x,L,P),P},p=this&&this.__param||function(m,x){return function(L,M){x(L,M,m)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const h=a(9806),v=a(9504),C=a(456),w=a(4725),d=a(8460),o=a(844),c=a(6114),n=a(4841),l=a(511),g=a(2585),b="",S=new RegExp(b,"g");let E=i.SelectionService=class extends o.Disposable{constructor(m,x,L,M,R,D,P,z,H){super(),this._element=m,this._screenElement=x,this._linkifier=L,this._bufferService=M,this._coreService=R,this._mouseService=D,this._optionsService=P,this._renderService=z,this._coreBrowserService=H,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new d.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new d.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new d.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=N=>this._handleMouseMove(N),this._mouseUpListener=N=>this._handleMouseUp(N),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(N=>this._handleTrim(N)),this.register(this._bufferService.buffers.onBufferActivate(N=>this._handleBufferActivate(N))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const m=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!m||!x||m[0]===x[0]&&m[1]===x[1])}get selectionText(){const m=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!m||!x)return"";const L=this._bufferService.buffer,M=[];if(this._activeSelectionMode===3){if(m[0]===x[0])return"";const R=m[0]<x[0]?m[0]:x[0],D=m[0]<x[0]?x[0]:m[0];for(let P=m[1];P<=x[1];P++){const z=L.translateBufferLineToString(P,!0,R,D);M.push(z)}}else{const R=m[1]===x[1]?x[0]:void 0;M.push(L.translateBufferLineToString(m[1],!0,m[0],R));for(let D=m[1]+1;D<=x[1]-1;D++){const P=L.lines.get(D),z=L.translateBufferLineToString(D,!0);P!=null&&P.isWrapped?M[M.length-1]+=z:M.push(z)}if(m[1]!==x[1]){const D=L.lines.get(x[1]),P=L.translateBufferLineToString(x[1],!0,0,x[0]);D&&D.isWrapped?M[M.length-1]+=P:M.push(P)}}return M.map(R=>R.replace(S," ")).join(c.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(m){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),c.isLinux&&m&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(m){const x=this._getMouseBufferCoords(m),L=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!!(L&&M&&x)&&this._areCoordsInSelection(x,L,M)}isCellInSelection(m,x){const L=this._model.finalSelectionStart,M=this._model.finalSelectionEnd;return!(!L||!M)&&this._areCoordsInSelection([m,x],L,M)}_areCoordsInSelection(m,x,L){return m[1]>x[1]&&m[1]<L[1]||x[1]===L[1]&&m[1]===x[1]&&m[0]>=x[0]&&m[0]<L[0]||x[1]<L[1]&&m[1]===L[1]&&m[0]<L[0]||x[1]<L[1]&&m[1]===x[1]&&m[0]>=x[0]}_selectWordAtCursor(m,x){var R,D;const L=(D=(R=this._linkifier.currentLink)==null?void 0:R.link)==null?void 0:D.range;if(L)return this._model.selectionStart=[L.start.x-1,L.start.y-1],this._model.selectionStartLength=(0,n.getRangeLength)(L,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const M=this._getMouseBufferCoords(m);return!!M&&(this._selectWordAt(M,x),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(m,x){this._model.clearSelection(),m=Math.max(m,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,m],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()}_handleTrim(m){this._model.handleTrim(m)&&this.refresh()}_getMouseBufferCoords(m){const x=this._mouseService.getCoords(m,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x}_getMouseEventScrollAmount(m){let x=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,m,this._screenElement)[1];const L=this._renderService.dimensions.css.canvas.height;return x>=0&&x<=L?0:(x>L&&(x-=L),x=Math.min(Math.max(x,-50),50),x/=50,x/Math.abs(x)+Math.round(14*x))}shouldForceSelection(m){return c.isMac?m.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:m.shiftKey}handleMouseDown(m){if(this._mouseDownTimeStamp=m.timeStamp,(m.button!==2||!this.hasSelection)&&m.button===0){if(!this._enabled){if(!this.shouldForceSelection(m))return;m.stopPropagation()}m.preventDefault(),this._dragScrollAmount=0,this._enabled&&m.shiftKey?this._handleIncrementalClick(m):m.detail===1?this._handleSingleClick(m):m.detail===2?this._handleDoubleClick(m):m.detail===3&&this._handleTripleClick(m),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(m){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(m))}_handleSingleClick(m){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(m)?3:0,this._model.selectionStart=this._getMouseBufferCoords(m),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(m){this._selectWordAtCursor(m,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(m){const x=this._getMouseBufferCoords(m);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))}shouldColumnSelect(m){return m.altKey&&!(c.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(m){if(m.stopImmediatePropagation(),!this._model.selectionStart)return;const x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(m),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(m),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const L=this._bufferService.buffer;if(this._model.selectionEnd[1]<L.lines.length){const M=L.lines.get(this._model.selectionEnd[1]);M&&M.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const m=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(m.ydisp+this._bufferService.rows,m.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=m.ydisp),this.refresh()}}_handleMouseUp(m){const x=m.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&m.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const L=this._mouseService.getCoords(m,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(L&&L[0]!==void 0&&L[1]!==void 0){const M=(0,v.moveToCellSequence)(L[0]-1,L[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(M,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const m=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,L=!(!m||!x||m[0]===x[0]&&m[1]===x[1]);L?m&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&m[0]===this._oldSelectionStart[0]&&m[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(m,x,L)):this._oldHasSelection&&this._fireOnSelectionChange(m,x,L)}_fireOnSelectionChange(m,x,L){this._oldSelectionStart=m,this._oldSelectionEnd=x,this._oldHasSelection=L,this._onSelectionChange.fire()}_handleBufferActivate(m){this.clearSelection(),this._trimListener.dispose(),this._trimListener=m.activeBuffer.lines.onTrim(x=>this._handleTrim(x))}_convertViewportColToCharacterIndex(m,x){let L=x;for(let M=0;x>=M;M++){const R=m.loadCell(M,this._workCell).getChars().length;this._workCell.getWidth()===0?L--:R>1&&x!==M&&(L+=R-1)}return L}setSelection(m,x,L){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[m,x],this._model.selectionStartLength=L,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(m){this._isClickInSelection(m)||(this._selectWordAtCursor(m,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(m,x,L=!0,M=!0){if(m[0]>=this._bufferService.cols)return;const R=this._bufferService.buffer,D=R.lines.get(m[1]);if(!D)return;const P=R.translateBufferLineToString(m[1],!1);let z=this._convertViewportColToCharacterIndex(D,m[0]),H=z;const N=m[0]-z;let O=0,k=0,A=0,B=0;if(P.charAt(z)===" "){for(;z>0&&P.charAt(z-1)===" ";)z--;for(;H<P.length&&P.charAt(H+1)===" ";)H++}else{let V=m[0],Q=m[0];D.getWidth(V)===0&&(O++,V--),D.getWidth(Q)===2&&(k++,Q++);const X=D.getString(Q).length;for(X>1&&(B+=X-1,H+=X-1);V>0&&z>0&&!this._isCharWordSeparator(D.loadCell(V-1,this._workCell));){D.loadCell(V-1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===0?(O++,V--):F>1&&(A+=F-1,z-=F-1),z--,V--}for(;Q<D.length&&H+1<P.length&&!this._isCharWordSeparator(D.loadCell(Q+1,this._workCell));){D.loadCell(Q+1,this._workCell);const F=this._workCell.getChars().length;this._workCell.getWidth()===2?(k++,Q++):F>1&&(B+=F-1,H+=F-1),H++,Q++}}H++;let I=z+N-O+A,U=Math.min(this._bufferService.cols,H-z+O+k-A-B);if(x||P.slice(z,H).trim()!==""){if(L&&I===0&&D.getCodePoint(0)!==32){const V=R.lines.get(m[1]-1);if(V&&D.isWrapped&&V.getCodePoint(this._bufferService.cols-1)!==32){const Q=this._getWordAt([this._bufferService.cols-1,m[1]-1],!1,!0,!1);if(Q){const X=this._bufferService.cols-Q.start;I-=X,U+=X}}}if(M&&I+U===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const V=R.lines.get(m[1]+1);if(V!=null&&V.isWrapped&&V.getCodePoint(0)!==32){const Q=this._getWordAt([0,m[1]+1],!1,!1,!0);Q&&(U+=Q.length)}}return{start:I,length:U}}}_selectWordAt(m,x){const L=this._getWordAt(m,x);if(L){for(;L.start<0;)L.start+=this._bufferService.cols,m[1]--;this._model.selectionStart=[L.start,m[1]],this._model.selectionStartLength=L.length}}_selectToWordAt(m){const x=this._getWordAt(m,!0);if(x){let L=m[1];for(;x.start<0;)x.start+=this._bufferService.cols,L--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,L++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,L]}}_isCharWordSeparator(m){return m.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(m.getChars())>=0}_selectLineAt(m){const x=this._bufferService.buffer.getWrappedRangeForLine(m),L={start:{x:0,y:x.first},end:{x:this._bufferService.cols-1,y:x.last}};this._model.selectionStart=[0,x.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,n.getRangeLength)(L,this._bufferService.cols)}};i.SelectionService=E=f([p(3,g.IBufferService),p(4,g.ICoreService),p(5,w.IMouseService),p(6,g.IOptionsService),p(7,w.IRenderService),p(8,w.ICoreBrowserService)],E)},4725:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ILinkProviderService=i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const f=a(8343);i.ICharSizeService=(0,f.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),i.IMouseService=(0,f.createDecorator)("MouseService"),i.IRenderService=(0,f.createDecorator)("RenderService"),i.ISelectionService=(0,f.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,f.createDecorator)("ThemeService"),i.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(y,i,a){var f=this&&this.__decorate||function(E,m,x,L){var M,R=arguments.length,D=R<3?m:L===null?L=Object.getOwnPropertyDescriptor(m,x):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(E,m,x,L);else for(var P=E.length-1;P>=0;P--)(M=E[P])&&(D=(R<3?M(D):R>3?M(m,x,D):M(m,x))||D);return R>3&&D&&Object.defineProperty(m,x,D),D},p=this&&this.__param||function(E,m){return function(x,L){m(x,L,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const h=a(7239),v=a(8055),C=a(8460),w=a(844),d=a(2585),o=v.css.toColor("#ffffff"),c=v.css.toColor("#000000"),n=v.css.toColor("#ffffff"),l=v.css.toColor("#000000"),g={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const E=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],m=[0,95,135,175,215,255];for(let x=0;x<216;x++){const L=m[x/36%6|0],M=m[x/6%6|0],R=m[x%6];E.push({css:v.channels.toCss(L,M,R),rgba:v.channels.toRgba(L,M,R)})}for(let x=0;x<24;x++){const L=8+10*x;E.push({css:v.channels.toCss(L,L,L),rgba:v.channels.toRgba(L,L,L)})}return E})());let b=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(E){super(),this._optionsService=E,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:c,cursor:n,cursorAccent:l,selectionForeground:void 0,selectionBackgroundTransparent:g,selectionBackgroundOpaque:v.color.blend(c,g),selectionInactiveBackgroundTransparent:g,selectionInactiveBackgroundOpaque:v.color.blend(c,g),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(E={}){const m=this._colors;if(m.foreground=S(E.foreground,o),m.background=S(E.background,c),m.cursor=S(E.cursor,n),m.cursorAccent=S(E.cursorAccent,l),m.selectionBackgroundTransparent=S(E.selectionBackground,g),m.selectionBackgroundOpaque=v.color.blend(m.background,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundTransparent=S(E.selectionInactiveBackground,m.selectionBackgroundTransparent),m.selectionInactiveBackgroundOpaque=v.color.blend(m.background,m.selectionInactiveBackgroundTransparent),m.selectionForeground=E.selectionForeground?S(E.selectionForeground,v.NULL_COLOR):void 0,m.selectionForeground===v.NULL_COLOR&&(m.selectionForeground=void 0),v.color.isOpaque(m.selectionBackgroundTransparent)&&(m.selectionBackgroundTransparent=v.color.opacity(m.selectionBackgroundTransparent,.3)),v.color.isOpaque(m.selectionInactiveBackgroundTransparent)&&(m.selectionInactiveBackgroundTransparent=v.color.opacity(m.selectionInactiveBackgroundTransparent,.3)),m.ansi=i.DEFAULT_ANSI_COLORS.slice(),m.ansi[0]=S(E.black,i.DEFAULT_ANSI_COLORS[0]),m.ansi[1]=S(E.red,i.DEFAULT_ANSI_COLORS[1]),m.ansi[2]=S(E.green,i.DEFAULT_ANSI_COLORS[2]),m.ansi[3]=S(E.yellow,i.DEFAULT_ANSI_COLORS[3]),m.ansi[4]=S(E.blue,i.DEFAULT_ANSI_COLORS[4]),m.ansi[5]=S(E.magenta,i.DEFAULT_ANSI_COLORS[5]),m.ansi[6]=S(E.cyan,i.DEFAULT_ANSI_COLORS[6]),m.ansi[7]=S(E.white,i.DEFAULT_ANSI_COLORS[7]),m.ansi[8]=S(E.brightBlack,i.DEFAULT_ANSI_COLORS[8]),m.ansi[9]=S(E.brightRed,i.DEFAULT_ANSI_COLORS[9]),m.ansi[10]=S(E.brightGreen,i.DEFAULT_ANSI_COLORS[10]),m.ansi[11]=S(E.brightYellow,i.DEFAULT_ANSI_COLORS[11]),m.ansi[12]=S(E.brightBlue,i.DEFAULT_ANSI_COLORS[12]),m.ansi[13]=S(E.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),m.ansi[14]=S(E.brightCyan,i.DEFAULT_ANSI_COLORS[14]),m.ansi[15]=S(E.brightWhite,i.DEFAULT_ANSI_COLORS[15]),E.extendedAnsi){const x=Math.min(m.ansi.length-16,E.extendedAnsi.length);for(let L=0;L<x;L++)m.ansi[L+16]=S(E.extendedAnsi[L],i.DEFAULT_ANSI_COLORS[L+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(E){this._restoreColor(E),this._onChangeColors.fire(this.colors)}_restoreColor(E){if(E!==void 0)switch(E){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[E]=this._restoreColors.ansi[E]}else for(let m=0;m<this._restoreColors.ansi.length;++m)this._colors.ansi[m]=this._restoreColors.ansi[m]}modifyColors(E){E(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(E,m){if(E!==void 0)try{return v.css.toColor(E)}catch{}return m}i.ThemeService=b=f([p(0,d.IOptionsService)],b)},6349:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const f=a(8460),p=a(844);class h extends p.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const w=new Array(C);for(let d=0;d<Math.min(C,this.length);d++)w[d]=this._array[this._getCyclicIndex(d)];this._array=w,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let w=this._length;w<C;w++)this._array[w]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,w){this._array[this._getCyclicIndex(C)]=w}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,w,...d){if(w){for(let o=C;o<this._length-w;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+w)];this._length-=w,this.onDeleteEmitter.fire({index:C,amount:w})}for(let o=this._length-1;o>=C;o--)this._array[this._getCyclicIndex(o+d.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<d.length;o++)this._array[this._getCyclicIndex(C+o)]=d[o];if(d.length&&this.onInsertEmitter.fire({index:C,amount:d.length}),this._length+d.length>this._maxLength){const o=this._length+d.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=d.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,w,d){if(!(w<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+d<0)throw new Error("Cannot shift elements in list beyond index 0");if(d>0){for(let c=w-1;c>=0;c--)this.set(C+c+d,this.get(C+c));const o=C+w+d-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<w;o++)this.set(C+o+d,this.get(C+o))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}i.CircularList=h},1439:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function a(f,p=5){if(typeof f!="object")return f;const h=Array.isArray(f)?[]:{};for(const v in f)h[v]=p<=1?f[v]:f[v]&&a(f[v],p-1);return h}},8055:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let a=0,f=0,p=0,h=0;var v,C,w,d,o;function c(l){const g=l.toString(16);return g.length<2?"0"+g:g}function n(l,g){return l<g?(g+.05)/(l+.05):(l+.05)/(g+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(g,b,S,E){return E!==void 0?`#${c(g)}${c(b)}${c(S)}${c(E)}`:`#${c(g)}${c(b)}${c(S)}`},l.toRgba=function(g,b,S,E=255){return(g<<24|b<<16|S<<8|E)>>>0},l.toColor=function(g,b,S,E){return{css:l.toCss(g,b,S,E),rgba:l.toRgba(g,b,S,E)}}}(v||(i.channels=v={})),function(l){function g(b,S){return h=Math.round(255*S),[a,f,p]=o.toChannels(b.rgba),{css:v.toCss(a,f,p,h),rgba:v.toRgba(a,f,p,h)}}l.blend=function(b,S){if(h=(255&S.rgba)/255,h===1)return{css:S.css,rgba:S.rgba};const E=S.rgba>>24&255,m=S.rgba>>16&255,x=S.rgba>>8&255,L=b.rgba>>24&255,M=b.rgba>>16&255,R=b.rgba>>8&255;return a=L+Math.round((E-L)*h),f=M+Math.round((m-M)*h),p=R+Math.round((x-R)*h),{css:v.toCss(a,f,p),rgba:v.toRgba(a,f,p)}},l.isOpaque=function(b){return(255&b.rgba)==255},l.ensureContrastRatio=function(b,S,E){const m=o.ensureContrastRatio(b.rgba,S.rgba,E);if(m)return v.toColor(m>>24&255,m>>16&255,m>>8&255)},l.opaque=function(b){const S=(255|b.rgba)>>>0;return[a,f,p]=o.toChannels(S),{css:v.toCss(a,f,p),rgba:S}},l.opacity=g,l.multiplyOpacity=function(b,S){return h=255&b.rgba,g(b,h*S/255)},l.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}}(C||(i.color=C={})),function(l){let g,b;try{const S=document.createElement("canvas");S.width=1,S.height=1;const E=S.getContext("2d",{willReadFrequently:!0});E&&(g=E,g.globalCompositeOperation="copy",b=g.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return a=parseInt(S.slice(1,2).repeat(2),16),f=parseInt(S.slice(2,3).repeat(2),16),p=parseInt(S.slice(3,4).repeat(2),16),v.toColor(a,f,p);case 5:return a=parseInt(S.slice(1,2).repeat(2),16),f=parseInt(S.slice(2,3).repeat(2),16),p=parseInt(S.slice(3,4).repeat(2),16),h=parseInt(S.slice(4,5).repeat(2),16),v.toColor(a,f,p,h);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const E=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return a=parseInt(E[1]),f=parseInt(E[2]),p=parseInt(E[3]),h=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),v.toColor(a,f,p,h);if(!g||!b)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=b,g.fillStyle=S,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[a,f,p,h]=g.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(a,f,p,h),css:S}}}(w||(i.css=w={})),function(l){function g(b,S,E){const m=b/255,x=S/255,L=E/255;return .2126*(m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}l.relativeLuminance=function(b){return g(b>>16&255,b>>8&255,255&b)},l.relativeLuminance2=g}(d||(i.rgb=d={})),function(l){function g(S,E,m){const x=S>>24&255,L=S>>16&255,M=S>>8&255;let R=E>>24&255,D=E>>16&255,P=E>>8&255,z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));for(;z<m&&(R>0||D>0||P>0);)R-=Math.max(0,Math.ceil(.1*R)),D-=Math.max(0,Math.ceil(.1*D)),P-=Math.max(0,Math.ceil(.1*P)),z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));return(R<<24|D<<16|P<<8|255)>>>0}function b(S,E,m){const x=S>>24&255,L=S>>16&255,M=S>>8&255;let R=E>>24&255,D=E>>16&255,P=E>>8&255,z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));for(;z<m&&(R<255||D<255||P<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),D=Math.min(255,D+Math.ceil(.1*(255-D))),P=Math.min(255,P+Math.ceil(.1*(255-P))),z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));return(R<<24|D<<16|P<<8|255)>>>0}l.blend=function(S,E){if(h=(255&E)/255,h===1)return E;const m=E>>24&255,x=E>>16&255,L=E>>8&255,M=S>>24&255,R=S>>16&255,D=S>>8&255;return a=M+Math.round((m-M)*h),f=R+Math.round((x-R)*h),p=D+Math.round((L-D)*h),v.toRgba(a,f,p)},l.ensureContrastRatio=function(S,E,m){const x=d.relativeLuminance(S>>8),L=d.relativeLuminance(E>>8);if(n(x,L)<m){if(L<x){const D=g(S,E,m),P=n(x,d.relativeLuminance(D>>8));if(P<m){const z=b(S,E,m);return P>n(x,d.relativeLuminance(z>>8))?D:z}return D}const M=b(S,E,m),R=n(x,d.relativeLuminance(M>>8));if(R<m){const D=g(S,E,m);return R>n(x,d.relativeLuminance(D>>8))?M:D}return M}},l.reduceLuminance=g,l.increaseLuminance=b,l.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(o||(i.rgba=o={})),i.toPaddedHex=c,i.contrastRatio=n},8969:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const f=a(844),p=a(2585),h=a(4348),v=a(7866),C=a(744),w=a(7302),d=a(6975),o=a(8460),c=a(1753),n=a(1480),l=a(7994),g=a(9282),b=a(5435),S=a(5981),E=a(2660);let m=!1;class x extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event(M=>{var R;(R=this._onScrollApi)==null||R.fire(M.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(M){for(const R in M)this.optionsService.options[R]=M[R]}constructor(M){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new w.OptionsService(M)),this._instantiationService.setService(p.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(p.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(p.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(d.CoreService)),this._instantiationService.setService(p.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(c.CoreMouseService)),this._instantiationService.setService(p.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(n.UnicodeService)),this._instantiationService.setService(p.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(l.CharsetService),this._instantiationService.setService(p.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(E.OscLinkService),this._instantiationService.setService(p.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(R=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new S.WriteBuffer((R,D)=>this._inputHandler.parse(R,D))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(M,R){this._writeBuffer.write(M,R)}writeSync(M,R){this._logService.logLevel<=p.LogLevelEnum.WARN&&!m&&(this._logService.warn("writeSync is unreliable and will be removed soon."),m=!0),this._writeBuffer.writeSync(M,R)}input(M,R=!0){this.coreService.triggerDataEvent(M,R)}resize(M,R){isNaN(M)||isNaN(R)||(M=Math.max(M,C.MINIMUM_COLS),R=Math.max(R,C.MINIMUM_ROWS),this._bufferService.resize(M,R))}scroll(M,R=!1){this._bufferService.scroll(M,R)}scrollLines(M,R,D){this._bufferService.scrollLines(M,R,D)}scrollPages(M){this.scrollLines(M*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(M){const R=M-this._bufferService.buffer.ydisp;R!==0&&this.scrollLines(R)}registerEscHandler(M,R){return this._inputHandler.registerEscHandler(M,R)}registerDcsHandler(M,R){return this._inputHandler.registerDcsHandler(M,R)}registerCsiHandler(M,R){return this._inputHandler.registerCsiHandler(M,R)}registerOscHandler(M,R){return this._inputHandler.registerOscHandler(M,R)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let M=!1;const R=this.optionsService.rawOptions.windowsPty;R&&R.buildNumber!==void 0&&R.buildNumber!==void 0?M=R.backend==="conpty"&&R.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(M=!0),M?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const M=[];M.push(this.onLineFeed(g.updateWindowsModeWrappedState.bind(null,this._bufferService))),M.push(this.registerCsiHandler({final:"H"},()=>((0,g.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const R of M)R.dispose()})}}}i.CoreTerminal=x},8460:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===a)return void this._listeners.splice(f,1)}}})),this._event}fire(a,f){const p=[];for(let h=0;h<this._listeners.length;h++)p.push(this._listeners[h]);for(let h=0;h<p.length;h++)p[h].call(void 0,a,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(a,f){return a(p=>f.fire(p))},i.runAndSubscribe=function(a,f){return f(void 0),a(p=>f(p))}},5435:function(y,i,a){var f=this&&this.__decorate||function(O,k,A,B){var I,U=arguments.length,V=U<3?k:B===null?B=Object.getOwnPropertyDescriptor(k,A):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(O,k,A,B);else for(var Q=O.length-1;Q>=0;Q--)(I=O[Q])&&(V=(U<3?I(V):U>3?I(k,A,V):I(k,A))||V);return U>3&&V&&Object.defineProperty(k,A,V),V},p=this&&this.__param||function(O,k){return function(A,B){k(A,B,O)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const h=a(2584),v=a(7116),C=a(2015),w=a(844),d=a(482),o=a(8437),c=a(8460),n=a(643),l=a(511),g=a(3734),b=a(2585),S=a(1480),E=a(6242),m=a(6351),x=a(5941),L={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function R(O,k){if(O>24)return k.setWinLines||!1;switch(O){case 1:return!!k.restoreWin;case 2:return!!k.minimizeWin;case 3:return!!k.setWinPosition;case 4:return!!k.setWinSizePixels;case 5:return!!k.raiseWin;case 6:return!!k.lowerWin;case 7:return!!k.refreshWin;case 8:return!!k.setWinSizeChars;case 9:return!!k.maximizeWin;case 10:return!!k.fullscreenWin;case 11:return!!k.getWinState;case 13:return!!k.getWinPosition;case 14:return!!k.getWinSizePixels;case 15:return!!k.getScreenSizePixels;case 16:return!!k.getCellSizePixels;case 18:return!!k.getWinSizeChars;case 19:return!!k.getScreenSizeChars;case 20:return!!k.getIconTitle;case 21:return!!k.getWinTitle;case 22:return!!k.pushTitle;case 23:return!!k.popTitle;case 24:return!!k.setWinLines}return!1}var D;(function(O){O[O.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",O[O.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(D||(i.WindowsOptionsReportType=D={}));let P=0;class z extends w.Disposable{getAttrData(){return this._curAttrData}constructor(k,A,B,I,U,V,Q,X,F=new C.EscapeSequenceParser){super(),this._bufferService=k,this._charsetService=A,this._coreService=B,this._logService=I,this._optionsService=U,this._oscLinkService=V,this._coreMouseService=Q,this._unicodeService=X,this._parser=F,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new d.StringToUtf32,this._utf8Decoder=new d.Utf8ToUtf32,this._workCell=new l.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new c.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new c.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new c.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new c.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new c.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new c.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new c.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new c.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new c.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new c.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new c.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new H(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(T=>this._activeBuffer=T.activeBuffer)),this._parser.setCsiHandlerFallback((T,j)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(T),params:j.toArray()})}),this._parser.setEscHandlerFallback(T=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(T)})}),this._parser.setExecuteHandlerFallback(T=>{this._logService.debug("Unknown EXECUTE code: ",{code:T})}),this._parser.setOscHandlerFallback((T,j,W)=>{this._logService.debug("Unknown OSC code: ",{identifier:T,action:j,data:W})}),this._parser.setDcsHandlerFallback((T,j,W)=>{j==="HOOK"&&(W=W.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(T),action:j,payload:W})}),this._parser.setPrintHandler((T,j,W)=>this.print(T,j,W)),this._parser.registerCsiHandler({final:"@"},T=>this.insertChars(T)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},T=>this.scrollLeft(T)),this._parser.registerCsiHandler({final:"A"},T=>this.cursorUp(T)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},T=>this.scrollRight(T)),this._parser.registerCsiHandler({final:"B"},T=>this.cursorDown(T)),this._parser.registerCsiHandler({final:"C"},T=>this.cursorForward(T)),this._parser.registerCsiHandler({final:"D"},T=>this.cursorBackward(T)),this._parser.registerCsiHandler({final:"E"},T=>this.cursorNextLine(T)),this._parser.registerCsiHandler({final:"F"},T=>this.cursorPrecedingLine(T)),this._parser.registerCsiHandler({final:"G"},T=>this.cursorCharAbsolute(T)),this._parser.registerCsiHandler({final:"H"},T=>this.cursorPosition(T)),this._parser.registerCsiHandler({final:"I"},T=>this.cursorForwardTab(T)),this._parser.registerCsiHandler({final:"J"},T=>this.eraseInDisplay(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},T=>this.eraseInDisplay(T,!0)),this._parser.registerCsiHandler({final:"K"},T=>this.eraseInLine(T,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},T=>this.eraseInLine(T,!0)),this._parser.registerCsiHandler({final:"L"},T=>this.insertLines(T)),this._parser.registerCsiHandler({final:"M"},T=>this.deleteLines(T)),this._parser.registerCsiHandler({final:"P"},T=>this.deleteChars(T)),this._parser.registerCsiHandler({final:"S"},T=>this.scrollUp(T)),this._parser.registerCsiHandler({final:"T"},T=>this.scrollDown(T)),this._parser.registerCsiHandler({final:"X"},T=>this.eraseChars(T)),this._parser.registerCsiHandler({final:"Z"},T=>this.cursorBackwardTab(T)),this._parser.registerCsiHandler({final:"`"},T=>this.charPosAbsolute(T)),this._parser.registerCsiHandler({final:"a"},T=>this.hPositionRelative(T)),this._parser.registerCsiHandler({final:"b"},T=>this.repeatPrecedingCharacter(T)),this._parser.registerCsiHandler({final:"c"},T=>this.sendDeviceAttributesPrimary(T)),this._parser.registerCsiHandler({prefix:">",final:"c"},T=>this.sendDeviceAttributesSecondary(T)),this._parser.registerCsiHandler({final:"d"},T=>this.linePosAbsolute(T)),this._parser.registerCsiHandler({final:"e"},T=>this.vPositionRelative(T)),this._parser.registerCsiHandler({final:"f"},T=>this.hVPosition(T)),this._parser.registerCsiHandler({final:"g"},T=>this.tabClear(T)),this._parser.registerCsiHandler({final:"h"},T=>this.setMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"h"},T=>this.setModePrivate(T)),this._parser.registerCsiHandler({final:"l"},T=>this.resetMode(T)),this._parser.registerCsiHandler({prefix:"?",final:"l"},T=>this.resetModePrivate(T)),this._parser.registerCsiHandler({final:"m"},T=>this.charAttributes(T)),this._parser.registerCsiHandler({final:"n"},T=>this.deviceStatus(T)),this._parser.registerCsiHandler({prefix:"?",final:"n"},T=>this.deviceStatusPrivate(T)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},T=>this.softReset(T)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},T=>this.setCursorStyle(T)),this._parser.registerCsiHandler({final:"r"},T=>this.setScrollRegion(T)),this._parser.registerCsiHandler({final:"s"},T=>this.saveCursor(T)),this._parser.registerCsiHandler({final:"t"},T=>this.windowOptions(T)),this._parser.registerCsiHandler({final:"u"},T=>this.restoreCursor(T)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},T=>this.insertColumns(T)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},T=>this.deleteColumns(T)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},T=>this.selectProtected(T)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},T=>this.requestMode(T,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},T=>this.requestMode(T,!1)),this._parser.setExecuteHandler(h.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(h.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(h.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(h.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(h.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(h.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(h.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(h.C1.IND,()=>this.index()),this._parser.setExecuteHandler(h.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(h.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(T=>(this.setTitle(T),this.setIconName(T),!0))),this._parser.registerOscHandler(1,new E.OscHandler(T=>this.setIconName(T))),this._parser.registerOscHandler(2,new E.OscHandler(T=>this.setTitle(T))),this._parser.registerOscHandler(4,new E.OscHandler(T=>this.setOrReportIndexedColor(T))),this._parser.registerOscHandler(8,new E.OscHandler(T=>this.setHyperlink(T))),this._parser.registerOscHandler(10,new E.OscHandler(T=>this.setOrReportFgColor(T))),this._parser.registerOscHandler(11,new E.OscHandler(T=>this.setOrReportBgColor(T))),this._parser.registerOscHandler(12,new E.OscHandler(T=>this.setOrReportCursorColor(T))),this._parser.registerOscHandler(104,new E.OscHandler(T=>this.restoreIndexedColor(T))),this._parser.registerOscHandler(110,new E.OscHandler(T=>this.restoreFgColor(T))),this._parser.registerOscHandler(111,new E.OscHandler(T=>this.restoreBgColor(T))),this._parser.registerOscHandler(112,new E.OscHandler(T=>this.restoreCursorColor(T))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const T in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:T},()=>this.selectCharset("("+T)),this._parser.registerEscHandler({intermediates:")",final:T},()=>this.selectCharset(")"+T)),this._parser.registerEscHandler({intermediates:"*",final:T},()=>this.selectCharset("*"+T)),this._parser.registerEscHandler({intermediates:"+",final:T},()=>this.selectCharset("+"+T)),this._parser.registerEscHandler({intermediates:"-",final:T},()=>this.selectCharset("-"+T)),this._parser.registerEscHandler({intermediates:".",final:T},()=>this.selectCharset("."+T)),this._parser.registerEscHandler({intermediates:"/",final:T},()=>this.selectCharset("/"+T));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(T=>(this._logService.error("Parsing error: ",T),T)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new m.DcsHandler((T,j)=>this.requestStatusString(T,j)))}_preserveStack(k,A,B,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=k,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=B,this._parseStack.position=I}_logSlowResolvingAsync(k){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([k,new Promise((A,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(k,A){let B,I=this._activeBuffer.x,U=this._activeBuffer.y,V=0;const Q=this._parseStack.paused;if(Q){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(B),B;I=this._parseStack.cursorStartX,U=this._parseStack.cursorStartY,this._parseStack.paused=!1,k.length>M&&(V=this._parseStack.position+M)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof k=="string"?` "${k}"`:` "${Array.prototype.map.call(k,T=>String.fromCharCode(T)).join("")}"`),typeof k=="string"?k.split("").map(T=>T.charCodeAt(0)):k),this._parseBuffer.length<k.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(k.length,M))),Q||this._dirtyRowTracker.clearRange(),k.length>M)for(let T=V;T<k.length;T+=M){const j=T+M<k.length?T+M:k.length,W=typeof k=="string"?this._stringDecoder.decode(k.substring(T,j),this._parseBuffer):this._utf8Decoder.decode(k.subarray(T,j),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,W))return this._preserveStack(I,U,W,T),this._logSlowResolvingAsync(B),B}else if(!Q){const T=typeof k=="string"?this._stringDecoder.decode(k,this._parseBuffer):this._utf8Decoder.decode(k,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,T))return this._preserveStack(I,U,T,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===I&&this._activeBuffer.y===U||this._onCursorMove.fire();const X=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),F=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);F<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(F,this._bufferService.rows-1),Math.min(X,this._bufferService.rows-1))}print(k,A,B){let I,U;const V=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,X=this._bufferService.cols,F=this._coreService.decPrivateModes.wraparound,T=this._coreService.modes.insertMode,j=this._curAttrData;let W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-A>0&&W.getWidth(this._activeBuffer.x-1)===2&&W.setCellFromCodepoint(this._activeBuffer.x-1,0,1,j);let Y=this._parser.precedingJoinState;for(let q=A;q<B;++q){if(I=k[q],I<127&&V){const fe=V[String.fromCharCode(I)];fe&&(I=fe.charCodeAt(0))}const re=this._unicodeService.charProperties(I,Y);U=S.UnicodeService.extractWidth(re);const ee=S.UnicodeService.extractShouldJoin(re),ce=ee?S.UnicodeService.extractWidth(Y):0;if(Y=re,Q&&this._onA11yChar.fire((0,d.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+U-ce>X){if(F){const fe=W;let te=this._activeBuffer.x-ce;for(this._activeBuffer.x=ce,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),W=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),ce>0&&W instanceof o.BufferLine&&W.copyCellsFrom(fe,te,0,ce,!1);te<X;)fe.setCellFromCodepoint(te++,0,1,j)}else if(this._activeBuffer.x=X-1,U===2)continue}if(ee&&this._activeBuffer.x){const fe=W.getWidth(this._activeBuffer.x-1)?1:2;W.addCodepointToCell(this._activeBuffer.x-fe,I,U);for(let te=U-ce;--te>=0;)W.setCellFromCodepoint(this._activeBuffer.x++,0,0,j)}else if(T&&(W.insertCells(this._activeBuffer.x,U-ce,this._activeBuffer.getNullCell(j)),W.getWidth(X-1)===2&&W.setCellFromCodepoint(X-1,n.NULL_CELL_CODE,n.NULL_CELL_WIDTH,j)),W.setCellFromCodepoint(this._activeBuffer.x++,I,U,j),U>0)for(;--U;)W.setCellFromCodepoint(this._activeBuffer.x++,0,0,j)}this._parser.precedingJoinState=Y,this._activeBuffer.x<X&&B-A>0&&W.getWidth(this._activeBuffer.x)===0&&!W.hasContent(this._activeBuffer.x)&&W.setCellFromCodepoint(this._activeBuffer.x,0,1,j),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(k,A){return k.final!=="t"||k.prefix||k.intermediates?this._parser.registerCsiHandler(k,A):this._parser.registerCsiHandler(k,B=>!R(B.params[0],this._optionsService.rawOptions.windowOptions)||A(B))}registerDcsHandler(k,A){return this._parser.registerDcsHandler(k,new m.DcsHandler(A))}registerEscHandler(k,A){return this._parser.registerEscHandler(k,A)}registerOscHandler(k,A){return this._parser.registerOscHandler(k,new E.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var k;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((k=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&k.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const k=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-k),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(k=this._bufferService.cols-1){this._activeBuffer.x=Math.min(k,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(k,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=k,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=k,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(k,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+k,this._activeBuffer.y+A)}cursorUp(k){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,k.params[0]||1)):this._moveCursor(0,-(k.params[0]||1)),!0}cursorDown(k){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,k.params[0]||1)):this._moveCursor(0,k.params[0]||1),!0}cursorForward(k){return this._moveCursor(k.params[0]||1,0),!0}cursorBackward(k){return this._moveCursor(-(k.params[0]||1),0),!0}cursorNextLine(k){return this.cursorDown(k),this._activeBuffer.x=0,!0}cursorPrecedingLine(k){return this.cursorUp(k),this._activeBuffer.x=0,!0}cursorCharAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(k){return this._setCursor(k.length>=2?(k.params[1]||1)-1:0,(k.params[0]||1)-1),!0}charPosAbsolute(k){return this._setCursor((k.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(k){return this._moveCursor(k.params[0]||1,0),!0}linePosAbsolute(k){return this._setCursor(this._activeBuffer.x,(k.params[0]||1)-1),!0}vPositionRelative(k){return this._moveCursor(0,k.params[0]||1),!0}hVPosition(k){return this.cursorPosition(k),!0}tabClear(k){const A=k.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=k.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(k){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=k.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(k){const A=k.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(k,A,B,I=!1,U=!1){const V=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);V.replaceCells(A,B,this._activeBuffer.getNullCell(this._eraseAttrData()),U),I&&(V.isWrapped=!1)}_resetBufferLine(k,A=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+k);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+k),B.isWrapped=!1)}eraseInDisplay(k,A=!1){let B;switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);B<this._bufferService.rows;B++)this._resetBufferLine(B,A);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,A);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(k,A=!1){switch(this._restrictCursor(this._bufferService.cols),k.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(k){this._restrictCursor();let A=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;A--;)this._activeBuffer.lines.splice(U-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(k){this._restrictCursor();let A=k.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;A--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,k.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(k){let A=k.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(k){let A=k.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(k){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=k.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(k){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(k.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(k){const A=this._parser.precedingJoinState;if(!A)return!0;const B=k.params[0]||1,I=S.UnicodeService.extractWidth(A),U=this._activeBuffer.x-I,V=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(U),Q=new Uint32Array(V.length*B);let X=0;for(let T=0;T<V.length;){const j=V.codePointAt(T)||0;Q[X++]=j,T+=j>65535?2:1}let F=X;for(let T=1;T<B;++T)Q.copyWithin(F,0,X),F+=X;return this.print(Q,0,F),!0}sendDeviceAttributesPrimary(k){return k.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(k){return k.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(k.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(k){return(this._optionsService.rawOptions.termName+"").indexOf(k)===0}setMode(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(k){for(let A=0;A<k.length;A++)switch(k.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),k.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(k,A){const B=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:U}=this._coreMouseService,V=this._coreService,{buffers:Q,cols:X}=this._bufferService,{active:F,alt:T}=Q,j=this._optionsService.rawOptions,W=ee=>ee?1:2,Y=k.params[0];return q=Y,re=A?Y===2?4:Y===4?W(V.modes.insertMode):Y===12?3:Y===20?W(j.convertEol):0:Y===1?W(B.applicationCursorKeys):Y===3?j.windowOptions.setWinLines?X===80?2:X===132?1:0:0:Y===6?W(B.origin):Y===7?W(B.wraparound):Y===8?3:Y===9?W(I==="X10"):Y===12?W(j.cursorBlink):Y===25?W(!V.isCursorHidden):Y===45?W(B.reverseWraparound):Y===66?W(B.applicationKeypad):Y===67?4:Y===1e3?W(I==="VT200"):Y===1002?W(I==="DRAG"):Y===1003?W(I==="ANY"):Y===1004?W(B.sendFocus):Y===1005?4:Y===1006?W(U==="SGR"):Y===1015?4:Y===1016?W(U==="SGR_PIXELS"):Y===1048?1:Y===47||Y===1047||Y===1049?W(F===T):Y===2004?W(B.bracketedPasteMode):0,V.triggerDataEvent(`${h.C0.ESC}[${A?"":"?"}${q};${re}$y`),!0;var q,re}_updateAttrColor(k,A,B,I,U){return A===2?(k|=50331648,k&=-16777216,k|=g.AttributeData.fromColorRGB([B,I,U])):A===5&&(k&=-50331904,k|=33554432|255&B),k}_extractColor(k,A,B){const I=[0,0,-1,0,0,0];let U=0,V=0;do{if(I[V+U]=k.params[A+V],k.hasSubParams(A+V)){const Q=k.getSubParams(A+V);let X=0;do I[1]===5&&(U=1),I[V+X+1+U]=Q[X];while(++X<Q.length&&X+V+1+U<I.length);break}if(I[1]===5&&V+U>=2||I[1]===2&&V+U>=5)break;I[1]&&(U=1)}while(++V+A<k.length&&V+U<I.length);for(let Q=2;Q<I.length;++Q)I[Q]===-1&&(I[Q]=0);switch(I[0]){case 38:B.fg=this._updateAttrColor(B.fg,I[1],I[3],I[4],I[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,I[1],I[3],I[4],I[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,I[1],I[3],I[4],I[5])}return V}_processUnderline(k,A){A.extended=A.extended.clone(),(!~k||k>5)&&(k=1),A.extended.underlineStyle=k,A.fg|=268435456,k===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(k){k.fg=o.DEFAULT_ATTR_DATA.fg,k.bg=o.DEFAULT_ATTR_DATA.bg,k.extended=k.extended.clone(),k.extended.underlineStyle=0,k.extended.underlineColor&=-67108864,k.updateExtended()}charAttributes(k){if(k.length===1&&k.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=k.length;let B;const I=this._curAttrData;for(let U=0;U<A;U++)B=k.params[U],B>=30&&B<=37?(I.fg&=-50331904,I.fg|=16777216|B-30):B>=40&&B<=47?(I.bg&=-50331904,I.bg|=16777216|B-40):B>=90&&B<=97?(I.fg&=-50331904,I.fg|=16777224|B-90):B>=100&&B<=107?(I.bg&=-50331904,I.bg|=16777224|B-100):B===0?this._processSGR0(I):B===1?I.fg|=134217728:B===3?I.bg|=67108864:B===4?(I.fg|=268435456,this._processUnderline(k.hasSubParams(U)?k.getSubParams(U)[0]:1,I)):B===5?I.fg|=536870912:B===7?I.fg|=67108864:B===8?I.fg|=1073741824:B===9?I.fg|=2147483648:B===2?I.bg|=134217728:B===21?this._processUnderline(2,I):B===22?(I.fg&=-134217729,I.bg&=-134217729):B===23?I.bg&=-67108865:B===24?(I.fg&=-268435457,this._processUnderline(0,I)):B===25?I.fg&=-536870913:B===27?I.fg&=-67108865:B===28?I.fg&=-1073741825:B===29?I.fg&=2147483647:B===39?(I.fg&=-67108864,I.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):B===49?(I.bg&=-67108864,I.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?U+=this._extractColor(k,U,I):B===53?I.bg|=1073741824:B===55?I.bg&=-1073741825:B===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):B===100?(I.fg&=-67108864,I.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(k){switch(k.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${A};${B}R`)}return!0}deviceStatusPrivate(k){if(k.params[0]===6){const A=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${A};${B}R`)}return!0}softReset(k){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(k){const A=k.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=A%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(k){const A=k.params[0]||1;let B;return(k.length<2||(B=k.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(k){if(!R(k.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=k.length>1?k.params[1]:0;switch(k.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(D.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(D.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(k){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(k){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(k){return this._windowTitle=k,this._onTitleChange.fire(k),!0}setIconName(k){return this._iconName=k,!0}setOrReportIndexedColor(k){const A=[],B=k.split(";");for(;B.length>1;){const I=B.shift(),U=B.shift();if(/^\d+$/.exec(I)){const V=parseInt(I);if(N(V))if(U==="?")A.push({type:0,index:V});else{const Q=(0,x.parseColor)(U);Q&&A.push({type:1,index:V,color:Q})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(k){const A=k.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(k,A){this._getCurrentLinkId()&&this._finishHyperlink();const B=k.split(":");let I;const U=B.findIndex(V=>V.startsWith("id="));return U!==-1&&(I=B[U].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(k,A){const B=k.split(";");for(let I=0;I<B.length&&!(A>=this._specialColors.length);++I,++A)if(B[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const U=(0,x.parseColor)(B[I]);U&&this._onColor.fire([{type:1,index:this._specialColors[A],color:U}])}return!0}setOrReportFgColor(k){return this._setOrReportSpecialColor(k,0)}setOrReportBgColor(k){return this._setOrReportSpecialColor(k,1)}setOrReportCursorColor(k){return this._setOrReportSpecialColor(k,2)}restoreIndexedColor(k){if(!k)return this._onColor.fire([{type:2}]),!0;const A=[],B=k.split(";");for(let I=0;I<B.length;++I)if(/^\d+$/.exec(B[I])){const U=parseInt(B[I]);N(U)&&A.push({type:2,index:U})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(k){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(k){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(k){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(k){return k.length!==2?(this.selectDefaultCharset(),!0):(k[0]==="/"||this._charsetService.setgCharset(L[k[0]],v.CHARSETS[k[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const k=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,k,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(k){return this._charsetService.setgLevel(k),!0}screenAlignmentPattern(){const k=new l.CellData;k.content=4194373,k.fg=this._curAttrData.fg,k.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const B=this._activeBuffer.ybase+this._activeBuffer.y+A,I=this._activeBuffer.lines.get(B);I&&(I.fill(k),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(k,A){const B=this._bufferService.buffer,I=this._optionsService.rawOptions;return(U=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${U}${h.C0.ESC}\\`),!0))(k==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:k==='"p'?'P1$r61;1"p':k==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:k==="m"?"P1$r0m":k===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(k,A){this._dirtyRowTracker.markRangeDirty(k,A)}}i.InputHandler=z;let H=class{constructor(O){this._bufferService=O,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(O){O<this.start?this.start=O:O>this.end&&(this.end=O)}markRangeDirty(O,k){O>k&&(P=O,O=k,k=P),O<this.start&&(this.start=O),k>this.end&&(this.end=k)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function N(O){return 0<=O&&O<256}H=f([p(0,b.IBufferService)],H)},844:(y,i)=>{function a(f){for(const p of f)p.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const p=this._disposables.indexOf(f);p!==-1&&this._disposables.splice(p,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var p;this._isDisposed||f===this._value||((p=this._value)==null||p.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=a,i.getDisposeArrayDisposable=function(f){return{dispose:()=>a(f)}}},1505:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(p,h,v){this._data[p]||(this._data[p]={}),this._data[p][h]=v}get(p,h){return this._data[p]?this._data[p][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=a,i.FourKeyMap=class{constructor(){this._data=new a}set(f,p,h,v,C){this._data.get(f,p)||this._data.set(f,p,new a),this._data.get(f,p).set(h,v,C)}get(f,p,h,v){var C;return(C=this._data.get(f,p))==null?void 0:C.get(h,v)}clear(){this._data.clear()}}},6114:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const a=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=a.includes("Firefox"),i.isLegacyEdge=a.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(a),i.getSafariVersion=function(){if(!i.isSafari)return 0;const p=a.match(/Version\/(\d+)/);return p===null||p.length<2?0:parseInt(p[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(a)},6106:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let a=0;i.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(a=this._search(this._getKey(f)),this._array.splice(a,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const p=this._getKey(f);if(p===void 0||(a=this._search(p),a===-1)||this._getKey(this._array[a])!==p)return!1;do if(this._array[a]===f)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===p);return!1}*getKeyIterator(f){if(this._array.length!==0&&(a=this._search(f),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===f))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===f)}forEachByKey(f,p){if(this._array.length!==0&&(a=this._search(f),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===f))do p(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===f)}values(){return[...this._array].values()}_search(f){let p=0,h=this._array.length-1;for(;h>=p;){let v=p+h>>1;const C=this._getKey(this._array[v]);if(C>f)h=v-1;else{if(!(C<f)){for(;v>0&&this._getKey(this._array[v-1])===f;)v--;return v}p=v+1}}return p}}},7226:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=a(6114);class p{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let w=0,d=0,o=C.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),d=Math.max(w,d),c=C.timeRemaining(),1.5*d>c)return o-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-w))}ms`),void this._start();o=c}this.clear()}}class h extends p{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const w=Date.now()+C;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends p{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const f=a(643);i.updateWindowsModeWrappedState=function(p){const h=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),v=h==null?void 0:h.get(p.cols-1),C=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);C&&v&&(C.isWrapped=v[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&v[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new a;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=a;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,v=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=v}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},9092:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const f=a(6349),p=a(7226),h=a(3734),v=a(8437),C=a(4634),w=a(511),d=a(643),o=a(4863),c=a(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(n,l,g){this._hasScrollback=n,this._optionsService=l,this._bufferService=g,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=c.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,d.WHITESPACE_CELL_CHAR,d.WHITESPACE_CELL_WIDTH,d.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new p.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(n){return n?(this._nullCell.fg=n.fg,this._nullCell.bg=n.bg,this._nullCell.extended=n.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(n){return n?(this._whitespaceCell.fg=n.fg,this._whitespaceCell.bg=n.bg,this._whitespaceCell.extended=n.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(n,l){return new v.BufferLine(this._bufferService.cols,this.getNullCell(n),l)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const n=this.ybase+this.y-this.ydisp;return n>=0&&n<this._rows}_getCorrectBufferLength(n){if(!this._hasScrollback)return n;const l=n+this._optionsService.rawOptions.scrollback;return l>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:l}fillViewportRows(n){if(this.lines.length===0){n===void 0&&(n=v.DEFAULT_ATTR_DATA);let l=this._rows;for(;l--;)this.lines.push(this.getBlankLine(n))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(n,l){const g=this.getNullCell(v.DEFAULT_ATTR_DATA);let b=0;const S=this._getCorrectBufferLength(l);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<n)for(let m=0;m<this.lines.length;m++)b+=+this.lines.get(m).resize(n,g);let E=0;if(this._rows<l)for(let m=this._rows;m<l;m++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(n,g)):this.ybase>0&&this.lines.length<=this.ybase+this.y+E+1?(this.ybase--,E++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(n,g)));else for(let m=this._rows;m>l;m--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const m=this.lines.length-S;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=S}this.x=Math.min(this.x,n-1),this.y=Math.min(this.y,l-1),E&&(this.y+=E),this.savedX=Math.min(this.savedX,n-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(n,l),this._cols>n))for(let E=0;E<this.lines.length;E++)b+=+this.lines.get(E).resize(n,g);this._cols=n,this._rows=l,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let n=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,n=!1);let l=0;for(;this._memoryCleanupPosition<this.lines.length;)if(l+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),l>100)return!0;return n}get _isReflowEnabled(){const n=this._optionsService.rawOptions.windowsPty;return n&&n.buildNumber?this._hasScrollback&&n.backend==="conpty"&&n.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(n,l){this._cols!==n&&(n>this._cols?this._reflowLarger(n,l):this._reflowSmaller(n,l))}_reflowLarger(n,l){const g=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,n,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(g.length>0){const b=(0,C.reflowLargerCreateNewLayout)(this.lines,g);(0,C.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(n,l,b.countRemoved)}}_reflowLargerAdjustViewport(n,l,g){const b=this.getNullCell(v.DEFAULT_ATTR_DATA);let S=g;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new v.BufferLine(n,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-g,0)}_reflowSmaller(n,l){const g=this.getNullCell(v.DEFAULT_ATTR_DATA),b=[];let S=0;for(let E=this.lines.length-1;E>=0;E--){let m=this.lines.get(E);if(!m||!m.isWrapped&&m.getTrimmedLength()<=n)continue;const x=[m];for(;m.isWrapped&&E>0;)m=this.lines.get(--E),x.unshift(m);const L=this.ybase+this.y;if(L>=E&&L<E+x.length)continue;const M=x[x.length-1].getTrimmedLength(),R=(0,C.reflowSmallerGetNewLineLengths)(x,this._cols,n),D=R.length-x.length;let P;P=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const z=[];for(let B=0;B<D;B++){const I=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);z.push(I)}z.length>0&&(b.push({start:E+x.length+S,newLines:z}),S+=z.length),x.push(...z);let H=R.length-1,N=R[H];N===0&&(H--,N=R[H]);let O=x.length-D-1,k=M;for(;O>=0;){const B=Math.min(k,N);if(x[H]===void 0)break;if(x[H].copyCellsFrom(x[O],k-B,N-B,B,!0),N-=B,N===0&&(H--,N=R[H]),k-=B,k===0){O--;const I=Math.max(O,0);k=(0,C.getWrappedLineTrimmedLength)(x,I,this._cols)}}for(let B=0;B<x.length;B++)R[B]<n&&x[B].setCell(R[B],g);let A=D-P;for(;A-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+l-1)}if(b.length>0){const E=[],m=[];for(let H=0;H<this.lines.length;H++)m.push(this.lines.get(H));const x=this.lines.length;let L=x-1,M=0,R=b[M];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let D=0;for(let H=Math.min(this.lines.maxLength-1,x+S-1);H>=0;H--)if(R&&R.start>L+D){for(let N=R.newLines.length-1;N>=0;N--)this.lines.set(H--,R.newLines[N]);H++,E.push({index:L+1,amount:R.newLines.length}),D+=R.newLines.length,R=b[++M]}else this.lines.set(H,m[L--]);let P=0;for(let H=E.length-1;H>=0;H--)E[H].index+=P,this.lines.onInsertEmitter.fire(E[H]),P+=E[H].amount;const z=Math.max(0,x+S-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}}translateBufferLineToString(n,l,g=0,b){const S=this.lines.get(n);return S?S.translateToString(l,g,b):""}getWrappedRangeForLine(n){let l=n,g=n;for(;l>0&&this.lines.get(l).isWrapped;)l--;for(;g+1<this.lines.length&&this.lines.get(g+1).isWrapped;)g++;return{first:l,last:g}}setupTabStops(n){for(n!=null?this.tabs[n]||(n=this.prevStop(n)):(this.tabs={},n=0);n<this._cols;n+=this._optionsService.rawOptions.tabStopWidth)this.tabs[n]=!0}prevStop(n){for(n==null&&(n=this.x);!this.tabs[--n]&&n>0;);return n>=this._cols?this._cols-1:n<0?0:n}nextStop(n){for(n==null&&(n=this.x);!this.tabs[++n]&&n<this._cols;);return n>=this._cols?this._cols-1:n<0?0:n}clearMarkers(n){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].line===n&&(this.markers[l].dispose(),this.markers.splice(l--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let n=0;n<this.markers.length;n++)this.markers[n].dispose(),this.markers.splice(n--,1);this._isClearing=!1}addMarker(n){const l=new o.Marker(n);return this.markers.push(l),l.register(this.lines.onTrim(g=>{l.line-=g,l.line<0&&l.dispose()})),l.register(this.lines.onInsert(g=>{l.line>=g.index&&(l.line+=g.amount)})),l.register(this.lines.onDelete(g=>{l.line>=g.index&&l.line<g.index+g.amount&&l.dispose(),l.line>g.index&&(l.line-=g.amount)})),l.register(l.onDispose(()=>this._removeMarker(l))),l}_removeMarker(n){this._isClearing||this.markers.splice(this.markers.indexOf(n),1)}}},8437:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const f=a(3734),p=a(511),h=a(643),v=a(482);i.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let C=0;class w{constructor(o,c,n=!1){this.isWrapped=n,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const l=c||p.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let g=0;g<o;++g)this.setCell(g,l);this.length=o}get(o){const c=this._data[3*o+0],n=2097151&c;return[this._data[3*o+1],2097152&c?this._combined[o]:n?(0,v.stringFromCodePoint)(n):"",c>>22,2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):n]}set(o,c){this._data[3*o+1]=c[h.CHAR_DATA_ATTR_INDEX],c[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=c[1],this._data[3*o+0]=2097152|o|c[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=c[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|c[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const c=this._data[3*o+0];return 2097152&c?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&c}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const c=this._data[3*o+0];return 2097152&c?this._combined[o]:2097151&c?(0,v.stringFromCodePoint)(2097151&c):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,c){return C=3*o,c.content=this._data[C+0],c.fg=this._data[C+1],c.bg=this._data[C+2],2097152&c.content&&(c.combinedData=this._combined[o]),268435456&c.bg&&(c.extended=this._extendedAttrs[o]),c}setCell(o,c){2097152&c.content&&(this._combined[o]=c.combinedData),268435456&c.bg&&(this._extendedAttrs[o]=c.extended),this._data[3*o+0]=c.content,this._data[3*o+1]=c.fg,this._data[3*o+2]=c.bg}setCellFromCodepoint(o,c,n,l){268435456&l.bg&&(this._extendedAttrs[o]=l.extended),this._data[3*o+0]=c|n<<22,this._data[3*o+1]=l.fg,this._data[3*o+2]=l.bg}addCodepointToCell(o,c,n){let l=this._data[3*o+0];2097152&l?this._combined[o]+=(0,v.stringFromCodePoint)(c):2097151&l?(this._combined[o]=(0,v.stringFromCodePoint)(2097151&l)+(0,v.stringFromCodePoint)(c),l&=-2097152,l|=2097152):l=c|4194304,n&&(l&=-12582913,l|=n<<22),this._data[3*o+0]=l}insertCells(o,c,n){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,n),c<this.length-o){const l=new p.CellData;for(let g=this.length-o-c-1;g>=0;--g)this.setCell(o+c+g,this.loadCell(o+g,l));for(let g=0;g<c;++g)this.setCell(o+g,n)}else for(let l=o;l<this.length;++l)this.setCell(l,n);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,n)}deleteCells(o,c,n){if(o%=this.length,c<this.length-o){const l=new p.CellData;for(let g=0;g<this.length-o-c;++g)this.setCell(o+g,this.loadCell(o+c+g,l));for(let g=this.length-c;g<this.length;++g)this.setCell(g,n)}else for(let l=o;l<this.length;++l)this.setCell(l,n);o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,n),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodepoint(o,0,1,n)}replaceCells(o,c,n,l=!1){if(l)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodepoint(o-1,0,1,n),c<this.length&&this.getWidth(c-1)===2&&!this.isProtected(c)&&this.setCellFromCodepoint(c,0,1,n);o<c&&o<this.length;)this.isProtected(o)||this.setCell(o,n),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o-1,0,1,n),c<this.length&&this.getWidth(c-1)===2&&this.setCellFromCodepoint(c,0,1,n);o<c&&o<this.length;)this.setCell(o++,n)}resize(o,c){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const n=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*n)this._data=new Uint32Array(this._data.buffer,0,n);else{const l=new Uint32Array(n);l.set(this._data),this._data=l}for(let l=this.length;l<o;++l)this.setCell(l,c)}else{this._data=this._data.subarray(0,n);const l=Object.keys(this._combined);for(let b=0;b<l.length;b++){const S=parseInt(l[b],10);S>=o&&delete this._combined[S]}const g=Object.keys(this._extendedAttrs);for(let b=0;b<g.length;b++){const S=parseInt(g[b],10);S>=o&&delete this._extendedAttrs[S]}}return this.length=o,4*n*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,c=!1){if(c)for(let n=0;n<this.length;++n)this.isProtected(n)||this.setCell(n,o);else{this._combined={},this._extendedAttrs={};for(let n=0;n<this.length;++n)this.setCell(n,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const c in o._combined)this._combined[c]=o._combined[c];this._extendedAttrs={};for(const c in o._extendedAttrs)this._extendedAttrs[c]=o._extendedAttrs[c];this.isWrapped=o.isWrapped}clone(){const o=new w(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const c in this._combined)o._combined[c]=this._combined[c];for(const c in this._extendedAttrs)o._extendedAttrs[c]=this._extendedAttrs[c];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,c,n,l,g){const b=o._data;if(g)for(let E=l-1;E>=0;E--){for(let m=0;m<3;m++)this._data[3*(n+E)+m]=b[3*(c+E)+m];268435456&b[3*(c+E)+2]&&(this._extendedAttrs[n+E]=o._extendedAttrs[c+E])}else for(let E=0;E<l;E++){for(let m=0;m<3;m++)this._data[3*(n+E)+m]=b[3*(c+E)+m];268435456&b[3*(c+E)+2]&&(this._extendedAttrs[n+E]=o._extendedAttrs[c+E])}const S=Object.keys(o._combined);for(let E=0;E<S.length;E++){const m=parseInt(S[E],10);m>=c&&(this._combined[m-c+n]=o._combined[m])}}translateToString(o,c,n,l){c=c??0,n=n??this.length,o&&(n=Math.min(n,this.getTrimmedLength())),l&&(l.length=0);let g="";for(;c<n;){const b=this._data[3*c+0],S=2097151&b,E=2097152&b?this._combined[c]:S?(0,v.stringFromCodePoint)(S):h.WHITESPACE_CELL_CHAR;if(g+=E,l)for(let m=0;m<E.length;++m)l.push(c);c+=b>>22||1}return l&&l.push(c),g}}i.BufferLine=w},4841:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(a,f){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return f*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(y,i)=>{function a(f,p,h){if(p===f.length-1)return f[p].getTrimmedLength();const v=!f[p].hasContent(h-1)&&f[p].getWidth(h-1)===1,C=f[p+1].getWidth(0)===2;return v&&C?h-1:h}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(f,p,h,v,C){const w=[];for(let d=0;d<f.length-1;d++){let o=d,c=f.get(++o);if(!c.isWrapped)continue;const n=[f.get(d)];for(;o<f.length&&c.isWrapped;)n.push(c),c=f.get(++o);if(v>=d&&v<o){d+=n.length-1;continue}let l=0,g=a(n,l,p),b=1,S=0;for(;b<n.length;){const m=a(n,b,p),x=m-S,L=h-g,M=Math.min(x,L);n[l].copyCellsFrom(n[b],S,g,M,!1),g+=M,g===h&&(l++,g=0),S+=M,S===m&&(b++,S=0),g===0&&l!==0&&n[l-1].getWidth(h-1)===2&&(n[l].copyCellsFrom(n[l-1],h-1,g++,1,!1),n[l-1].setCell(h-1,C))}n[l].replaceCells(g,h,C);let E=0;for(let m=n.length-1;m>0&&(m>l||n[m].getTrimmedLength()===0);m--)E++;E>0&&(w.push(d+n.length-E),w.push(E)),d+=n.length-1}return w},i.reflowLargerCreateNewLayout=function(f,p){const h=[];let v=0,C=p[v],w=0;for(let d=0;d<f.length;d++)if(C===d){const o=p[++v];f.onDeleteEmitter.fire({index:d-w,amount:o}),d+=o-1,w+=o,C=p[++v]}else h.push(d);return{layout:h,countRemoved:w}},i.reflowLargerApplyNewLayout=function(f,p){const h=[];for(let v=0;v<p.length;v++)h.push(f.get(p[v]));for(let v=0;v<h.length;v++)f.set(v,h[v]);f.length=p.length},i.reflowSmallerGetNewLineLengths=function(f,p,h){const v=[],C=f.map((c,n)=>a(f,n,p)).reduce((c,n)=>c+n);let w=0,d=0,o=0;for(;o<C;){if(C-o<h){v.push(C-o);break}w+=h;const c=a(f,d,p);w>c&&(w-=c,d++);const n=f[d].getWidth(w-1)===2;n&&w--;const l=n?h-1:h;v.push(l),o+=l}return v},i.getWrappedLineTrimmedLength=a},5295:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const f=a(8460),p=a(844),h=a(9092);class v extends p.Disposable{constructor(w,d){super(),this._optionsService=w,this._bufferService=d,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,d){this._normal.resize(w,d),this._alt.resize(w,d),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=v},511:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=a(482),p=a(643),h=a(3734);class v extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const d=new v;return d.setFromCharData(w),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[p.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(w[p.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(w[p.CHAR_DATA_CHAR_INDEX].length===2){const o=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const c=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(o-55296)+c-56320+65536|w[p.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[p.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=w[p.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[p.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=v},643:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const f=a(8460),p=a(844);class h{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,p.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}i.Marker=h,h._nextId=1},7116:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},i.CHARSETS.A={"#":""},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},i.CHARSETS.C=i.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},i.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.E=i.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},i.CHARSETS.H=i.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},i.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(y,i)=>{var a,f,p;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(a||(i.C0=a={})),function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""}(f||(i.C1=f={})),function(h){h.ST=`${a.ESC}\\`}(p||(i.C1_ESCAPED=p={}))},7399:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const f=a(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(h,v,C,w){const d={type:0,cancel:!1,key:void 0},o=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?d.key=v?f.C0.ESC+"OA":f.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?d.key=v?f.C0.ESC+"OD":f.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?d.key=v?f.C0.ESC+"OC":f.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(d.key=v?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:d.key=h.ctrlKey?"\b":f.C0.DEL,h.altKey&&(d.key=f.C0.ESC+d.key);break;case 9:if(h.shiftKey){d.key=f.C0.ESC+"[Z";break}d.key=f.C0.HT,d.cancel=!0;break;case 13:d.key=h.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,d.cancel=!0;break;case 27:d.key=f.C0.ESC,h.altKey&&(d.key=f.C0.ESC+f.C0.ESC),d.cancel=!0;break;case 37:if(h.metaKey)break;o?(d.key=f.C0.ESC+"[1;"+(o+1)+"D",d.key===f.C0.ESC+"[1;3D"&&(d.key=f.C0.ESC+(C?"b":"[1;5D"))):d.key=v?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(h.metaKey)break;o?(d.key=f.C0.ESC+"[1;"+(o+1)+"C",d.key===f.C0.ESC+"[1;3C"&&(d.key=f.C0.ESC+(C?"f":"[1;5C"))):d.key=v?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(h.metaKey)break;o?(d.key=f.C0.ESC+"[1;"+(o+1)+"A",C||d.key!==f.C0.ESC+"[1;3A"||(d.key=f.C0.ESC+"[1;5A")):d.key=v?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(h.metaKey)break;o?(d.key=f.C0.ESC+"[1;"+(o+1)+"B",C||d.key!==f.C0.ESC+"[1;3B"||(d.key=f.C0.ESC+"[1;5B")):d.key=v?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(d.key=f.C0.ESC+"[2~");break;case 46:d.key=o?f.C0.ESC+"[3;"+(o+1)+"~":f.C0.ESC+"[3~";break;case 36:d.key=o?f.C0.ESC+"[1;"+(o+1)+"H":v?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:d.key=o?f.C0.ESC+"[1;"+(o+1)+"F":v?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:h.shiftKey?d.type=2:h.ctrlKey?d.key=f.C0.ESC+"[5;"+(o+1)+"~":d.key=f.C0.ESC+"[5~";break;case 34:h.shiftKey?d.type=3:h.ctrlKey?d.key=f.C0.ESC+"[6;"+(o+1)+"~":d.key=f.C0.ESC+"[6~";break;case 112:d.key=o?f.C0.ESC+"[1;"+(o+1)+"P":f.C0.ESC+"OP";break;case 113:d.key=o?f.C0.ESC+"[1;"+(o+1)+"Q":f.C0.ESC+"OQ";break;case 114:d.key=o?f.C0.ESC+"[1;"+(o+1)+"R":f.C0.ESC+"OR";break;case 115:d.key=o?f.C0.ESC+"[1;"+(o+1)+"S":f.C0.ESC+"OS";break;case 116:d.key=o?f.C0.ESC+"[15;"+(o+1)+"~":f.C0.ESC+"[15~";break;case 117:d.key=o?f.C0.ESC+"[17;"+(o+1)+"~":f.C0.ESC+"[17~";break;case 118:d.key=o?f.C0.ESC+"[18;"+(o+1)+"~":f.C0.ESC+"[18~";break;case 119:d.key=o?f.C0.ESC+"[19;"+(o+1)+"~":f.C0.ESC+"[19~";break;case 120:d.key=o?f.C0.ESC+"[20;"+(o+1)+"~":f.C0.ESC+"[20~";break;case 121:d.key=o?f.C0.ESC+"[21;"+(o+1)+"~":f.C0.ESC+"[21~";break;case 122:d.key=o?f.C0.ESC+"[23;"+(o+1)+"~":f.C0.ESC+"[23~";break;case 123:d.key=o?f.C0.ESC+"[24;"+(o+1)+"~":f.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(C&&!w||!h.altKey||h.metaKey)!C||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?d.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(d.key=f.C0.US),h.key==="@"&&(d.key=f.C0.NUL)):h.keyCode===65&&(d.type=1);else{const c=p[h.keyCode],n=c==null?void 0:c[h.shiftKey?1:0];if(n)d.key=f.C0.ESC+n;else if(h.keyCode>=65&&h.keyCode<=90){const l=h.ctrlKey?h.keyCode-64:h.keyCode+32;let g=String.fromCharCode(l);h.shiftKey&&(g=g.toUpperCase()),d.key=f.C0.ESC+g}else if(h.keyCode===32)d.key=f.C0.ESC+(h.ctrlKey?f.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let l=h.code.slice(3,4);h.shiftKey||(l=l.toLowerCase()),d.key=f.C0.ESC+l,d.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?d.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?d.key=f.C0.NUL:h.keyCode>=51&&h.keyCode<=55?d.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?d.key=f.C0.DEL:h.keyCode===219?d.key=f.C0.ESC:h.keyCode===220?d.key=f.C0.FS:h.keyCode===221&&(d.key=f.C0.GS)}return d}},482:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},i.utf32ToString=function(a,f=0,p=a.length){let h="";for(let v=f;v<p;++v){let C=a[v];C>65535?(C-=65536,h+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):h+=String.fromCharCode(C)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,f){const p=a.length;if(!p)return 0;let h=0,v=0;if(this._interim){const C=a.charCodeAt(v++);56320<=C&&C<=57343?f[h++]=1024*(this._interim-55296)+C-56320+65536:(f[h++]=this._interim,f[h++]=C),this._interim=0}for(let C=v;C<p;++C){const w=a.charCodeAt(C);if(55296<=w&&w<=56319){if(++C>=p)return this._interim=w,h;const d=a.charCodeAt(C);56320<=d&&d<=57343?f[h++]=1024*(w-55296)+d-56320+65536:(f[h++]=w,f[h++]=d)}else w!==65279&&(f[h++]=w)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,f){const p=a.length;if(!p)return 0;let h,v,C,w,d=0,o=0,c=0;if(this.interim[0]){let g=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let S,E=0;for(;(S=63&this.interim[++E])&&E<4;)b<<=6,b|=S;const m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=m-E;for(;c<x;){if(c>=p)return 0;if(S=a[c++],(192&S)!=128){c--,g=!0;break}this.interim[E++]=S,b<<=6,b|=63&S}g||(m===2?b<128?c--:f[d++]=b:m===3?b<2048||b>=55296&&b<=57343||b===65279||(f[d++]=b):b<65536||b>1114111||(f[d++]=b)),this.interim.fill(0)}const n=p-4;let l=c;for(;l<p;){for(;!(!(l<n)||128&(h=a[l])||128&(v=a[l+1])||128&(C=a[l+2])||128&(w=a[l+3]));)f[d++]=h,f[d++]=v,f[d++]=C,f[d++]=w,l+=4;if(h=a[l++],h<128)f[d++]=h;else if((224&h)==192){if(l>=p)return this.interim[0]=h,d;if(v=a[l++],(192&v)!=128){l--;continue}if(o=(31&h)<<6|63&v,o<128){l--;continue}f[d++]=o}else if((240&h)==224){if(l>=p)return this.interim[0]=h,d;if(v=a[l++],(192&v)!=128){l--;continue}if(l>=p)return this.interim[0]=h,this.interim[1]=v,d;if(C=a[l++],(192&C)!=128){l--;continue}if(o=(15&h)<<12|(63&v)<<6|63&C,o<2048||o>=55296&&o<=57343||o===65279)continue;f[d++]=o}else if((248&h)==240){if(l>=p)return this.interim[0]=h,d;if(v=a[l++],(192&v)!=128){l--;continue}if(l>=p)return this.interim[0]=h,this.interim[1]=v,d;if(C=a[l++],(192&C)!=128){l--;continue}if(l>=p)return this.interim[0]=h,this.interim[1]=v,this.interim[2]=C,d;if(w=a[l++],(192&w)!=128){l--;continue}if(o=(7&h)<<18|(63&v)<<12|(63&C)<<6|63&w,o<65536||o>1114111)continue;f[d++]=o}}return d}}},225:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const f=a(1480),p=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let v;i.UnicodeV6=class{constructor(){if(this.version="6",!v){v=new Uint8Array(65536),v.fill(1),v[0]=0,v.fill(0,1,32),v.fill(0,127,160),v.fill(2,4352,4448),v[9001]=2,v[9002]=2,v.fill(2,11904,42192),v[12351]=1,v.fill(2,44032,55204),v.fill(2,63744,64256),v.fill(2,65040,65050),v.fill(2,65072,65136),v.fill(2,65280,65377),v.fill(2,65504,65511);for(let C=0;C<p.length;++C)v.fill(0,p[C][0],p[C][1]+1)}}wcwidth(C){return C<32?0:C<127?1:C<65536?v[C]:function(w,d){let o,c=0,n=d.length-1;if(w<d[0][0]||w>d[n][1])return!1;for(;n>=c;)if(o=c+n>>1,w>d[o][1])c=o+1;else{if(!(w<d[o][0]))return!0;n=o-1}return!1}(C,h)?0:C>=131072&&C<=196605||C>=196608&&C<=262141?2:1}charProperties(C,w){let d=this.wcwidth(C),o=d===0&&w!==0;if(o){const c=f.UnicodeService.extractWidth(w);c===0?o=!1:c>d&&(d=c)}return f.UnicodeService.createPropertyValue(0,d,o)}}},5981:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const f=a(8460),p=a(844);class h extends p.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let d;for(this._isSyncWriting=!0;d=this._writeBuffer.shift();){this._action(d);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w)}_innerWrite(C=0,w=!0){const d=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],c=this._action(o,w);if(c){const l=g=>Date.now()-d>=12?setTimeout(()=>this._innerWrite(0,g)):this._innerWrite(d,g);return void c.catch(g=>(queueMicrotask(()=>{throw g}),Promise.resolve(!1))).then(l)}const n=this._callbacks[this._bufferOffset];if(n&&n(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-d>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=h},5941:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function p(h,v){const C=h.toString(16),w=C.length<2?"0"+C:C;switch(v){case 4:return C[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(h){if(!h)return;let v=h.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const C=a.exec(v);if(C){const w=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/w*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/w*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/w*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),f.exec(v)&&[3,6,9,12].includes(v.length))){const C=v.length/3,w=[0,0,0];for(let d=0;d<3;++d){const o=parseInt(v.slice(C*d,C*d+C),16);w[d]=C===1?o<<4:C===2?o:C===3?o>>4:o>>8}return w}},i.toRgbString=function(h,v=16){const[C,w,d]=h;return`rgb:${p(C,v)}/${p(w,v)}/${p(d,v)}`}},5770:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const f=a(482),p=a(8742),h=a(5770),v=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(w,d){this._handlers[w]===void 0&&(this._handlers[w]=[]);const o=this._handlers[w];return o.push(d),{dispose:()=>{const c=o.indexOf(d);c!==-1&&o.splice(c,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(w,d){if(this.reset(),this._ident=w,this._active=this._handlers[w]||v,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(d);else this._handlerFb(this._ident,"HOOK",d)}put(w,d,o){if(this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].put(w,d,o);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(w,d,o))}unhook(w,d=!0){if(this._active.length){let o=!1,c=this._active.length-1,n=!1;if(this._stack.paused&&(c=this._stack.loopPosition-1,o=d,n=this._stack.fallThrough,this._stack.paused=!1),!n&&o===!1){for(;c>=0&&(o=this._active[c].unhook(w),o!==!0);c--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!1,o;c--}for(;c>=0;c--)if(o=this._active[c].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=c,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",w);this._active=v,this._ident=0}};const C=new p.Params;C.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=C,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():C,this._data="",this._hitLimit=!1}put(w,d,o){this._hitLimit||(this._data+=(0,f.utf32ToString)(w,d,o),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let d=!1;if(this._hitLimit)d=!1;else if(w&&(d=this._handler(this._data,this._params),d instanceof Promise))return d.then(o=>(this._params=C,this._data="",this._hitLimit=!1,o));return this._params=C,this._data="",this._hitLimit=!1,d}}},2015:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const f=a(844),p=a(8742),h=a(6242),v=a(6351);class C{constructor(c){this.table=new Uint8Array(c)}setDefault(c,n){this.table.fill(c<<4|n)}add(c,n,l,g){this.table[n<<8|c]=l<<4|g}addMany(c,n,l,g){for(let b=0;b<c.length;b++)this.table[n<<8|c[b]]=l<<4|g}}i.TransitionTable=C;const w=160;i.VT500_TRANSITION_TABLE=function(){const o=new C(4095),c=Array.apply(null,Array(256)).map((E,m)=>m),n=(E,m)=>c.slice(E,m),l=n(32,127),g=n(0,24);g.push(25),g.push.apply(g,n(28,32));const b=n(0,14);let S;for(S in o.setDefault(1,0),o.addMany(l,0,2,0),b)o.addMany([24,26,153,154],S,3,0),o.addMany(n(128,144),S,3,0),o.addMany(n(144,152),S,3,0),o.add(156,S,0,0),o.add(27,S,11,1),o.add(157,S,4,8),o.addMany([152,158,159],S,0,7),o.add(155,S,11,3),o.add(144,S,11,9);return o.addMany(g,0,3,0),o.addMany(g,1,3,1),o.add(127,1,0,1),o.addMany(g,8,0,8),o.addMany(g,3,3,3),o.add(127,3,0,3),o.addMany(g,4,3,4),o.add(127,4,0,4),o.addMany(g,6,3,6),o.addMany(g,5,3,5),o.add(127,5,0,5),o.addMany(g,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(l,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(n(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(l,7,0,7),o.addMany(g,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(n(64,127),3,7,0),o.addMany(n(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(n(48,60),4,8,4),o.addMany(n(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(n(32,64),6,0,6),o.add(127,6,0,6),o.addMany(n(64,127),6,0,0),o.addMany(n(32,48),3,9,5),o.addMany(n(32,48),5,9,5),o.addMany(n(48,64),5,0,6),o.addMany(n(64,127),5,7,0),o.addMany(n(32,48),4,9,5),o.addMany(n(32,48),1,9,2),o.addMany(n(32,48),2,9,2),o.addMany(n(48,127),2,10,0),o.addMany(n(48,80),1,10,0),o.addMany(n(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(n(96,127),1,10,0),o.add(80,1,11,9),o.addMany(g,9,0,9),o.add(127,9,0,9),o.addMany(n(28,32),9,0,9),o.addMany(n(32,48),9,9,12),o.addMany(n(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(g,11,0,11),o.addMany(n(32,128),11,0,11),o.addMany(n(28,32),11,0,11),o.addMany(g,10,0,10),o.add(127,10,0,10),o.addMany(n(28,32),10,0,10),o.addMany(n(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(n(32,48),10,9,12),o.addMany(g,12,0,12),o.add(127,12,0,12),o.addMany(n(28,32),12,0,12),o.addMany(n(32,48),12,9,12),o.addMany(n(48,64),12,0,11),o.addMany(n(64,127),12,12,13),o.addMany(n(64,127),10,12,13),o.addMany(n(64,127),9,12,13),o.addMany(g,13,13,13),o.addMany(l,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(w,0,2,0),o.add(w,8,5,8),o.add(w,6,0,6),o.add(w,11,0,11),o.add(w,13,13,13),o}();class d extends f.Disposable{constructor(c=i.VT500_TRANSITION_TABLE){super(),this._transitions=c,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new p.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(n,l,g)=>{},this._executeHandlerFb=n=>{},this._csiHandlerFb=(n,l)=>{},this._escHandlerFb=n=>{},this._errorHandlerFb=n=>n,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(c,n=[64,126]){let l=0;if(c.prefix){if(c.prefix.length>1)throw new Error("only one byte as prefix supported");if(l=c.prefix.charCodeAt(0),l&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(c.intermediates){if(c.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<c.intermediates.length;++b){const S=c.intermediates.charCodeAt(b);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=S}}if(c.final.length!==1)throw new Error("final must be a single byte");const g=c.final.charCodeAt(0);if(n[0]>g||g>n[1])throw new Error(`final must be in range ${n[0]} .. ${n[1]}`);return l<<=8,l|=g,l}identToString(c){const n=[];for(;c;)n.push(String.fromCharCode(255&c)),c>>=8;return n.reverse().join("")}setPrintHandler(c){this._printHandler=c}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(c,n){const l=this._identifier(c,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);const g=this._escHandlers[l];return g.push(n),{dispose:()=>{const b=g.indexOf(n);b!==-1&&g.splice(b,1)}}}clearEscHandler(c){this._escHandlers[this._identifier(c,[48,126])]&&delete this._escHandlers[this._identifier(c,[48,126])]}setEscHandlerFallback(c){this._escHandlerFb=c}setExecuteHandler(c,n){this._executeHandlers[c.charCodeAt(0)]=n}clearExecuteHandler(c){this._executeHandlers[c.charCodeAt(0)]&&delete this._executeHandlers[c.charCodeAt(0)]}setExecuteHandlerFallback(c){this._executeHandlerFb=c}registerCsiHandler(c,n){const l=this._identifier(c);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);const g=this._csiHandlers[l];return g.push(n),{dispose:()=>{const b=g.indexOf(n);b!==-1&&g.splice(b,1)}}}clearCsiHandler(c){this._csiHandlers[this._identifier(c)]&&delete this._csiHandlers[this._identifier(c)]}setCsiHandlerFallback(c){this._csiHandlerFb=c}registerDcsHandler(c,n){return this._dcsParser.registerHandler(this._identifier(c),n)}clearDcsHandler(c){this._dcsParser.clearHandler(this._identifier(c))}setDcsHandlerFallback(c){this._dcsParser.setHandlerFallback(c)}registerOscHandler(c,n){return this._oscParser.registerHandler(c,n)}clearOscHandler(c){this._oscParser.clearHandler(c)}setOscHandlerFallback(c){this._oscParser.setHandlerFallback(c)}setErrorHandler(c){this._errorHandler=c}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(c,n,l,g,b){this._parseStack.state=c,this._parseStack.handlers=n,this._parseStack.handlerPos=l,this._parseStack.transition=g,this._parseStack.chunkPos=b}parse(c,n,l){let g,b=0,S=0,E=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,E=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const m=this._parseStack.handlers;let x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&x>-1){for(;x>=0&&(g=m[x](this._params),g!==!0);x--)if(g instanceof Promise)return this._parseStack.handlerPos=x,g}this._parseStack.handlers=[];break;case 4:if(l===!1&&x>-1){for(;x>=0&&(g=m[x](),g!==!0);x--)if(g instanceof Promise)return this._parseStack.handlerPos=x,g}this._parseStack.handlers=[];break;case 6:if(b=c[this._parseStack.chunkPos],g=this._dcsParser.unhook(b!==24&&b!==26,l),g)return g;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=c[this._parseStack.chunkPos],g=this._oscParser.end(b!==24&&b!==26,l),g)return g;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,E=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let m=E;m<n;++m){switch(b=c[m],S=this._transitions.table[this.currentState<<8|(b<160?b:w)],S>>4){case 2:for(let D=m+1;;++D){if(D>=n||(b=c[D])<32||b>126&&b<w){this._printHandler(c,m,D),m=D-1;break}if(++D>=n||(b=c[D])<32||b>126&&b<w){this._printHandler(c,m,D),m=D-1;break}if(++D>=n||(b=c[D])<32||b>126&&b<w){this._printHandler(c,m,D),m=D-1;break}if(++D>=n||(b=c[D])<32||b>126&&b<w){this._printHandler(c,m,D),m=D-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:m,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const x=this._csiHandlers[this._collect<<8|b];let L=x?x.length-1:-1;for(;L>=0&&(g=x[L](this._params),g!==!0);L--)if(g instanceof Promise)return this._preserveStack(3,x,L,S,m),g;L<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingJoinState=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++m<n&&(b=c[m])>47&&b<60);m--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:const M=this._escHandlers[this._collect<<8|b];let R=M?M.length-1:-1;for(;R>=0&&(g=M[R](),g!==!0);R--)if(g instanceof Promise)return this._preserveStack(4,M,R,S,m),g;R<0&&this._escHandlerFb(this._collect<<8|b),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let D=m+1;;++D)if(D>=n||(b=c[D])===24||b===26||b===27||b>127&&b<w){this._dcsParser.put(c,m,D),m=D-1;break}break;case 14:if(g=this._dcsParser.unhook(b!==24&&b!==26),g)return this._preserveStack(6,[],0,S,m),g;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let D=m+1;;D++)if(D>=n||(b=c[D])<32||b>127&&b<w){this._oscParser.put(c,m,D),m=D-1;break}break;case 6:if(g=this._oscParser.end(b!==24&&b!==26),g)return this._preserveStack(5,[],0,S,m),g;b===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}i.EscapeSequenceParser=d},6242:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const f=a(5770),p=a(482),h=[];i.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,C){this._handlers[v]===void 0&&(this._handlers[v]=[]);const w=this._handlers[v];return w.push(C),{dispose:()=>{const d=w.indexOf(C);d!==-1&&w.splice(d,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,C,w){if(this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].put(v,C,w);else this._handlerFb(this._id,"PUT",(0,p.utf32ToString)(v,C,w))}start(){this.reset(),this._state=1}put(v,C,w){if(this._state!==3){if(this._state===1)for(;C<w;){const d=v[C++];if(d===59){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+d-48}this._state===2&&w-C>0&&this._put(v,C,w)}}end(v,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,d=this._active.length-1,o=!1;if(this._stack.paused&&(d=this._stack.loopPosition-1,w=C,o=this._stack.fallThrough,this._stack.paused=!1),!o&&w===!1){for(;d>=0&&(w=this._active[d].end(v),w!==!0);d--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!1,w;d--}for(;d>=0;d--)if(w=this._active[d].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=d,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",v);this._active=h,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,C,w){this._hitLimit||(this._data+=(0,p.utf32ToString)(v,C,w),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let C=!1;if(this._hitLimit)C=!1;else if(v&&(C=this._handler(this._data),C instanceof Promise))return C.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,C}}},8742:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const a=2147483647;class f{static fromArray(h){const v=new f;if(!h.length)return v;for(let C=Array.isArray(h[0])?1:0;C<h.length;++C){const w=h[C];if(Array.isArray(w))for(let d=0;d<w.length;++d)v.addSubParam(w[d]);else v.addParam(w)}return v}constructor(h=32,v=32){if(this.maxLength=h,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new f(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let v=0;v<this.length;++v){h.push(this.params[v]);const C=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-C>0&&h.push(Array.prototype.slice.call(this._subParams,C,w))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>a?a:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>a?a:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const v=this._subParamsIdx[h]>>8,C=255&this._subParamsIdx[h];return C-v>0?this._subParams.subarray(v,C):null}getSubParamsAll(){const h={};for(let v=0;v<this.length;++v){const C=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-C>0&&(h[v]=this._subParams.slice(C,w))}return h}addDigit(h){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,w=C[v-1];C[v-1]=~w?Math.min(10*w+h,a):h}}i.Params=f},5741:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,f){const p={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(p),f.dispose=()=>this._wrappedAddonDispose(p),f.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let f=-1;for(let p=0;p<this._addons.length;p++)if(this._addons[p]===a){f=p;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(f,1)}}},8771:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const f=a(3785),p=a(511);i.BufferApiView=class{constructor(h,v){this._buffer=h,this.type=v}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const v=this._buffer.lines.get(h);if(v)return new f.BufferLineApiView(v)}getNullCell(){return new p.CellData}}},3785:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const f=a(511);i.BufferLineApiView=class{constructor(p){this._line=p}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(p,h){if(!(p<0||p>=this._line.length))return h?(this._line.loadCell(p,h),h):this._line.loadCell(p,new f.CellData)}translateToString(p,h,v){return this._line.translateToString(p,h,v)}}},8285:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const f=a(8771),p=a(8460),h=a(844);class v extends h.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new p.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=v},7975:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,f){return this._core.registerCsiHandler(a,p=>f(p.toArray()))}addCsiHandler(a,f){return this.registerCsiHandler(a,f)}registerDcsHandler(a,f){return this._core.registerDcsHandler(a,(p,h)=>f(p,h.toArray()))}addDcsHandler(a,f){return this.registerDcsHandler(a,f)}registerEscHandler(a,f){return this._core.registerEscHandler(a,f)}addEscHandler(a,f){return this.registerEscHandler(a,f)}registerOscHandler(a,f){return this._core.registerOscHandler(a,f)}addOscHandler(a,f){return this.registerOscHandler(a,f)}}},7090:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(y,i,a){var f=this&&this.__decorate||function(o,c,n,l){var g,b=arguments.length,S=b<3?c:l===null?l=Object.getOwnPropertyDescriptor(c,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,c,n,l);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(S=(b<3?g(S):b>3?g(c,n,S):g(c,n))||S);return b>3&&S&&Object.defineProperty(c,n,S),S},p=this&&this.__param||function(o,c){return function(n,l){c(n,l,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const h=a(8460),v=a(844),C=a(5295),w=a(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let d=i.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(o,this))}resize(o,c){this.cols=o,this.rows=c,this.buffers.resize(o,c),this._onResize.fire({cols:o,rows:c})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,c=!1){const n=this.buffer;let l;l=this._cachedBlankLine,l&&l.length===this.cols&&l.getFg(0)===o.fg&&l.getBg(0)===o.bg||(l=n.getBlankLine(o,c),this._cachedBlankLine=l),l.isWrapped=c;const g=n.ybase+n.scrollTop,b=n.ybase+n.scrollBottom;if(n.scrollTop===0){const S=n.lines.isFull;b===n.lines.length-1?S?n.lines.recycle().copyFrom(l):n.lines.push(l.clone()):n.lines.splice(b+1,0,l.clone()),S?this.isUserScrolling&&(n.ydisp=Math.max(n.ydisp-1,0)):(n.ybase++,this.isUserScrolling||n.ydisp++)}else{const S=b-g+1;n.lines.shiftElements(g+1,S-1,-1),n.lines.set(b,l.clone())}this.isUserScrolling||(n.ydisp=n.ybase),this._onScroll.fire(n.ydisp)}scrollLines(o,c,n){const l=this.buffer;if(o<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else o+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);const g=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+o,l.ybase),0),g!==l.ydisp&&(c||this._onScroll.fire(l.ydisp))}};i.BufferService=d=f([p(0,w.IOptionsService)],d)},7994:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,f){this._charsets[a]=f,this.glevel===a&&(this.charset=f)}}},1753:function(y,i,a){var f=this&&this.__decorate||function(l,g,b,S){var E,m=arguments.length,x=m<3?g:S===null?S=Object.getOwnPropertyDescriptor(g,b):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(l,g,b,S);else for(var L=l.length-1;L>=0;L--)(E=l[L])&&(x=(m<3?E(x):m>3?E(g,b,x):E(g,b))||x);return m>3&&x&&Object.defineProperty(g,b,x),x},p=this&&this.__param||function(l,g){return function(b,S){g(b,S,l)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const h=a(2585),v=a(8460),C=a(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:l=>l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)},VT200:{events:19,restrict:l=>l.action!==32},DRAG:{events:23,restrict:l=>l.action!==32||l.button!==3},ANY:{events:31,restrict:l=>!0}};function d(l,g){let b=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(b|=64,b|=l.action):(b|=3&l.button,4&l.button&&(b|=64),8&l.button&&(b|=128),l.action===32?b|=32:l.action!==0||g||(b|=3)),b}const o=String.fromCharCode,c={DEFAULT:l=>{const g=[d(l,!1)+32,l.col+32,l.row+32];return g[0]>255||g[1]>255||g[2]>255?"":`\x1B[M${o(g[0])}${o(g[1])}${o(g[2])}`},SGR:l=>{const g=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${d(l,!0)};${l.col};${l.row}${g}`},SGR_PIXELS:l=>{const g=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${d(l,!0)};${l.x};${l.y}${g}`}};let n=i.CoreMouseService=class extends C.Disposable{constructor(l,g){super(),this._bufferService=l,this._coreService=g,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const b of Object.keys(w))this.addProtocol(b,w[b]);for(const b of Object.keys(c))this.addEncoding(b,c[b]);this.reset()}addProtocol(l,g){this._protocols[l]=g}addEncoding(l,g){this._encodings[l]=g}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(l){if(!this._protocols[l])throw new Error(`unknown protocol "${l}"`);this._activeProtocol=l,this._onProtocolChange.fire(this._protocols[l].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(l){if(!this._encodings[l])throw new Error(`unknown encoding "${l}"`);this._activeEncoding=l}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(l){if(l.col<0||l.col>=this._bufferService.cols||l.row<0||l.row>=this._bufferService.rows||l.button===4&&l.action===32||l.button===3&&l.action!==32||l.button!==4&&(l.action===2||l.action===3)||(l.col++,l.row++,l.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,l,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(l))return!1;const g=this._encodings[this._activeEncoding](l);return g&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(g):this._coreService.triggerDataEvent(g,!0)),this._lastEvent=l,!0}explainEvents(l){return{down:!!(1&l),up:!!(2&l),drag:!!(4&l),move:!!(8&l),wheel:!!(16&l)}}_equalEvents(l,g,b){if(b){if(l.x!==g.x||l.y!==g.y)return!1}else if(l.col!==g.col||l.row!==g.row)return!1;return l.button===g.button&&l.action===g.action&&l.ctrl===g.ctrl&&l.alt===g.alt&&l.shift===g.shift}};i.CoreMouseService=n=f([p(0,h.IBufferService),p(1,h.ICoreService)],n)},6975:function(y,i,a){var f=this&&this.__decorate||function(n,l,g,b){var S,E=arguments.length,m=E<3?l:b===null?b=Object.getOwnPropertyDescriptor(l,g):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(n,l,g,b);else for(var x=n.length-1;x>=0;x--)(S=n[x])&&(m=(E<3?S(m):E>3?S(l,g,m):S(l,g))||m);return E>3&&m&&Object.defineProperty(l,g,m),m},p=this&&this.__param||function(n,l){return function(g,b){l(g,b,n)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const h=a(1439),v=a(8460),C=a(844),w=a(2585),d=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let c=i.CoreService=class extends C.Disposable{constructor(n,l,g){super(),this._bufferService=n,this._logService=l,this._optionsService=g,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(d),this.decPrivateModes=(0,h.clone)(o)}reset(){this.modes=(0,h.clone)(d),this.decPrivateModes=(0,h.clone)(o)}triggerDataEvent(n,l=!1){if(this._optionsService.rawOptions.disableStdin)return;const g=this._bufferService.buffer;l&&this._optionsService.rawOptions.scrollOnUserInput&&g.ybase!==g.ydisp&&this._onRequestScrollToBottom.fire(),l&&this._onUserInput.fire(),this._logService.debug(`sending data "${n}"`,()=>n.split("").map(b=>b.charCodeAt(0))),this._onData.fire(n)}triggerBinaryEvent(n){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${n}"`,()=>n.split("").map(l=>l.charCodeAt(0))),this._onBinary.fire(n))}};i.CoreService=c=f([p(0,w.IBufferService),p(1,w.ILogService),p(2,w.IOptionsService)],c)},9074:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const f=a(8055),p=a(8460),h=a(844),v=a(6106);let C=0,w=0;class d extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(n=>n==null?void 0:n.marker.line),this._onDecorationRegistered=this.register(new p.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new p.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)(()=>this.reset()))}registerDecoration(n){if(n.marker.isDisposed)return;const l=new o(n);if(l){const g=l.marker.onDispose(()=>l.dispose());l.onDispose(()=>{l&&(this._decorations.delete(l)&&this._onDecorationRemoved.fire(l),g.dispose())}),this._decorations.insert(l),this._onDecorationRegistered.fire(l)}return l}reset(){for(const n of this._decorations.values())n.dispose();this._decorations.clear()}*getDecorationsAtCell(n,l,g){let b=0,S=0;for(const E of this._decorations.getKeyIterator(l))b=E.options.x??0,S=b+(E.options.width??1),n>=b&&n<S&&(!g||(E.options.layer??"bottom")===g)&&(yield E)}forEachDecorationAtCell(n,l,g,b){this._decorations.forEachByKey(l,S=>{C=S.options.x??0,w=C+(S.options.width??1),n>=C&&n<w&&(!g||(S.options.layer??"bottom")===g)&&b(S)})}}i.DecorationService=d;class o extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(n){super(),this.options=n,this.onRenderEmitter=this.register(new p.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=n.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const f=a(2585),p=a(8343);class h{constructor(...C){this._entries=new Map;for(const[w,d]of C)this.set(w,d)}set(C,w){const d=this._entries.get(C);return this._entries.set(C,w),d}forEach(C){for(const[w,d]of this._entries.entries())C(w,d)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}i.ServiceCollection=h,i.InstantiationService=class{constructor(){this._services=new h,this._services.set(f.IInstantiationService,this)}setService(v,C){this._services.set(v,C)}getService(v){return this._services.get(v)}createInstance(v,...C){const w=(0,p.getServiceDependencies)(v).sort((c,n)=>c.index-n.index),d=[];for(const c of w){const n=this._services.get(c.id);if(!n)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${c.id}.`);d.push(n)}const o=w.length>0?w[0].index:C.length;if(C.length!==o)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${o+1} conflicts with ${C.length} static arguments`);return new v(...C,...d)}}},7866:function(y,i,a){var f=this&&this.__decorate||function(o,c,n,l){var g,b=arguments.length,S=b<3?c:l===null?l=Object.getOwnPropertyDescriptor(c,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,c,n,l);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(S=(b<3?g(S):b>3?g(c,n,S):g(c,n))||S);return b>3&&S&&Object.defineProperty(c,n,S),S},p=this&&this.__param||function(o,c){return function(n,l){c(n,l,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=a(844),v=a(2585),C={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let w,d=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let c=0;c<o.length;c++)typeof o[c]=="function"&&(o[c]=o[c]())}_log(o,c,n){this._evalLazyOptionalParams(n),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...n)}trace(o,...c){var n;this._logLevel<=v.LogLevelEnum.TRACE&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.trace.bind(this._optionsService.options.logger))??console.log,o,c)}debug(o,...c){var n;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.debug.bind(this._optionsService.options.logger))??console.log,o,c)}info(o,...c){var n;this._logLevel<=v.LogLevelEnum.INFO&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.info.bind(this._optionsService.options.logger))??console.info,o,c)}warn(o,...c){var n;this._logLevel<=v.LogLevelEnum.WARN&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.warn.bind(this._optionsService.options.logger))??console.warn,o,c)}error(o,...c){var n;this._logLevel<=v.LogLevelEnum.ERROR&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.error.bind(this._optionsService.options.logger))??console.error,o,c)}};i.LogService=d=f([p(0,v.IOptionsService)],d),i.setTraceLogger=function(o){w=o},i.traceCall=function(o,c,n){if(typeof n.value!="function")throw new Error("not supported");const l=n.value;n.value=function(...g){if(w.logLevel!==v.LogLevelEnum.TRACE)return l.apply(this,g);w.trace(`GlyphRenderer#${l.name}(${g.map(S=>JSON.stringify(S)).join(", ")})`);const b=l.apply(this,g);return w.trace(`GlyphRenderer#${l.name} return`,b),b}}},7302:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const f=a(8460),p=a(844),h=a(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends p.Disposable{constructor(d){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o={...i.DEFAULT_OPTIONS};for(const c in d)if(c in o)try{const n=d[c];o[c]=this._sanitizeAndValidateOption(c,n)}catch(n){console.error(n)}this.rawOptions=o,this.options={...o},this._setupOptions(),this.register((0,p.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(d,o){return this.onOptionChange(c=>{c===d&&o(this.rawOptions[d])})}onMultipleOptionChange(d,o){return this.onOptionChange(c=>{d.indexOf(c)!==-1&&o()})}_setupOptions(){const d=c=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);return this.rawOptions[c]},o=(c,n)=>{if(!(c in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${c}"`);n=this._sanitizeAndValidateOption(c,n),this.rawOptions[c]!==n&&(this.rawOptions[c]=n,this._onOptionChange.fire(c))};for(const c in this.rawOptions){const n={get:d.bind(this,c),set:o.bind(this,c)};Object.defineProperty(this.options,c,n)}}_sanitizeAndValidateOption(d,o){switch(d){case"cursorStyle":if(o||(o=i.DEFAULT_OPTIONS[d]),!function(c){return c==="block"||c==="underline"||c==="bar"}(o))throw new Error(`"${o}" is not a valid value for ${d}`);break;case"wordSeparator":o||(o=i.DEFAULT_OPTIONS[d]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=v.includes(o)?o:i.DEFAULT_OPTIONS[d];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${d} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${d} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${d} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${d} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}i.OptionsService=C},2660:function(y,i,a){var f=this&&this.__decorate||function(C,w,d,o){var c,n=arguments.length,l=n<3?w:o===null?o=Object.getOwnPropertyDescriptor(w,d):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(C,w,d,o);else for(var g=C.length-1;g>=0;g--)(c=C[g])&&(l=(n<3?c(l):n>3?c(w,d,l):c(w,d))||l);return n>3&&l&&Object.defineProperty(w,d,l),l},p=this&&this.__param||function(C,w){return function(d,o){w(d,o,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const h=a(2585);let v=i.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const w=this._bufferService.buffer;if(C.id===void 0){const g=w.addMarker(w.ybase+w.y),b={data:C,id:this._nextId++,lines:[g]};return g.onDispose(()=>this._removeMarkerFromLink(b,g)),this._dataByLinkId.set(b.id,b),b.id}const d=C,o=this._getEntryIdKey(d),c=this._entriesWithId.get(o);if(c)return this.addLineToLink(c.id,w.ybase+w.y),c.id;const n=w.addMarker(w.ybase+w.y),l={id:this._nextId++,key:this._getEntryIdKey(d),data:d,lines:[n]};return n.onDispose(()=>this._removeMarkerFromLink(l,n)),this._entriesWithId.set(l.key,l),this._dataByLinkId.set(l.id,l),l.id}addLineToLink(C,w){const d=this._dataByLinkId.get(C);if(d&&d.lines.every(o=>o.line!==w)){const o=this._bufferService.buffer.addMarker(w);d.lines.push(o),o.onDispose(()=>this._removeMarkerFromLink(d,o))}}getLinkData(C){var w;return(w=this._dataByLinkId.get(C))==null?void 0:w.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,w){const d=C.lines.indexOf(w);d!==-1&&(C.lines.splice(d,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};i.OscLinkService=v=f([p(0,h.IBufferService)],v)},8343:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const a="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(p){return p[f]||[]},i.createDecorator=function(p){if(i.serviceRegistry.has(p))return i.serviceRegistry.get(p);const h=function(v,C,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,o,c){o[a]===o?o[f].push({id:d,index:c}):(o[f]=[{id:d,index:c}],o[a]=o)})(h,v,w)};return h.toString=()=>p,i.serviceRegistry.set(p,h),h}},2585:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=a(8343);var p;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(p||(i.LogLevelEnum=p={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const f=a(8460),p=a(225);class h{static extractShouldJoin(C){return(1&C)!=0}static extractWidth(C){return C>>1&3}static extractCharKind(C){return C>>3}static createPropertyValue(C,w,d=!1){return(16777215&C)<<3|(3&w)<<1|(d?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const C=new p.UnicodeV6;this.register(C),this._active=C.version,this._activeProvider=C}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(C){if(!this._providers[C])throw new Error(`unknown Unicode version "${C}"`);this._active=C,this._activeProvider=this._providers[C],this._onChange.fire(C)}register(C){this._providers[C.version]=C}wcwidth(C){return this._activeProvider.wcwidth(C)}getStringCellWidth(C){let w=0,d=0;const o=C.length;for(let c=0;c<o;++c){let n=C.charCodeAt(c);if(55296<=n&&n<=56319){if(++c>=o)return w+this.wcwidth(n);const b=C.charCodeAt(c);56320<=b&&b<=57343?n=1024*(n-55296)+b-56320+65536:w+=this.wcwidth(b)}const l=this.charProperties(n,d);let g=h.extractWidth(l);h.extractShouldJoin(l)&&(g-=h.extractWidth(d)),w+=g,d=l}return w}charProperties(C,w){return this._activeProvider.charProperties(C,w)}}i.UnicodeService=h}},s={};function u(y){var i=s[y];if(i!==void 0)return i.exports;var a=s[y]={exports:{}};return r[y].call(a.exports,a,a.exports,u),a.exports}var _={};return(()=>{var y=_;Object.defineProperty(y,"__esModule",{value:!0}),y.Terminal=void 0;const i=u(9042),a=u(3236),f=u(844),p=u(5741),h=u(8285),v=u(7975),C=u(7090),w=["cols","rows"];class d extends f.Disposable{constructor(c){super(),this._core=this.register(new a.Terminal(c)),this._addonManager=this.register(new p.AddonManager),this._publicOptions={...this._core.options};const n=g=>this._core.options[g],l=(g,b)=>{this._checkReadonlyOptions(g),this._core.options[g]=b};for(const g in this._core.options){const b={get:n.bind(this,g),set:l.bind(this,g)};Object.defineProperty(this._publicOptions,g,b)}}_checkReadonlyOptions(c){if(w.includes(c))throw new Error(`Option "${c}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const c=this._core.coreService.decPrivateModes;let n="none";switch(this._core.coreMouseService.activeProtocol){case"X10":n="x10";break;case"VT200":n="vt200";break;case"DRAG":n="drag";break;case"ANY":n="any"}return{applicationCursorKeysMode:c.applicationCursorKeys,applicationKeypadMode:c.applicationKeypad,bracketedPasteMode:c.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:n,originMode:c.origin,reverseWraparoundMode:c.reverseWraparound,sendFocusMode:c.sendFocus,wraparoundMode:c.wraparound}}get options(){return this._publicOptions}set options(c){for(const n in c)this._publicOptions[n]=c[n]}blur(){this._core.blur()}focus(){this._core.focus()}input(c,n=!0){this._core.input(c,n)}resize(c,n){this._verifyIntegers(c,n),this._core.resize(c,n)}open(c){this._core.open(c)}attachCustomKeyEventHandler(c){this._core.attachCustomKeyEventHandler(c)}attachCustomWheelEventHandler(c){this._core.attachCustomWheelEventHandler(c)}registerLinkProvider(c){return this._core.registerLinkProvider(c)}registerCharacterJoiner(c){return this._checkProposedApi(),this._core.registerCharacterJoiner(c)}deregisterCharacterJoiner(c){this._checkProposedApi(),this._core.deregisterCharacterJoiner(c)}registerMarker(c=0){return this._verifyIntegers(c),this._core.registerMarker(c)}registerDecoration(c){return this._checkProposedApi(),this._verifyPositiveIntegers(c.x??0,c.width??0,c.height??0),this._core.registerDecoration(c)}hasSelection(){return this._core.hasSelection()}select(c,n,l){this._verifyIntegers(c,n,l),this._core.select(c,n,l)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(c,n){this._verifyIntegers(c,n),this._core.selectLines(c,n)}dispose(){super.dispose()}scrollLines(c){this._verifyIntegers(c),this._core.scrollLines(c)}scrollPages(c){this._verifyIntegers(c),this._core.scrollPages(c)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(c){this._verifyIntegers(c),this._core.scrollToLine(c)}clear(){this._core.clear()}write(c,n){this._core.write(c,n)}writeln(c,n){this._core.write(c),this._core.write(`\r
`,n)}paste(c){this._core.paste(c)}refresh(c,n){this._verifyIntegers(c,n),this._core.refresh(c,n)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(c){this._addonManager.loadAddon(this,c)}static get strings(){return i}_verifyIntegers(...c){for(const n of c)if(n===1/0||isNaN(n)||n%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...c){for(const n of c)if(n&&(n===1/0||isNaN(n)||n%1!=0||n<0))throw new Error("This API only accepts positive integers")}}y.Terminal=d})(),_})())})(Pd);var sg=Pd.exports,Od={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;Object.defineProperty(s,"__esModule",{value:!0}),s.FitAddon=void 0,s.FitAddon=class{activate(u){this._terminal=u}dispose(){}fit(){const u=this.proposeDimensions();if(!u||!this._terminal||isNaN(u.cols)||isNaN(u.rows))return;const _=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(_._renderService.clear(),this._terminal.resize(u.cols,u.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const u=this._terminal._core,_=u._renderService.dimensions;if(_.css.cell.width===0||_.css.cell.height===0)return;const y=this._terminal.options.scrollback===0?0:u.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(i.getPropertyValue("height")),f=Math.max(0,parseInt(i.getPropertyValue("width"))),p=window.getComputedStyle(this._terminal.element),h=a-(parseInt(p.getPropertyValue("padding-top"))+parseInt(p.getPropertyValue("padding-bottom"))),v=f-(parseInt(p.getPropertyValue("padding-right"))+parseInt(p.getPropertyValue("padding-left")))-y;return{cols:Math.max(2,Math.floor(v/_.css.cell.width)),rows:Math.max(1,Math.floor(h/_.css.cell.height))}}}})(),r})())})(Od);var ng=Od.exports,Id={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={965:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlyphRenderer=void 0;const f=a(374),p=a(509),h=a(855),v=a(859),C=a(381),w=11,d=w*Float32Array.BYTES_PER_ELEMENT;let o,c=0,n=0,l=0;class g extends v.Disposable{constructor(S,E,m,x){super(),this._terminal=S,this._gl=E,this._dimensions=m,this._optionsService=x,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};const L=this._gl;p.TextureAtlas.maxAtlasPages===void 0&&(p.TextureAtlas.maxAtlasPages=Math.min(32,(0,f.throwIfFalsy)(L.getParameter(L.MAX_TEXTURE_IMAGE_UNITS))),p.TextureAtlas.maxTextureSize=(0,f.throwIfFalsy)(L.getParameter(L.MAX_TEXTURE_SIZE))),this._program=(0,f.throwIfFalsy)((0,C.createProgram)(L,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(H){let N="";for(let O=1;O<H;O++)N+=` else if (v_texpage == ${O}) { outColor = texture(u_texture[${O}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${H}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${N}
}`}(p.TextureAtlas.maxAtlasPages))),this.register((0,v.toDisposable)(()=>L.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(L.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,f.throwIfFalsy)(L.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,f.throwIfFalsy)(L.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=L.createVertexArray(),L.bindVertexArray(this._vertexArrayObject);const M=new Float32Array([0,0,1,0,0,1,1,1]),R=L.createBuffer();this.register((0,v.toDisposable)(()=>L.deleteBuffer(R))),L.bindBuffer(L.ARRAY_BUFFER,R),L.bufferData(L.ARRAY_BUFFER,M,L.STATIC_DRAW),L.enableVertexAttribArray(0),L.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);const D=new Uint8Array([0,1,2,3]),P=L.createBuffer();this.register((0,v.toDisposable)(()=>L.deleteBuffer(P))),L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,P),L.bufferData(L.ELEMENT_ARRAY_BUFFER,D,L.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(L.createBuffer()),this.register((0,v.toDisposable)(()=>L.deleteBuffer(this._attributesBuffer))),L.bindBuffer(L.ARRAY_BUFFER,this._attributesBuffer),L.enableVertexAttribArray(2),L.vertexAttribPointer(2,2,L.FLOAT,!1,d,0),L.vertexAttribDivisor(2,1),L.enableVertexAttribArray(3),L.vertexAttribPointer(3,2,L.FLOAT,!1,d,2*Float32Array.BYTES_PER_ELEMENT),L.vertexAttribDivisor(3,1),L.enableVertexAttribArray(4),L.vertexAttribPointer(4,1,L.FLOAT,!1,d,4*Float32Array.BYTES_PER_ELEMENT),L.vertexAttribDivisor(4,1),L.enableVertexAttribArray(5),L.vertexAttribPointer(5,2,L.FLOAT,!1,d,5*Float32Array.BYTES_PER_ELEMENT),L.vertexAttribDivisor(5,1),L.enableVertexAttribArray(6),L.vertexAttribPointer(6,2,L.FLOAT,!1,d,7*Float32Array.BYTES_PER_ELEMENT),L.vertexAttribDivisor(6,1),L.enableVertexAttribArray(1),L.vertexAttribPointer(1,2,L.FLOAT,!1,d,9*Float32Array.BYTES_PER_ELEMENT),L.vertexAttribDivisor(1,1),L.useProgram(this._program);const z=new Int32Array(p.TextureAtlas.maxAtlasPages);for(let H=0;H<p.TextureAtlas.maxAtlasPages;H++)z[H]=H;L.uniform1iv(this._textureLocation,z),L.uniformMatrix4fv(this._projectionLocation,!1,C.PROJECTION_MATRIX),this._atlasTextures=[];for(let H=0;H<p.TextureAtlas.maxAtlasPages;H++){const N=new C.GLTexture((0,f.throwIfFalsy)(L.createTexture()));this.register((0,v.toDisposable)(()=>L.deleteTexture(N.texture))),L.activeTexture(L.TEXTURE0+H),L.bindTexture(L.TEXTURE_2D,N.texture),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,L.CLAMP_TO_EDGE),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,L.CLAMP_TO_EDGE),L.texImage2D(L.TEXTURE_2D,0,L.RGBA,1,1,0,L.RGBA,L.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[H]=N}L.enable(L.BLEND),L.blendFunc(L.SRC_ALPHA,L.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(S,E,m,x,L,M,R,D,P){this._updateCell(this._vertices.attributes,S,E,m,x,L,M,R,D,P)}_updateCell(S,E,m,x,L,M,R,D,P,z){c=(m*this._terminal.cols+E)*w,x!==h.NULL_CELL_CODE&&x!==void 0?this._atlas&&(o=D&&D.length>1?this._atlas.getRasterizedGlyphCombinedChar(D,L,M,R,!1):this._atlas.getRasterizedGlyph(x,L,M,R,!1),n=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),L!==z&&o.offset.x>n?(l=o.offset.x-n,S[c]=-(o.offset.x-l)+this._dimensions.device.char.left,S[c+1]=-o.offset.y+this._dimensions.device.char.top,S[c+2]=(o.size.x-l)/this._dimensions.device.canvas.width,S[c+3]=o.size.y/this._dimensions.device.canvas.height,S[c+4]=o.texturePage,S[c+5]=o.texturePositionClipSpace.x+l/this._atlas.pages[o.texturePage].canvas.width,S[c+6]=o.texturePositionClipSpace.y,S[c+7]=o.sizeClipSpace.x-l/this._atlas.pages[o.texturePage].canvas.width,S[c+8]=o.sizeClipSpace.y):(S[c]=-o.offset.x+this._dimensions.device.char.left,S[c+1]=-o.offset.y+this._dimensions.device.char.top,S[c+2]=o.size.x/this._dimensions.device.canvas.width,S[c+3]=o.size.y/this._dimensions.device.canvas.height,S[c+4]=o.texturePage,S[c+5]=o.texturePositionClipSpace.x,S[c+6]=o.texturePositionClipSpace.y,S[c+7]=o.sizeClipSpace.x,S[c+8]=o.sizeClipSpace.y),this._optionsService.rawOptions.rescaleOverlappingGlyphs&&(0,f.allowRescaling)(x,P,o.size.x,this._dimensions.device.cell.width)&&(S[c+2]=(this._dimensions.device.cell.width-1)/this._dimensions.device.canvas.width)):S.fill(0,c,c+w-1-2)}clear(){const S=this._terminal,E=S.cols*S.rows*w;this._vertices.count!==E?this._vertices.attributes=new Float32Array(E):this._vertices.attributes.fill(0);let m=0;for(;m<this._vertices.attributesBuffers.length;m++)this._vertices.count!==E?this._vertices.attributesBuffers[m]=new Float32Array(E):this._vertices.attributesBuffers[m].fill(0);this._vertices.count=E,m=0;for(let x=0;x<S.rows;x++)for(let L=0;L<S.cols;L++)this._vertices.attributes[m+9]=L/S.cols,this._vertices.attributes[m+10]=x/S.rows,m+=w}handleResize(){const S=this._gl;S.useProgram(this._program),S.viewport(0,0,S.canvas.width,S.canvas.height),S.uniform2f(this._resolutionLocation,S.canvas.width,S.canvas.height),this.clear()}render(S){if(!this._atlas)return;const E=this._gl;E.useProgram(this._program),E.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;const m=this._vertices.attributesBuffers[this._activeBuffer];let x=0;for(let L=0;L<S.lineLengths.length;L++){const M=L*this._terminal.cols*w,R=this._vertices.attributes.subarray(M,M+S.lineLengths[L]*w);m.set(R,x),x+=R.length}E.bindBuffer(E.ARRAY_BUFFER,this._attributesBuffer),E.bufferData(E.ARRAY_BUFFER,m.subarray(0,x),E.STREAM_DRAW);for(let L=0;L<this._atlas.pages.length;L++)this._atlas.pages[L].version!==this._atlasTextures[L].version&&this._bindAtlasPageTexture(E,this._atlas,L);E.drawElementsInstanced(E.TRIANGLE_STRIP,4,E.UNSIGNED_BYTE,0,x/w)}setAtlas(S){this._atlas=S;for(const E of this._atlasTextures)E.version=-1}_bindAtlasPageTexture(S,E,m){S.activeTexture(S.TEXTURE0+m),S.bindTexture(S.TEXTURE_2D,this._atlasTextures[m].texture),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,E.pages[m].canvas),S.generateMipmap(S.TEXTURE_2D),this._atlasTextures[m].version=E.pages[m].version}setDimensions(S){this._dimensions=S}}i.GlyphRenderer=g},742:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RectangleRenderer=void 0;const f=a(374),p=a(859),h=a(310),v=a(381),C=8*Float32Array.BYTES_PER_ELEMENT;class w{constructor(){this.attributes=new Float32Array(160),this.count=0}}let d=0,o=0,c=0,n=0,l=0,g=0,b=0;class S extends p.Disposable{constructor(m,x,L,M){super(),this._terminal=m,this._gl=x,this._dimensions=L,this._themeService=M,this._vertices=new w,this._verticesCursor=new w;const R=this._gl;this._program=(0,f.throwIfFalsy)((0,v.createProgram)(R,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,p.toDisposable)(()=>R.deleteProgram(this._program))),this._projectionLocation=(0,f.throwIfFalsy)(R.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=R.createVertexArray(),R.bindVertexArray(this._vertexArrayObject);const D=new Float32Array([0,0,1,0,0,1,1,1]),P=R.createBuffer();this.register((0,p.toDisposable)(()=>R.deleteBuffer(P))),R.bindBuffer(R.ARRAY_BUFFER,P),R.bufferData(R.ARRAY_BUFFER,D,R.STATIC_DRAW),R.enableVertexAttribArray(3),R.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);const z=new Uint8Array([0,1,2,3]),H=R.createBuffer();this.register((0,p.toDisposable)(()=>R.deleteBuffer(H))),R.bindBuffer(R.ELEMENT_ARRAY_BUFFER,H),R.bufferData(R.ELEMENT_ARRAY_BUFFER,z,R.STATIC_DRAW),this._attributesBuffer=(0,f.throwIfFalsy)(R.createBuffer()),this.register((0,p.toDisposable)(()=>R.deleteBuffer(this._attributesBuffer))),R.bindBuffer(R.ARRAY_BUFFER,this._attributesBuffer),R.enableVertexAttribArray(0),R.vertexAttribPointer(0,2,R.FLOAT,!1,C,0),R.vertexAttribDivisor(0,1),R.enableVertexAttribArray(1),R.vertexAttribPointer(1,2,R.FLOAT,!1,C,2*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(1,1),R.enableVertexAttribArray(2),R.vertexAttribPointer(2,4,R.FLOAT,!1,C,4*Float32Array.BYTES_PER_ELEMENT),R.vertexAttribDivisor(2,1),this._updateCachedColors(M.colors),this.register(this._themeService.onChangeColors(N=>{this._updateCachedColors(N),this._updateViewportRectangle()}))}renderBackgrounds(){this._renderVertices(this._vertices)}renderCursor(){this._renderVertices(this._verticesCursor)}_renderVertices(m){const x=this._gl;x.useProgram(this._program),x.bindVertexArray(this._vertexArrayObject),x.uniformMatrix4fv(this._projectionLocation,!1,v.PROJECTION_MATRIX),x.bindBuffer(x.ARRAY_BUFFER,this._attributesBuffer),x.bufferData(x.ARRAY_BUFFER,m.attributes,x.DYNAMIC_DRAW),x.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,x.UNSIGNED_BYTE,0,m.count)}handleResize(){this._updateViewportRectangle()}setDimensions(m){this._dimensions=m}_updateCachedColors(m){this._bgFloat=this._colorToFloat32Array(m.background),this._cursorFloat=this._colorToFloat32Array(m.cursor)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(m){const x=this._terminal,L=this._vertices;let M,R,D,P,z,H,N,O,k,A,B,I=1;for(M=0;M<x.rows;M++){for(D=-1,P=0,z=0,H=!1,R=0;R<x.cols;R++)N=(M*x.cols+R)*h.RENDER_MODEL_INDICIES_PER_CELL,O=m.cells[N+h.RENDER_MODEL_BG_OFFSET],k=m.cells[N+h.RENDER_MODEL_FG_OFFSET],A=!!(67108864&k),(O!==P||k!==z&&(H||A))&&((P!==0||H&&z!==0)&&(B=8*I++,this._updateRectangle(L,B,z,P,D,R,M)),D=R,P=O,z=k,H=A);(P!==0||H&&z!==0)&&(B=8*I++,this._updateRectangle(L,B,z,P,D,x.cols,M))}L.count=I}updateCursor(m){const x=this._verticesCursor,L=m.cursor;if(!L||L.style==="block")return void(x.count=0);let M,R=0;L.style!=="bar"&&L.style!=="outline"||(M=8*R++,this._addRectangleFloat(x.attributes,M,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.style==="bar"?L.dpr*L.cursorWidth:L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),L.style!=="underline"&&L.style!=="outline"||(M=8*R++,this._addRectangleFloat(x.attributes,M,L.x*this._dimensions.device.cell.width,(L.y+1)*this._dimensions.device.cell.height-L.dpr,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat)),L.style==="outline"&&(M=8*R++,this._addRectangleFloat(x.attributes,M,L.x*this._dimensions.device.cell.width,L.y*this._dimensions.device.cell.height,L.width*this._dimensions.device.cell.width,L.dpr,this._cursorFloat),M=8*R++,this._addRectangleFloat(x.attributes,M,(L.x+L.width)*this._dimensions.device.cell.width-L.dpr,L.y*this._dimensions.device.cell.height,L.dpr,this._dimensions.device.cell.height,this._cursorFloat)),x.count=R}_updateRectangle(m,x,L,M,R,D,P){if(67108864&L)switch(50331648&L){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&L].rgba;break;case 50331648:d=(16777215&L)<<8;break;default:d=this._themeService.colors.foreground.rgba}else switch(50331648&M){case 16777216:case 33554432:d=this._themeService.colors.ansi[255&M].rgba;break;case 50331648:d=(16777215&M)<<8;break;default:d=this._themeService.colors.background.rgba}m.attributes.length<x+4&&(m.attributes=(0,v.expandFloat32Array)(m.attributes,this._terminal.rows*this._terminal.cols*8)),o=R*this._dimensions.device.cell.width,c=P*this._dimensions.device.cell.height,n=(d>>24&255)/255,l=(d>>16&255)/255,g=(d>>8&255)/255,b=1,this._addRectangle(m.attributes,x,o,c,(D-R)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,n,l,g,b)}_addRectangle(m,x,L,M,R,D,P,z,H,N){m[x]=L/this._dimensions.device.canvas.width,m[x+1]=M/this._dimensions.device.canvas.height,m[x+2]=R/this._dimensions.device.canvas.width,m[x+3]=D/this._dimensions.device.canvas.height,m[x+4]=P,m[x+5]=z,m[x+6]=H,m[x+7]=N}_addRectangleFloat(m,x,L,M,R,D,P){m[x]=L/this._dimensions.device.canvas.width,m[x+1]=M/this._dimensions.device.canvas.height,m[x+2]=R/this._dimensions.device.canvas.width,m[x+3]=D/this._dimensions.device.canvas.height,m[x+4]=P[0],m[x+5]=P[1],m[x+6]=P[2],m[x+7]=P[3]}_colorToFloat32Array(m){return new Float32Array([(m.rgba>>24&255)/255,(m.rgba>>16&255)/255,(m.rgba>>8&255)/255,(255&m.rgba)/255])}}i.RectangleRenderer=S},310:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderModel=i.COMBINED_CHAR_BIT_MASK=i.RENDER_MODEL_EXT_OFFSET=i.RENDER_MODEL_FG_OFFSET=i.RENDER_MODEL_BG_OFFSET=i.RENDER_MODEL_INDICIES_PER_CELL=void 0;const f=a(296);i.RENDER_MODEL_INDICIES_PER_CELL=4,i.RENDER_MODEL_BG_OFFSET=1,i.RENDER_MODEL_FG_OFFSET=2,i.RENDER_MODEL_EXT_OFFSET=3,i.COMBINED_CHAR_BIT_MASK=2147483648,i.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,f.createSelectionRenderModel)()}resize(p,h){const v=p*h*i.RENDER_MODEL_INDICIES_PER_CELL;v!==this.cells.length&&(this.cells=new Uint32Array(v),this.lineLengths=new Uint32Array(h))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.JoinedCellData=i.WebglRenderer=void 0;const f=a(820),p=a(274),h=a(627),v=a(457),C=a(56),w=a(374),d=a(345),o=a(859),c=a(147),n=a(782),l=a(855),g=a(965),b=a(742),S=a(310),E=a(733);class m extends o.Disposable{constructor(R,D,P,z,H,N,O,k,A){super(),this._terminal=R,this._characterJoinerService=D,this._charSizeService=P,this._coreBrowserService=z,this._coreService=H,this._decorationService=N,this._optionsService=O,this._themeService=k,this._cursorBlinkStateManager=new o.MutableDisposable,this._charAtlasDisposable=this.register(new o.MutableDisposable),this._observerDisposable=this.register(new o.MutableDisposable),this._model=new S.RenderModel,this._workCell=new n.CellData,this._workCell2=new n.CellData,this._rectangleRenderer=this.register(new o.MutableDisposable),this._glyphRenderer=this.register(new o.MutableDisposable),this._onChangeTextureAtlas=this.register(new d.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new d.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new d.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new d.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new d.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new p.CellColorResolver(this._terminal,this._optionsService,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new E.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier,this._coreBrowserService,O,this._themeService)],this.dimensions=(0,w.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this._updateCursorBlink(),this.register(O.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=this._coreBrowserService.mainDocument.createElement("canvas");const B={antialias:!1,depth:!1,preserveDrawingBuffer:A};if(this._gl=this._canvas.getContext("webgl2",B),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextlost",I=>{console.log("webglcontextlost event received"),I.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(I)},3e3)})),this.register((0,f.addDisposableDomListener)(this._canvas,"webglcontextrestored",I=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,h.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this._observerDisposable.value=(0,C.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(I,U)=>this._setCanvasDevicePixelDimensions(I,U)),this.register(this._coreBrowserService.onWindowChange(I=>{this._observerDisposable.value=(0,C.observeDevicePixelDimensions)(this._canvas,I,(U,V)=>this._setCanvasDevicePixelDimensions(U,V))})),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer.value,this._glyphRenderer.value]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,o.toDisposable)(()=>{var I;for(const U of this._renderLayers)U.dispose();(I=this._canvas.parentElement)==null||I.removeChild(this._canvas),(0,h.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var R;return(R=this._charAtlas)==null?void 0:R.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(R,D){var P,z,H,N;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(const O of this._renderLayers)O.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,(P=this._rectangleRenderer.value)==null||P.setDimensions(this.dimensions),(z=this._rectangleRenderer.value)==null||z.handleResize(),(H=this._glyphRenderer.value)==null||H.setDimensions(this.dimensions),(N=this._glyphRenderer.value)==null||N.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){var R;for(const D of this._renderLayers)D.handleBlur(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.pause(),this._requestRedrawViewport()}handleFocus(){var R;for(const D of this._renderLayers)D.handleFocus(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.resume(),this._requestRedrawViewport()}handleSelectionChanged(R,D,P){for(const z of this._renderLayers)z.handleSelectionChanged(this._terminal,R,D,P);this._model.selection.update(this._core,R,D,P),this._requestRedrawViewport()}handleCursorMove(){var R;for(const D of this._renderLayers)D.handleCursorMove(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.restartBlinkAnimation()}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas(),this._updateCursorBlink()}_initializeWebGLState(){return this._rectangleRenderer.value=new b.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService),this._glyphRenderer.value=new g.GlyphRenderer(this._terminal,this._gl,this.dimensions,this._optionsService),this.handleCharSizeChanged(),[this._rectangleRenderer.value,this._glyphRenderer.value]}_refreshCharAtlas(){var D;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);const R=(0,h.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==R&&(this._onChangeTextureAtlas.fire(R.pages[0].canvas),this._charAtlasDisposable.value=(0,o.getDisposeArrayDisposable)([(0,d.forwardEvent)(R.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,d.forwardEvent)(R.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=R,this._charAtlas.warmUp(),(D=this._glyphRenderer.value)==null||D.setAtlas(this._charAtlas)}_clearModel(R){var D;this._model.clear(),R&&((D=this._glyphRenderer.value)==null||D.clear())}clearTextureAtlas(){var R;(R=this._charAtlas)==null||R.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){var R;this._clearModel(!0);for(const D of this._renderLayers)D.reset(this._terminal);(R=this._cursorBlinkStateManager.value)==null||R.restartBlinkAnimation(),this._updateCursorBlink()}registerCharacterJoiner(R){return-1}deregisterCharacterJoiner(R){return!1}renderRows(R,D){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(const P of this._renderLayers)P.handleGridChanged(this._terminal,R,D);this._glyphRenderer.value&&this._rectangleRenderer.value&&(this._glyphRenderer.value.beginFrame()?(this._clearModel(!0),this._updateModel(0,this._terminal.rows-1)):this._updateModel(R,D),this._rectangleRenderer.value.renderBackgrounds(),this._glyphRenderer.value.render(this._model),this._cursorBlinkStateManager.value&&!this._cursorBlinkStateManager.value.isCursorVisible||this._rectangleRenderer.value.renderCursor())}_updateCursorBlink(){this._terminal.options.cursorBlink?this._cursorBlinkStateManager.value=new v.CursorBlinkStateManager(()=>{this._requestRedrawCursor()},this._coreBrowserService):this._cursorBlinkStateManager.clear(),this._requestRedrawCursor()}_updateModel(R,D){const P=this._core;let z,H,N,O,k,A,B,I,U,V,Q,X,F,T,j=this._workCell;R=L(R,P.rows-1,0),D=L(D,P.rows-1,0);const W=this._terminal.buffer.active.baseY+this._terminal.buffer.active.cursorY,Y=W-P.buffer.ydisp,q=Math.min(this._terminal.buffer.active.cursorX,P.cols-1);let re=-1;const ee=this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden&&(!this._cursorBlinkStateManager.value||this._cursorBlinkStateManager.value.isCursorVisible);this._model.cursor=void 0;let ce=!1;for(H=R;H<=D;H++)for(N=H+P.buffer.ydisp,O=P.buffer.lines.get(N),this._model.lineLengths[H]=0,k=this._characterJoinerService.getJoinedCharacters(N),F=0;F<P.cols;F++)if(z=this._cellColorResolver.result.bg,O.loadCell(F,j),F===0&&(z=this._cellColorResolver.result.bg),A=!1,B=F,k.length>0&&F===k[0][0]&&(A=!0,I=k.shift(),j=new x(j,O.translateToString(!0,I[0],I[1]),I[1]-I[0]),B=I[1]-1),U=j.getChars(),V=j.getCode(),X=(H*P.cols+F)*S.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(j,F,N,this.dimensions.device.cell.width),ee&&N===W&&(F===q&&(this._model.cursor={x:q,y:Y,width:j.getWidth(),style:this._coreBrowserService.isFocused?P.options.cursorStyle||"block":P.options.cursorInactiveStyle,cursorWidth:P.options.cursorWidth,dpr:this._devicePixelRatio},re=q+j.getWidth()-1),F>=q&&F<=re&&(this._coreBrowserService.isFocused&&(P.options.cursorStyle||"block")==="block"||this._coreBrowserService.isFocused===!1&&P.options.cursorInactiveStyle==="block")&&(this._cellColorResolver.result.fg=50331648|this._themeService.colors.cursorAccent.rgba>>8&16777215,this._cellColorResolver.result.bg=50331648|this._themeService.colors.cursor.rgba>>8&16777215)),V!==l.NULL_CELL_CODE&&(this._model.lineLengths[H]=F+1),(this._model.cells[X]!==V||this._model.cells[X+S.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[X+S.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[X+S.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(ce=!0,U.length>1&&(V|=S.COMBINED_CHAR_BIT_MASK),this._model.cells[X]=V,this._model.cells[X+S.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[X+S.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[X+S.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,Q=j.getWidth(),this._glyphRenderer.value.updateCell(F,H,V,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,U,Q,z),A))for(j=this._workCell,F++;F<B;F++)T=(H*P.cols+F)*S.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.value.updateCell(F,H,l.NULL_CELL_CODE,0,0,0,l.NULL_CELL_CHAR,0,0),this._model.cells[T]=l.NULL_CELL_CODE,this._model.cells[T+S.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[T+S.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[T+S.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;ce&&this._rectangleRenderer.value.updateBackgrounds(this._model),this._rectangleRenderer.value.updateCursor(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(R,D){this._canvas.width===R&&this._canvas.height===D||(this._canvas.width=R,this._canvas.height=D,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}_requestRedrawCursor(){const R=this._terminal.buffer.active.cursorY;this._onRequestRedraw.fire({start:R,end:R})}}i.WebglRenderer=m;class x extends c.AttributeData{constructor(R,D,P){super(),this.content=0,this.combinedData="",this.fg=R.fg,this.bg=R.bg,this.combinedData=D,this._width=P}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(R){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}function L(M,R,D=0){return Math.max(Math.min(M,R),D)}i.JoinedCellData=x},381:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GLTexture=i.expandFloat32Array=i.createShader=i.createProgram=i.PROJECTION_MATRIX=void 0;const f=a(374);function p(h,v,C){const w=(0,f.throwIfFalsy)(h.createShader(v));if(h.shaderSource(w,C),h.compileShader(w),h.getShaderParameter(w,h.COMPILE_STATUS))return w;console.error(h.getShaderInfoLog(w)),h.deleteShader(w)}i.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),i.createProgram=function(h,v,C){const w=(0,f.throwIfFalsy)(h.createProgram());if(h.attachShader(w,(0,f.throwIfFalsy)(p(h,h.VERTEX_SHADER,v))),h.attachShader(w,(0,f.throwIfFalsy)(p(h,h.FRAGMENT_SHADER,C))),h.linkProgram(w),h.getProgramParameter(w,h.LINK_STATUS))return w;console.error(h.getProgramInfoLog(w)),h.deleteProgram(w)},i.createShader=p,i.expandFloat32Array=function(h,v){const C=Math.min(2*h.length,v),w=new Float32Array(C);for(let d=0;d<h.length;d++)w[d]=h[d];return w},i.GLTexture=class{constructor(h){this.texture=h,this.version=-1}}},592:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseRenderLayer=void 0;const f=a(627),p=a(237),h=a(374),v=a(859);class C extends v.Disposable{constructor(d,o,c,n,l,g,b,S){super(),this._container=o,this._alpha=l,this._coreBrowserService=g,this._optionsService=b,this._themeService=S,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add(`xterm-${c}-layer`),this._canvas.style.zIndex=n.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(E=>{this._refreshCharAtlas(d,E),this.reset(d)})),this.register((0,v.toDisposable)(()=>{this._canvas.remove()}))}_initCanvas(){this._ctx=(0,h.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(d){}handleFocus(d){}handleCursorMove(d){}handleGridChanged(d,o,c){}handleSelectionChanged(d,o,c,n=!1){}_setTransparency(d,o){if(o===this._alpha)return;const c=this._canvas;this._alpha=o,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,c),this._refreshCharAtlas(d,this._themeService.colors),this.handleGridChanged(d,0,d.rows-1)}_refreshCharAtlas(d,o){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,f.acquireTextureAtlas)(d,this._optionsService.rawOptions,o,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(d,o){this._deviceCellWidth=o.device.cell.width,this._deviceCellHeight=o.device.cell.height,this._deviceCharWidth=o.device.char.width,this._deviceCharHeight=o.device.char.height,this._deviceCharLeft=o.device.char.left,this._deviceCharTop=o.device.char.top,this._canvas.width=o.device.canvas.width,this._canvas.height=o.device.canvas.height,this._canvas.style.width=`${o.css.canvas.width}px`,this._canvas.style.height=`${o.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(d,this._themeService.colors)}_fillBottomLineAtCells(d,o,c=1){this._ctx.fillRect(d*this._deviceCellWidth,(o+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,c*this._deviceCellWidth,this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(d,o,c,n){this._alpha?this._ctx.clearRect(d*this._deviceCellWidth,o*this._deviceCellHeight,c*this._deviceCellWidth,n*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(d*this._deviceCellWidth,o*this._deviceCellHeight,c*this._deviceCellWidth,n*this._deviceCellHeight))}_fillCharTrueColor(d,o,c,n){this._ctx.font=this._getFont(d,!1,!1),this._ctx.textBaseline=p.TEXT_BASELINE,this._clipCell(c,n,o.getWidth()),this._ctx.fillText(o.getChars(),c*this._deviceCellWidth+this._deviceCharLeft,n*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(d,o,c){this._ctx.beginPath(),this._ctx.rect(d*this._deviceCellWidth,o*this._deviceCellHeight,c*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(d,o,c){return`${c?"italic":""} ${o?d.options.fontWeightBold:d.options.fontWeight} ${d.options.fontSize*this._coreBrowserService.dpr}px ${d.options.fontFamily}`}}i.BaseRenderLayer=C},733:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.LinkRenderLayer=void 0;const f=a(197),p=a(237),h=a(592);class v extends h.BaseRenderLayer{constructor(w,d,o,c,n,l,g){super(o,w,"link",d,!0,n,l,g),this.register(c.onShowLinkUnderline(b=>this._handleShowLinkUnderline(b))),this.register(c.onHideLinkUnderline(b=>this._handleHideLinkUnderline(b)))}resize(w,d){super.resize(w,d),this._state=void 0}reset(w){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);const w=this._state.y2-this._state.y1-1;w>0&&this._clearCells(0,this._state.y1+1,this._state.cols,w),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(w){if(w.fg===p.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:w.fg!==void 0&&(0,f.is256Color)(w.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[w.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,w.y1===w.y2)this._fillBottomLineAtCells(w.x1,w.y1,w.x2-w.x1);else{this._fillBottomLineAtCells(w.x1,w.y1,w.cols-w.x1);for(let d=w.y1+1;d<w.y2;d++)this._fillBottomLineAtCells(0,d,w.cols);this._fillBottomLineAtCells(0,w.y2,w.x2)}this._state=w}_handleHideLinkUnderline(w){this._clearCurrentLink()}}i.LinkRenderLayer=v},820:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(a,f,p,h){a.addEventListener(f,p,h);let v=!1;return{dispose:()=>{v||(v=!0,a.removeEventListener(f,p,h))}}}},274:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellColorResolver=void 0;const f=a(855),p=a(160),h=a(374);let v,C=0,w=0,d=!1,o=!1,c=!1,n=0;i.CellColorResolver=class{constructor(l,g,b,S,E,m){this._terminal=l,this._optionService=g,this._selectionRenderModel=b,this._decorationService=S,this._coreBrowserService=E,this._themeService=m,this.result={fg:0,bg:0,ext:0}}resolve(l,g,b,S){if(this.result.bg=l.bg,this.result.fg=l.fg,this.result.ext=268435456&l.bg?l.extended.ext:0,w=0,C=0,o=!1,d=!1,c=!1,v=this._themeService.colors,n=0,l.getCode()!==f.NULL_CELL_CODE&&l.extended.underlineStyle===4){const E=Math.max(1,Math.floor(this._optionService.rawOptions.fontSize*this._coreBrowserService.dpr/15));n=g*S%(2*Math.round(E))}if(this._decorationService.forEachDecorationAtCell(g,b,"bottom",E=>{E.backgroundColorRGB&&(w=E.backgroundColorRGB.rgba>>8&16777215,o=!0),E.foregroundColorRGB&&(C=E.foregroundColorRGB.rgba>>8&16777215,d=!0)}),c=this._selectionRenderModel.isCellSelected(this._terminal,g,b),c){if(67108864&this.result.fg||50331648&this.result.bg){if(67108864&this.result.fg)switch(50331648&this.result.fg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:w=(16777215&this.result.fg)<<8|255;break;default:w=this._themeService.colors.foreground.rgba}else switch(50331648&this.result.bg){case 16777216:case 33554432:w=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:w=(16777215&this.result.bg)<<8|255}w=p.rgba.blend(w,4294967040&(this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}else w=(this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque).rgba>>8&16777215;if(o=!0,v.selectionForeground&&(C=v.selectionForeground.rgba>>8&16777215,d=!0),(0,h.treatGlyphAsBackgroundColor)(l.getCode())){if(67108864&this.result.fg&&!(50331648&this.result.bg))C=(this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque).rgba>>8&16777215;else{if(67108864&this.result.fg)switch(50331648&this.result.bg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.bg].rgba;break;case 50331648:C=(16777215&this.result.bg)<<8|255}else switch(50331648&this.result.fg){case 16777216:case 33554432:C=this._themeService.colors.ansi[255&this.result.fg].rgba;break;case 50331648:C=(16777215&this.result.fg)<<8|255;break;default:C=this._themeService.colors.foreground.rgba}C=p.rgba.blend(C,4294967040&(this._coreBrowserService.isFocused?v.selectionBackgroundOpaque:v.selectionInactiveBackgroundOpaque).rgba|128)>>8&16777215}d=!0}}this._decorationService.forEachDecorationAtCell(g,b,"top",E=>{E.backgroundColorRGB&&(w=E.backgroundColorRGB.rgba>>8&16777215,o=!0),E.foregroundColorRGB&&(C=E.foregroundColorRGB.rgba>>8&16777215,d=!0)}),o&&(w=c?-16777216&l.bg&-134217729|w|50331648:-16777216&l.bg|w|50331648),d&&(C=-16777216&l.fg&-67108865|C|50331648),67108864&this.result.fg&&(o&&!d&&(C=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&v.background.rgba>>8|50331648,d=!0),!o&&d&&(w=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&v.foreground.rgba>>8|50331648,o=!0)),v=void 0,this.result.bg=o?w:this.result.bg,this.result.fg=d?C:this.result.fg,this.result.ext&=536870911,this.result.ext|=n<<29&3758096384}}},627:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.removeTerminalFromCache=i.acquireTextureAtlas=void 0;const f=a(509),p=a(197),h=[];i.acquireTextureAtlas=function(v,C,w,d,o,c,n,l){const g=(0,p.generateConfig)(d,o,c,n,C,w,l);for(let E=0;E<h.length;E++){const m=h[E],x=m.ownedBy.indexOf(v);if(x>=0){if((0,p.configEquals)(m.config,g))return m.atlas;m.ownedBy.length===1?(m.atlas.dispose(),h.splice(E,1)):m.ownedBy.splice(x,1);break}}for(let E=0;E<h.length;E++){const m=h[E];if((0,p.configEquals)(m.config,g))return m.ownedBy.push(v),m.atlas}const b=v._core,S={atlas:new f.TextureAtlas(document,g,b.unicodeService),config:g,ownedBy:[v]};return h.push(S),S.atlas},i.removeTerminalFromCache=function(v){for(let C=0;C<h.length;C++){const w=h[C].ownedBy.indexOf(v);if(w!==-1){h[C].ownedBy.length===1?(h[C].atlas.dispose(),h.splice(C,1)):h[C].ownedBy.splice(w,1);break}}}},197:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.is256Color=i.configEquals=i.generateConfig=void 0;const f=a(160);i.generateConfig=function(p,h,v,C,w,d,o){const c={foreground:d.foreground,background:d.background,cursor:f.NULL_COLOR,cursorAccent:f.NULL_COLOR,selectionForeground:f.NULL_COLOR,selectionBackgroundTransparent:f.NULL_COLOR,selectionBackgroundOpaque:f.NULL_COLOR,selectionInactiveBackgroundTransparent:f.NULL_COLOR,selectionInactiveBackgroundOpaque:f.NULL_COLOR,ansi:d.ansi.slice(),contrastCache:d.contrastCache,halfContrastCache:d.halfContrastCache};return{customGlyphs:w.customGlyphs,devicePixelRatio:o,letterSpacing:w.letterSpacing,lineHeight:w.lineHeight,deviceCellWidth:p,deviceCellHeight:h,deviceCharWidth:v,deviceCharHeight:C,fontFamily:w.fontFamily,fontSize:w.fontSize,fontWeight:w.fontWeight,fontWeightBold:w.fontWeightBold,allowTransparency:w.allowTransparency,drawBoldTextInBrightColors:w.drawBoldTextInBrightColors,minimumContrastRatio:w.minimumContrastRatio,colors:c}},i.configEquals=function(p,h){for(let v=0;v<p.colors.ansi.length;v++)if(p.colors.ansi[v].rgba!==h.colors.ansi[v].rgba)return!1;return p.devicePixelRatio===h.devicePixelRatio&&p.customGlyphs===h.customGlyphs&&p.lineHeight===h.lineHeight&&p.letterSpacing===h.letterSpacing&&p.fontFamily===h.fontFamily&&p.fontSize===h.fontSize&&p.fontWeight===h.fontWeight&&p.fontWeightBold===h.fontWeightBold&&p.allowTransparency===h.allowTransparency&&p.deviceCharWidth===h.deviceCharWidth&&p.deviceCharHeight===h.deviceCharHeight&&p.drawBoldTextInBrightColors===h.drawBoldTextInBrightColors&&p.minimumContrastRatio===h.minimumContrastRatio&&p.colors.foreground.rgba===h.colors.foreground.rgba&&p.colors.background.rgba===h.colors.background.rgba},i.is256Color=function(p){return(50331648&p)==16777216||(50331648&p)==33554432}},237:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const f=a(399);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},457:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CursorBlinkStateManager=void 0,i.CursorBlinkStateManager=class{constructor(a,f){this._renderCallback=a,this._coreBrowserService=f,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(a=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,f>0)return void this._restartInterval(f)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){const f=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(f)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},a)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},860:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tryDrawCustomChar=i.powerlineDefinitions=i.boxDrawingDefinitions=i.blockElementDefinitions=void 0;const f=a(374);i.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};const p={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};i.boxDrawingDefinitions={"":{1:"M0,.5 L1,.5"},"":{3:"M0,.5 L1,.5"},"":{1:"M.5,0 L.5,1"},"":{3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5"},"":{3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M0,.5 L.5,.5 L.5,1"},"":{3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L1,.5"},"":{3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L0,.5"},"":{3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"":{1:"M.5,.5 L0,.5"},"":{3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0"},"":{3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5"},"":{3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1"},"":{3:"M.5,.5 L.5,1"},"":{1:(d,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"":{1:(d,o)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"":{1:(d,o)=>`M.5,1 L.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"":{1:(d,o)=>`M${.5-d},1 L${.5-d},.5 L1,.5 M${.5+d},.5 L${.5+d},1`},"":{1:(d,o)=>`M1,${.5-o} L${.5-d},${.5-o} L${.5-d},1 M1,${.5+o} L${.5+d},${.5+o} L${.5+d},1`},"":{1:(d,o)=>`M0,${.5-o} L.5,${.5-o} L.5,1 M0,${.5+o} L.5,${.5+o}`},"":{1:(d,o)=>`M${.5+d},1 L${.5+d},.5 L0,.5 M${.5-d},.5 L${.5-d},1`},"":{1:(d,o)=>`M0,${.5+o} L${.5-d},${.5+o} L${.5-d},1 M0,${.5-o} L${.5+d},${.5-o} L${.5+d},1`},"":{1:(d,o)=>`M.5,0 L.5,${.5+o} L1,${.5+o} M.5,${.5-o} L1,${.5-o}`},"":{1:(d,o)=>`M1,.5 L${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"":{1:(d,o)=>`M1,${.5-o} L${.5+d},${.5-o} L${.5+d},0 M1,${.5+o} L${.5-d},${.5+o} L${.5-d},0`},"":{1:(d,o)=>`M0,${.5+o} L.5,${.5+o} L.5,0 M0,${.5-o} L.5,${.5-o}`},"":{1:(d,o)=>`M0,.5 L${.5+d},.5 L${.5+d},0 M${.5-d},.5 L${.5-d},0`},"":{1:(d,o)=>`M0,${.5-o} L${.5-d},${.5-o} L${.5-d},0 M0,${.5+o} L${.5+d},${.5+o} L${.5+d},0`},"":{1:(d,o)=>`M.5,0 L.5,1 M.5,${.5-o} L1,${.5-o} M.5,${.5+o} L1,${.5+o}`},"":{1:(d,o)=>`M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1 M${.5+d},.5 L1,.5`},"":{1:(d,o)=>`M${.5-d},0 L${.5-d},1 M1,${.5+o} L${.5+d},${.5+o} L${.5+d},1 M1,${.5-o} L${.5+d},${.5-o} L${.5+d},0`},"":{1:(d,o)=>`M.5,0 L.5,1 M0,${.5-o} L.5,${.5-o} M0,${.5+o} L.5,${.5+o}`},"":{1:(d,o)=>`M0,.5 L${.5-d},.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"":{1:(d,o)=>`M${.5+d},0 L${.5+d},1 M0,${.5+o} L${.5-d},${.5+o} L${.5-d},1 M0,${.5-o} L${.5-d},${.5-o} L${.5-d},0`},"":{1:(d,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o} M.5,${.5+o} L.5,1`},"":{1:(d,o)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},1 M${.5+d},.5 L${.5+d},1`},"":{1:(d,o)=>`M0,${.5-o} L1,${.5-o} M0,${.5+o} L${.5-d},${.5+o} L${.5-d},1 M1,${.5+o} L${.5+d},${.5+o} L${.5+d},1`},"":{1:(d,o)=>`M.5,0 L.5,${.5-o} M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"":{1:(d,o)=>`M0,.5 L1,.5 M${.5-d},.5 L${.5-d},0 M${.5+d},.5 L${.5+d},0`},"":{1:(d,o)=>`M0,${.5+o} L1,${.5+o} M0,${.5-o} L${.5-d},${.5-o} L${.5-d},0 M1,${.5-o} L${.5+d},${.5-o} L${.5+d},0`},"":{1:(d,o)=>`M.5,0 L.5,1 M0,${.5-o} L1,${.5-o} M0,${.5+o} L1,${.5+o}`},"":{1:(d,o)=>`M0,.5 L1,.5 M${.5-d},0 L${.5-d},1 M${.5+d},0 L${.5+d},1`},"":{1:(d,o)=>`M0,${.5+o} L${.5-d},${.5+o} L${.5-d},1 M1,${.5+o} L${.5+d},${.5+o} L${.5+d},1 M0,${.5-o} L${.5-d},${.5-o} L${.5-d},0 M1,${.5-o} L${.5+d},${.5-o} L${.5+d},0`},"":{1:"M1,0 L0,1"},"":{1:"M0,0 L1,1"},"":{1:"M1,0 L0,1 M0,0 L1,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"":{1:(d,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,1,.5`},"":{1:(d,o)=>`M.5,1 L.5,${.5+o/.15*.5} C.5,${.5+o/.15*.5},.5,.5,0,.5`},"":{1:(d,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,0,.5`},"":{1:(d,o)=>`M.5,0 L.5,${.5-o/.15*.5} C.5,${.5-o/.15*.5},.5,.5,1,.5`}},i.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"":{d:"M.2,1 C.422,1,.8,.826,.78,.5 C.8,.174,0.422,0,.2,0",type:1,rightPadding:1},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"":{d:"M.8,1 C0.578,1,0.2,.826,.22,.5 C0.2,0.174,0.578,0,0.8,0",type:1,leftPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.powerlineDefinitions[""]=i.powerlineDefinitions[""],i.tryDrawCustomChar=function(d,o,c,n,l,g,b,S){const E=i.blockElementDefinitions[o];if(E)return function(M,R,D,P,z,H){for(let N=0;N<R.length;N++){const O=R[N],k=z/8,A=H/8;M.fillRect(D+O.x*k,P+O.y*A,O.w*k,O.h*A)}}(d,E,c,n,l,g),!0;const m=p[o];if(m)return function(M,R,D,P,z,H){let N=h.get(R);N||(N=new Map,h.set(R,N));const O=M.fillStyle;if(typeof O!="string")throw new Error(`Unexpected fillStyle type "${O}"`);let k=N.get(O);if(!k){const A=R[0].length,B=R.length,I=M.canvas.ownerDocument.createElement("canvas");I.width=A,I.height=B;const U=(0,f.throwIfFalsy)(I.getContext("2d")),V=new ImageData(A,B);let Q,X,F,T;if(O.startsWith("#"))Q=parseInt(O.slice(1,3),16),X=parseInt(O.slice(3,5),16),F=parseInt(O.slice(5,7),16),T=O.length>7&&parseInt(O.slice(7,9),16)||1;else{if(!O.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${O}" when drawing pattern glyph`);[Q,X,F,T]=O.substring(5,O.length-1).split(",").map(j=>parseFloat(j))}for(let j=0;j<B;j++)for(let W=0;W<A;W++)V.data[4*(j*A+W)]=Q,V.data[4*(j*A+W)+1]=X,V.data[4*(j*A+W)+2]=F,V.data[4*(j*A+W)+3]=R[j][W]*(255*T);U.putImageData(V,0,0),k=(0,f.throwIfFalsy)(M.createPattern(I,null)),N.set(O,k)}M.fillStyle=k,M.fillRect(D,P,z,H)}(d,m,c,n,l,g),!0;const x=i.boxDrawingDefinitions[o];if(x)return function(M,R,D,P,z,H,N){M.strokeStyle=M.fillStyle;for(const[O,k]of Object.entries(R)){let A;M.beginPath(),M.lineWidth=N*Number.parseInt(O),A=typeof k=="function"?k(.15,.15/H*z):k;for(const B of A.split(" ")){const I=B[0],U=C[I];if(!U){console.error(`Could not find drawing instructions for "${I}"`);continue}const V=B.substring(1).split(",");V[0]&&V[1]&&U(M,w(V,z,H,D,P,!0,N))}M.stroke(),M.closePath()}}(d,x,c,n,l,g,S),!0;const L=i.powerlineDefinitions[o];return!!L&&(function(M,R,D,P,z,H,N,O){const k=new Path2D;k.rect(D,P,z,H),M.clip(k),M.beginPath();const A=N/12;M.lineWidth=O*A;for(const B of R.d.split(" ")){const I=B[0],U=C[I];if(!U){console.error(`Could not find drawing instructions for "${I}"`);continue}const V=B.substring(1).split(",");V[0]&&V[1]&&U(M,w(V,z,H,D,P,!1,O,(R.leftPadding??0)*(A/2),(R.rightPadding??0)*(A/2)))}R.type===1?(M.strokeStyle=M.fillStyle,M.stroke()):M.fill(),M.closePath()}(d,L,c,n,l,g,b,S),!0)};const h=new Map;function v(d,o,c=0){return Math.max(Math.min(d,o),c)}const C={C:(d,o)=>d.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]),L:(d,o)=>d.lineTo(o[0],o[1]),M:(d,o)=>d.moveTo(o[0],o[1])};function w(d,o,c,n,l,g,b,S=0,E=0){const m=d.map(x=>parseFloat(x)||parseInt(x));if(m.length<2)throw new Error("Too few arguments for instruction");for(let x=0;x<m.length;x+=2)m[x]*=o-S*b-E*b,g&&m[x]!==0&&(m[x]=v(Math.round(m[x]+.5)-.5,o,0)),m[x]+=n+S*b;for(let x=1;x<m.length;x+=2)m[x]*=c,g&&m[x]!==0&&(m[x]=v(Math.round(m[x]+.5)-.5,c,0)),m[x]+=l;return m}},56:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.observeDevicePixelDimensions=void 0;const f=a(859);i.observeDevicePixelDimensions=function(p,h,v){let C=new h.ResizeObserver(w=>{const d=w.find(n=>n.target===p);if(!d)return;if(!("devicePixelContentBoxSize"in d))return C==null||C.disconnect(),void(C=void 0);const o=d.devicePixelContentBoxSize[0].inlineSize,c=d.devicePixelContentBoxSize[0].blockSize;o>0&&c>0&&v(o,c)});try{C.observe(p,{box:["device-pixel-content-box"]})}catch{C.disconnect(),C=void 0}return(0,f.toDisposable)(()=>C==null?void 0:C.disconnect())}},374:(y,i)=>{function a(p){return 57508<=p&&p<=57558}function f(p){return p>=128512&&p<=128591||p>=127744&&p<=128511||p>=128640&&p<=128767||p>=9728&&p<=9983||p>=9984&&p<=10175||p>=65024&&p<=65039||p>=129280&&p<=129535||p>=127462&&p<=127487}Object.defineProperty(i,"__esModule",{value:!0}),i.computeNextVariantOffset=i.createRenderDimensions=i.treatGlyphAsBackgroundColor=i.allowRescaling=i.isEmoji=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(p){if(!p)throw new Error("value must not be falsy");return p},i.isPowerlineGlyph=a,i.isRestrictedPowerlineGlyph=function(p){return 57520<=p&&p<=57527},i.isEmoji=f,i.allowRescaling=function(p,h,v,C){return h===1&&v>Math.ceil(1.5*C)&&p!==void 0&&p>255&&!f(p)&&!a(p)&&!function(w){return 57344<=w&&w<=63743}(p)},i.treatGlyphAsBackgroundColor=function(p){return a(p)||function(h){return 9472<=h&&h<=9631}(p)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},i.computeNextVariantOffset=function(p,h,v=0){return(p-(2*Math.round(h)-v))%(2*Math.round(h))}},296:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(p,h,v,C=!1){if(this.selectionStart=h,this.selectionEnd=v,!h||!v||h[0]===v[0]&&h[1]===v[1])return void this.clear();const w=p.buffers.active.ydisp,d=h[1]-w,o=v[1]-w,c=Math.max(d,0),n=Math.min(o,p.rows-1);c>=p.rows||n<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=C,this.viewportStartRow=d,this.viewportEndRow=o,this.viewportCappedStartRow=c,this.viewportCappedEndRow=n,this.startCol=h[0],this.endCol=v[0])}isCellSelected(p,h,v){return!!this.hasSelection&&(v-=p.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&v>=this.viewportCappedStartRow&&h<this.endCol&&v<=this.viewportCappedEndRow:h<this.startCol&&v>=this.viewportCappedStartRow&&h>=this.endCol&&v<=this.viewportCappedEndRow:v>this.viewportStartRow&&v<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&v===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&v===this.viewportStartRow&&h>=this.startCol)}}i.createSelectionRenderModel=function(){return new a}},509:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextureAtlas=void 0;const f=a(237),p=a(860),h=a(374),v=a(160),C=a(345),w=a(485),d=a(385),o=a(147),c=a(855),n={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}};let l;class g{get pages(){return this._pages}constructor(x,L,M){this._document=x,this._config=L,this._unicodeService=M,this._didWarmUp=!1,this._cacheMap=new w.FourKeyMap,this._cacheMapCombined=new w.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new o.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new C.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new C.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=E(x,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,h.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}dispose(){for(const x of this.pages)x.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){const x=new d.IdleTaskQueue;for(let L=33;L<126;L++)x.enqueue(()=>{if(!this._cacheMap.get(L,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT)){const M=this._drawToCache(L,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT);this._cacheMap.set(L,c.DEFAULT_COLOR,c.DEFAULT_COLOR,c.DEFAULT_EXT,M)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(const x of this._pages)x.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){if(g.maxAtlasPages&&this._pages.length>=Math.max(4,g.maxAtlasPages)){const L=this._pages.filter(N=>2*N.canvas.width<=(g.maxTextureSize||4096)).sort((N,O)=>O.canvas.width!==N.canvas.width?O.canvas.width-N.canvas.width:O.percentageUsed-N.percentageUsed);let M=-1,R=0;for(let N=0;N<L.length;N++)if(L[N].canvas.width!==R)M=N,R=L[N].canvas.width;else if(N-M==3)break;const D=L.slice(M,M+4),P=D.map(N=>N.glyphs[0].texturePage).sort((N,O)=>N>O?1:-1),z=this.pages.length-D.length,H=this._mergePages(D,z);H.version++;for(let N=P.length-1;N>=0;N--)this._deletePage(P[N]);this.pages.push(H),this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(H.canvas)}const x=new b(this._document,this._textureSize);return this._pages.push(x),this._activePages.push(x),this._onAddTextureAtlasCanvas.fire(x.canvas),x}_mergePages(x,L){const M=2*x[0].canvas.width,R=new b(this._document,M,x);for(const[D,P]of x.entries()){const z=D*P.canvas.width%M,H=Math.floor(D/2)*P.canvas.height;R.ctx.drawImage(P.canvas,z,H);for(const O of P.glyphs)O.texturePage=L,O.sizeClipSpace.x=O.size.x/M,O.sizeClipSpace.y=O.size.y/M,O.texturePosition.x+=z,O.texturePosition.y+=H,O.texturePositionClipSpace.x=O.texturePosition.x/M,O.texturePositionClipSpace.y=O.texturePosition.y/M;this._onRemoveTextureAtlasCanvas.fire(P.canvas);const N=this._activePages.indexOf(P);N!==-1&&this._activePages.splice(N,1)}return R}_deletePage(x){this._pages.splice(x,1);for(let L=x;L<this._pages.length;L++){const M=this._pages[L];for(const R of M.glyphs)R.texturePage--;M.version++}}getRasterizedGlyphCombinedChar(x,L,M,R,D){return this._getFromCacheMap(this._cacheMapCombined,x,L,M,R,D)}getRasterizedGlyph(x,L,M,R,D){return this._getFromCacheMap(this._cacheMap,x,L,M,R,D)}_getFromCacheMap(x,L,M,R,D,P=!1){return l=x.get(L,M,R,D),l||(l=this._drawToCache(L,M,R,D,P),x.set(L,M,R,D,l)),l}_getColorFromAnsiIndex(x){if(x>=this._config.colors.ansi.length)throw new Error("No color found for idx "+x);return this._config.colors.ansi[x]}_getBackgroundColor(x,L,M,R){if(this._config.allowTransparency)return v.NULL_COLOR;let D;switch(x){case 16777216:case 33554432:D=this._getColorFromAnsiIndex(L);break;case 50331648:const P=o.AttributeData.toColorRGB(L);D=v.channels.toColor(P[0],P[1],P[2]);break;default:D=M?v.color.opaque(this._config.colors.foreground):this._config.colors.background}return D}_getForegroundColor(x,L,M,R,D,P,z,H,N,O){const k=this._getMinimumContrastColor(x,L,M,R,D,P,z,N,H,O);if(k)return k;let A;switch(D){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&N&&P<8&&(P+=8),A=this._getColorFromAnsiIndex(P);break;case 50331648:const B=o.AttributeData.toColorRGB(P);A=v.channels.toColor(B[0],B[1],B[2]);break;default:A=z?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(A=v.color.opaque(A)),H&&(A=v.color.multiplyOpacity(A,f.DIM_OPACITY)),A}_resolveBackgroundRgba(x,L,M){switch(x){case 16777216:case 33554432:return this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return M?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(x,L,M,R){switch(x){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&R&&L<8&&(L+=8),this._getColorFromAnsiIndex(L).rgba;case 50331648:return L<<8;default:return M?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(x,L,M,R,D,P,z,H,N,O){if(this._config.minimumContrastRatio===1||O)return;const k=this._getContrastCache(N),A=k.getColor(x,R);if(A!==void 0)return A||void 0;const B=this._resolveBackgroundRgba(L,M,z),I=this._resolveForegroundRgba(D,P,z,H),U=v.rgba.ensureContrastRatio(B,I,this._config.minimumContrastRatio/(N?2:1));if(!U)return void k.setColor(x,R,null);const V=v.channels.toColor(U>>24&255,U>>16&255,U>>8&255);return k.setColor(x,R,V),V}_getContrastCache(x){return x?this._config.colors.halfContrastCache:this._config.colors.contrastCache}_drawToCache(x,L,M,R,D=!1){const P=typeof x=="number"?String.fromCharCode(x):x,z=Math.min(this._config.deviceCellWidth*Math.max(P.length,2)+4,this._textureSize);this._tmpCanvas.width<z&&(this._tmpCanvas.width=z);const H=Math.min(this._config.deviceCellHeight+8,this._textureSize);if(this._tmpCanvas.height<H&&(this._tmpCanvas.height=H),this._tmpCtx.save(),this._workAttributeData.fg=M,this._workAttributeData.bg=L,this._workAttributeData.extended.ext=R,this._workAttributeData.isInvisible())return n;const N=!!this._workAttributeData.isBold(),O=!!this._workAttributeData.isInverse(),k=!!this._workAttributeData.isDim(),A=!!this._workAttributeData.isItalic(),B=!!this._workAttributeData.isUnderline(),I=!!this._workAttributeData.isStrikethrough(),U=!!this._workAttributeData.isOverline();let V=this._workAttributeData.getFgColor(),Q=this._workAttributeData.getFgColorMode(),X=this._workAttributeData.getBgColor(),F=this._workAttributeData.getBgColorMode();if(O){const J=V;V=X,X=J;const le=Q;Q=F,F=le}const T=this._getBackgroundColor(F,X,O,k);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=T.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";const j=N?this._config.fontWeightBold:this._config.fontWeight,W=A?"italic":"";this._tmpCtx.font=`${W} ${j} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=f.TEXT_BASELINE;const Y=P.length===1&&(0,h.isPowerlineGlyph)(P.charCodeAt(0)),q=P.length===1&&(0,h.isRestrictedPowerlineGlyph)(P.charCodeAt(0)),re=this._getForegroundColor(L,F,X,M,Q,V,O,k,N,(0,h.treatGlyphAsBackgroundColor)(P.charCodeAt(0)));this._tmpCtx.fillStyle=re.css;const ee=q?0:4;let ce=!1;this._config.customGlyphs!==!1&&(ce=(0,p.tryDrawCustomChar)(this._tmpCtx,P,ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let fe,te=!Y;if(fe=typeof x=="number"?this._unicodeService.wcwidth(x):this._unicodeService.getStringCellWidth(x),B){this._tmpCtx.save();const J=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),le=J%2==1?.5:0;if(this._tmpCtx.lineWidth=J,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())te=!1,this._tmpCtx.strokeStyle=`rgb(${o.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{te=!1;let Ce=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&Ce<8&&(Ce+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(Ce).css}this._tmpCtx.beginPath();const Se=ee,_e=Math.ceil(ee+this._config.deviceCharHeight)-le-(D?2*J:0),We=_e+J,ke=_e+2*J;let Be=this._workAttributeData.getUnderlineVariantOffset();for(let Ce=0;Ce<fe;Ce++){this._tmpCtx.save();const he=Se+Ce*this._config.deviceCellWidth,oe=Se+(Ce+1)*this._config.deviceCellWidth,yr=he+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(he,_e),this._tmpCtx.lineTo(oe,_e),this._tmpCtx.moveTo(he,ke),this._tmpCtx.lineTo(oe,ke);break;case 3:const Or=J<=1?ke:Math.ceil(ee+this._config.deviceCharHeight-J/2)-le,Xt=J<=1?_e:Math.ceil(ee+this._config.deviceCharHeight+J/2)-le,mi=new Path2D;mi.rect(he,_e,this._config.deviceCellWidth,ke-_e),this._tmpCtx.clip(mi),this._tmpCtx.moveTo(he-this._config.deviceCellWidth/2,We),this._tmpCtx.bezierCurveTo(he-this._config.deviceCellWidth/2,Xt,he,Xt,he,We),this._tmpCtx.bezierCurveTo(he,Or,yr,Or,yr,We),this._tmpCtx.bezierCurveTo(yr,Xt,oe,Xt,oe,We),this._tmpCtx.bezierCurveTo(oe,Or,oe+this._config.deviceCellWidth/2,Or,oe+this._config.deviceCellWidth/2,We);break;case 4:const Ir=Be===0?0:Be>=J?2*J-Be:J-Be;Be>=J||Ir===0?(this._tmpCtx.setLineDash([Math.round(J),Math.round(J)]),this._tmpCtx.moveTo(he+Ir,_e),this._tmpCtx.lineTo(oe,_e)):(this._tmpCtx.setLineDash([Math.round(J),Math.round(J)]),this._tmpCtx.moveTo(he,_e),this._tmpCtx.lineTo(he+Ir,_e),this._tmpCtx.moveTo(he+Ir+J,_e),this._tmpCtx.lineTo(oe,_e)),Be=(0,h.computeNextVariantOffset)(oe-he,J,Be);break;case 5:const ws=.6,Zn=.3,Si=oe-he,bs=Math.floor(ws*Si),Me=Math.floor(Zn*Si),Ge=Si-bs-Me;this._tmpCtx.setLineDash([bs,Me,Ge]),this._tmpCtx.moveTo(he,_e),this._tmpCtx.lineTo(oe,_e);break;default:this._tmpCtx.moveTo(he,_e),this._tmpCtx.lineTo(oe,_e)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!ce&&this._config.fontSize>=12&&!this._config.allowTransparency&&P!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";const Ce=this._tmpCtx.measureText(P);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in Ce&&Ce.actualBoundingBoxDescent>0){this._tmpCtx.save();const he=new Path2D;he.rect(Se,_e-Math.ceil(J/2),this._config.deviceCellWidth*fe,ke-_e+Math.ceil(J/2)),this._tmpCtx.clip(he),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=T.css,this._tmpCtx.strokeText(P,ee,ee+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(U){const J=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),le=J%2==1?.5:0;this._tmpCtx.lineWidth=J,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+le),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*fe,ee+le),this._tmpCtx.stroke()}if(ce||this._tmpCtx.fillText(P,ee,ee+this._config.deviceCharHeight),P==="_"&&!this._config.allowTransparency){let J=S(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),T,re,te);if(J)for(let le=1;le<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=T.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(P,ee,ee+this._config.deviceCharHeight-le),J=S(this._tmpCtx.getImageData(ee,ee,this._config.deviceCellWidth,this._config.deviceCellHeight),T,re,te),J);le++);}if(I){const J=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),le=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=J,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(ee,ee+Math.floor(this._config.deviceCharHeight/2)-le),this._tmpCtx.lineTo(ee+this._config.deviceCharWidth*fe,ee+Math.floor(this._config.deviceCharHeight/2)-le),this._tmpCtx.stroke()}this._tmpCtx.restore();const st=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);let Dt;if(Dt=this._config.allowTransparency?function(J){for(let le=0;le<J.data.length;le+=4)if(J.data[le+3]>0)return!1;return!0}(st):S(st,T,re,te),Dt)return n;const ie=this._findGlyphBoundingBox(st,this._workBoundingBox,z,q,ce,ee);let se,ne;for(;;){if(this._activePages.length===0){const J=this._createNewPage();se=J,ne=J.currentRow,ne.height=ie.size.y;break}se=this._activePages[this._activePages.length-1],ne=se.currentRow;for(const J of this._activePages)ie.size.y<=J.currentRow.height&&(se=J,ne=J.currentRow);for(let J=this._activePages.length-1;J>=0;J--)for(const le of this._activePages[J].fixedRows)le.height<=ne.height&&ie.size.y<=le.height&&(se=this._activePages[J],ne=le);if(ne.y+ie.size.y>=se.canvas.height||ne.height>ie.size.y+2){let J=!1;if(se.currentRow.y+se.currentRow.height+ie.size.y>=se.canvas.height){let le;for(const Se of this._activePages)if(Se.currentRow.y+Se.currentRow.height+ie.size.y<Se.canvas.height){le=Se;break}if(le)se=le;else if(g.maxAtlasPages&&this._pages.length>=g.maxAtlasPages&&ne.y+ie.size.y<=se.canvas.height&&ne.height>=ie.size.y&&ne.x+ie.size.x<=se.canvas.width)J=!0;else{const Se=this._createNewPage();se=Se,ne=Se.currentRow,ne.height=ie.size.y,J=!0}}J||(se.currentRow.height>0&&se.fixedRows.push(se.currentRow),ne={x:0,y:se.currentRow.y+se.currentRow.height,height:ie.size.y},se.fixedRows.push(ne),se.currentRow={x:0,y:ne.y+ne.height,height:0})}if(ne.x+ie.size.x<=se.canvas.width)break;ne===se.currentRow?(ne.x=0,ne.y+=ne.height,ne.height=0):se.fixedRows.splice(se.fixedRows.indexOf(ne),1)}return ie.texturePage=this._pages.indexOf(se),ie.texturePosition.x=ne.x,ie.texturePosition.y=ne.y,ie.texturePositionClipSpace.x=ne.x/se.canvas.width,ie.texturePositionClipSpace.y=ne.y/se.canvas.height,ie.sizeClipSpace.x/=se.canvas.width,ie.sizeClipSpace.y/=se.canvas.height,ne.height=Math.max(ne.height,ie.size.y),ne.x+=ie.size.x,se.ctx.putImageData(st,ie.texturePosition.x-this._workBoundingBox.left,ie.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,ie.size.x,ie.size.y),se.addGlyph(ie),se.version++,ie}_findGlyphBoundingBox(x,L,M,R,D,P){L.top=0;const z=R?this._config.deviceCellHeight:this._tmpCanvas.height,H=R?this._config.deviceCellWidth:M;let N=!1;for(let O=0;O<z;O++){for(let k=0;k<H;k++){const A=O*this._tmpCanvas.width*4+4*k+3;if(x.data[A]!==0){L.top=O,N=!0;break}}if(N)break}L.left=0,N=!1;for(let O=0;O<P+H;O++){for(let k=0;k<z;k++){const A=k*this._tmpCanvas.width*4+4*O+3;if(x.data[A]!==0){L.left=O,N=!0;break}}if(N)break}L.right=H,N=!1;for(let O=P+H-1;O>=P;O--){for(let k=0;k<z;k++){const A=k*this._tmpCanvas.width*4+4*O+3;if(x.data[A]!==0){L.right=O,N=!0;break}}if(N)break}L.bottom=z,N=!1;for(let O=z-1;O>=0;O--){for(let k=0;k<H;k++){const A=O*this._tmpCanvas.width*4+4*k+3;if(x.data[A]!==0){L.bottom=O,N=!0;break}}if(N)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:L.right-L.left+1,y:L.bottom-L.top+1},sizeClipSpace:{x:L.right-L.left+1,y:L.bottom-L.top+1},offset:{x:-L.left+P+(R||D?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-L.top+P+(R||D?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}i.TextureAtlas=g;class b{get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(x){this._glyphs.push(x),this._usedPixels+=x.size.x*x.size.y}constructor(x,L,M){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],M)for(const R of M)this._glyphs.push(...R.glyphs),this._usedPixels+=R._usedPixels;this.canvas=E(x,L,L),this.ctx=(0,h.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function S(m,x,L,M){const R=x.rgba>>>24,D=x.rgba>>>16&255,P=x.rgba>>>8&255,z=L.rgba>>>24,H=L.rgba>>>16&255,N=L.rgba>>>8&255,O=Math.floor((Math.abs(R-z)+Math.abs(D-H)+Math.abs(P-N))/12);let k=!0;for(let A=0;A<m.data.length;A+=4)m.data[A]===R&&m.data[A+1]===D&&m.data[A+2]===P||M&&Math.abs(m.data[A]-R)+Math.abs(m.data[A+1]-D)+Math.abs(m.data[A+2]-P)<O?m.data[A+3]=0:k=!1;return k}function E(m,x,L){const M=m.createElement("canvas");return M.width=x,M.height=L,M}},160:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;let a=0,f=0,p=0,h=0;var v,C,w,d,o;function c(l){const g=l.toString(16);return g.length<2?"0"+g:g}function n(l,g){return l<g?(g+.05)/(l+.05):(l+.05)/(g+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(g,b,S,E){return E!==void 0?`#${c(g)}${c(b)}${c(S)}${c(E)}`:`#${c(g)}${c(b)}${c(S)}`},l.toRgba=function(g,b,S,E=255){return(g<<24|b<<16|S<<8|E)>>>0},l.toColor=function(g,b,S,E){return{css:l.toCss(g,b,S,E),rgba:l.toRgba(g,b,S,E)}}}(v||(i.channels=v={})),function(l){function g(b,S){return h=Math.round(255*S),[a,f,p]=o.toChannels(b.rgba),{css:v.toCss(a,f,p,h),rgba:v.toRgba(a,f,p,h)}}l.blend=function(b,S){if(h=(255&S.rgba)/255,h===1)return{css:S.css,rgba:S.rgba};const E=S.rgba>>24&255,m=S.rgba>>16&255,x=S.rgba>>8&255,L=b.rgba>>24&255,M=b.rgba>>16&255,R=b.rgba>>8&255;return a=L+Math.round((E-L)*h),f=M+Math.round((m-M)*h),p=R+Math.round((x-R)*h),{css:v.toCss(a,f,p),rgba:v.toRgba(a,f,p)}},l.isOpaque=function(b){return(255&b.rgba)==255},l.ensureContrastRatio=function(b,S,E){const m=o.ensureContrastRatio(b.rgba,S.rgba,E);if(m)return v.toColor(m>>24&255,m>>16&255,m>>8&255)},l.opaque=function(b){const S=(255|b.rgba)>>>0;return[a,f,p]=o.toChannels(S),{css:v.toCss(a,f,p),rgba:S}},l.opacity=g,l.multiplyOpacity=function(b,S){return h=255&b.rgba,g(b,h*S/255)},l.toColorRGB=function(b){return[b.rgba>>24&255,b.rgba>>16&255,b.rgba>>8&255]}}(C||(i.color=C={})),function(l){let g,b;try{const S=document.createElement("canvas");S.width=1,S.height=1;const E=S.getContext("2d",{willReadFrequently:!0});E&&(g=E,g.globalCompositeOperation="copy",b=g.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return a=parseInt(S.slice(1,2).repeat(2),16),f=parseInt(S.slice(2,3).repeat(2),16),p=parseInt(S.slice(3,4).repeat(2),16),v.toColor(a,f,p);case 5:return a=parseInt(S.slice(1,2).repeat(2),16),f=parseInt(S.slice(2,3).repeat(2),16),p=parseInt(S.slice(3,4).repeat(2),16),h=parseInt(S.slice(4,5).repeat(2),16),v.toColor(a,f,p,h);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const E=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(E)return a=parseInt(E[1]),f=parseInt(E[2]),p=parseInt(E[3]),h=Math.round(255*(E[5]===void 0?1:parseFloat(E[5]))),v.toColor(a,f,p,h);if(!g||!b)throw new Error("css.toColor: Unsupported css format");if(g.fillStyle=b,g.fillStyle=S,typeof g.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(g.fillRect(0,0,1,1),[a,f,p,h]=g.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:v.toRgba(a,f,p,h),css:S}}}(w||(i.css=w={})),function(l){function g(b,S,E){const m=b/255,x=S/255,L=E/255;return .2126*(m<=.03928?m/12.92:Math.pow((m+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}l.relativeLuminance=function(b){return g(b>>16&255,b>>8&255,255&b)},l.relativeLuminance2=g}(d||(i.rgb=d={})),function(l){function g(S,E,m){const x=S>>24&255,L=S>>16&255,M=S>>8&255;let R=E>>24&255,D=E>>16&255,P=E>>8&255,z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));for(;z<m&&(R>0||D>0||P>0);)R-=Math.max(0,Math.ceil(.1*R)),D-=Math.max(0,Math.ceil(.1*D)),P-=Math.max(0,Math.ceil(.1*P)),z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));return(R<<24|D<<16|P<<8|255)>>>0}function b(S,E,m){const x=S>>24&255,L=S>>16&255,M=S>>8&255;let R=E>>24&255,D=E>>16&255,P=E>>8&255,z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));for(;z<m&&(R<255||D<255||P<255);)R=Math.min(255,R+Math.ceil(.1*(255-R))),D=Math.min(255,D+Math.ceil(.1*(255-D))),P=Math.min(255,P+Math.ceil(.1*(255-P))),z=n(d.relativeLuminance2(R,D,P),d.relativeLuminance2(x,L,M));return(R<<24|D<<16|P<<8|255)>>>0}l.blend=function(S,E){if(h=(255&E)/255,h===1)return E;const m=E>>24&255,x=E>>16&255,L=E>>8&255,M=S>>24&255,R=S>>16&255,D=S>>8&255;return a=M+Math.round((m-M)*h),f=R+Math.round((x-R)*h),p=D+Math.round((L-D)*h),v.toRgba(a,f,p)},l.ensureContrastRatio=function(S,E,m){const x=d.relativeLuminance(S>>8),L=d.relativeLuminance(E>>8);if(n(x,L)<m){if(L<x){const D=g(S,E,m),P=n(x,d.relativeLuminance(D>>8));if(P<m){const z=b(S,E,m);return P>n(x,d.relativeLuminance(z>>8))?D:z}return D}const M=b(S,E,m),R=n(x,d.relativeLuminance(M>>8));if(R<m){const D=g(S,E,m);return R>n(x,d.relativeLuminance(D>>8))?M:D}return M}},l.reduceLuminance=g,l.increaseLuminance=b,l.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}}(o||(i.rgba=o={})),i.toPaddedHex=c,i.contrastRatio=n},345:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.runAndSubscribe=i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===a)return void this._listeners.splice(f,1)}}})),this._event}fire(a,f){const p=[];for(let h=0;h<this._listeners.length;h++)p.push(this._listeners[h]);for(let h=0;h<p.length;h++)p[h].call(void 0,a,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(a,f){return a(p=>f.fire(p))},i.runAndSubscribe=function(a,f){return f(void 0),a(p=>f(p))}},859:(y,i)=>{function a(f){for(const p of f)p.dispose();f.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const p=this._disposables.indexOf(f);p!==-1&&this._disposables.splice(p,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var p;this._isDisposed||f===this._value||((p=this._value)==null||p.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},i.toDisposable=function(f){return{dispose:f}},i.disposeArray=a,i.getDisposeArrayDisposable=function(f){return{dispose:()=>a(f)}}},485:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(p,h,v){this._data[p]||(this._data[p]={}),this._data[p][h]=v}get(p,h){return this._data[p]?this._data[p][h]:void 0}clear(){this._data={}}}i.TwoKeyMap=a,i.FourKeyMap=class{constructor(){this._data=new a}set(f,p,h,v,C){this._data.get(f,p)||this._data.set(f,p,new a),this._data.get(f,p).set(h,v,C)}get(f,p,h,v){var C;return(C=this._data.get(f,p))==null?void 0:C.get(h,v)}clear(){this._data.clear()}}},399:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof process<"u"&&"title"in process;const a=i.isNode?"node":navigator.userAgent,f=i.isNode?"node":navigator.platform;i.isFirefox=a.includes("Firefox"),i.isLegacyEdge=a.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(a),i.getSafariVersion=function(){if(!i.isSafari)return 0;const p=a.match(/Version\/(\d+)/);return p===null||p.length<2?0:parseInt(p[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),i.isIpad=f==="iPad",i.isIphone=f==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),i.isLinux=f.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(a)},385:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const f=a(399);class p{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let w=0,d=0,o=C.timeRemaining(),c=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),d=Math.max(w,d),c=C.timeRemaining(),1.5*d>c)return o-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-w))}ms`),void this._start();o=c}this.clear()}}class h extends p{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const w=Date.now()+C;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=h,i.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends p{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:h,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},147:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new a;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}i.AttributeData=a;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,v=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=v}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=f},782:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const f=a(133),p=a(855),h=a(147);class v extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const d=new v;return d.setFromCharData(w),d}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[p.CHAR_DATA_ATTR_INDEX],this.bg=0;let d=!1;if(w[p.CHAR_DATA_CHAR_INDEX].length>2)d=!0;else if(w[p.CHAR_DATA_CHAR_INDEX].length===2){const o=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const c=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=c&&c<=57343?this.content=1024*(o-55296)+c-56320+65536|w[p.CHAR_DATA_WIDTH_INDEX]<<22:d=!0}else d=!0}else this.content=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[p.CHAR_DATA_WIDTH_INDEX]<<22;d&&(this.combinedData=w[p.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[p.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=v},855:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},133:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},i.utf32ToString=function(a,f=0,p=a.length){let h="";for(let v=f;v<p;++v){let C=a[v];C>65535?(C-=65536,h+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):h+=String.fromCharCode(C)}return h},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,f){const p=a.length;if(!p)return 0;let h=0,v=0;if(this._interim){const C=a.charCodeAt(v++);56320<=C&&C<=57343?f[h++]=1024*(this._interim-55296)+C-56320+65536:(f[h++]=this._interim,f[h++]=C),this._interim=0}for(let C=v;C<p;++C){const w=a.charCodeAt(C);if(55296<=w&&w<=56319){if(++C>=p)return this._interim=w,h;const d=a.charCodeAt(C);56320<=d&&d<=57343?f[h++]=1024*(w-55296)+d-56320+65536:(f[h++]=w,f[h++]=d)}else w!==65279&&(f[h++]=w)}return h}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,f){const p=a.length;if(!p)return 0;let h,v,C,w,d=0,o=0,c=0;if(this.interim[0]){let g=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let S,E=0;for(;(S=63&this.interim[++E])&&E<4;)b<<=6,b|=S;const m=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=m-E;for(;c<x;){if(c>=p)return 0;if(S=a[c++],(192&S)!=128){c--,g=!0;break}this.interim[E++]=S,b<<=6,b|=63&S}g||(m===2?b<128?c--:f[d++]=b:m===3?b<2048||b>=55296&&b<=57343||b===65279||(f[d++]=b):b<65536||b>1114111||(f[d++]=b)),this.interim.fill(0)}const n=p-4;let l=c;for(;l<p;){for(;!(!(l<n)||128&(h=a[l])||128&(v=a[l+1])||128&(C=a[l+2])||128&(w=a[l+3]));)f[d++]=h,f[d++]=v,f[d++]=C,f[d++]=w,l+=4;if(h=a[l++],h<128)f[d++]=h;else if((224&h)==192){if(l>=p)return this.interim[0]=h,d;if(v=a[l++],(192&v)!=128){l--;continue}if(o=(31&h)<<6|63&v,o<128){l--;continue}f[d++]=o}else if((240&h)==224){if(l>=p)return this.interim[0]=h,d;if(v=a[l++],(192&v)!=128){l--;continue}if(l>=p)return this.interim[0]=h,this.interim[1]=v,d;if(C=a[l++],(192&C)!=128){l--;continue}if(o=(15&h)<<12|(63&v)<<6|63&C,o<2048||o>=55296&&o<=57343||o===65279)continue;f[d++]=o}else if((248&h)==240){if(l>=p)return this.interim[0]=h,d;if(v=a[l++],(192&v)!=128){l--;continue}if(l>=p)return this.interim[0]=h,this.interim[1]=v,d;if(C=a[l++],(192&C)!=128){l--;continue}if(l>=p)return this.interim[0]=h,this.interim[1]=v,this.interim[2]=C,d;if(w=a[l++],(192&w)!=128){l--;continue}if(o=(7&h)<<18|(63&v)<<12|(63&C)<<6|63&w,o<65536||o>1114111)continue;f[d++]=o}}return d}}},776:function(y,i,a){var f=this&&this.__decorate||function(o,c,n,l){var g,b=arguments.length,S=b<3?c:l===null?l=Object.getOwnPropertyDescriptor(c,n):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(o,c,n,l);else for(var E=o.length-1;E>=0;E--)(g=o[E])&&(S=(b<3?g(S):b>3?g(c,n,S):g(c,n))||S);return b>3&&S&&Object.defineProperty(c,n,S),S},p=this&&this.__param||function(o,c){return function(n,l){c(n,l,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const h=a(859),v=a(97),C={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let w,d=i.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let c=0;c<o.length;c++)typeof o[c]=="function"&&(o[c]=o[c]())}_log(o,c,n){this._evalLazyOptionalParams(n),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+c,...n)}trace(o,...c){var n;this._logLevel<=v.LogLevelEnum.TRACE&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.trace.bind(this._optionsService.options.logger))??console.log,o,c)}debug(o,...c){var n;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.debug.bind(this._optionsService.options.logger))??console.log,o,c)}info(o,...c){var n;this._logLevel<=v.LogLevelEnum.INFO&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.info.bind(this._optionsService.options.logger))??console.info,o,c)}warn(o,...c){var n;this._logLevel<=v.LogLevelEnum.WARN&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.warn.bind(this._optionsService.options.logger))??console.warn,o,c)}error(o,...c){var n;this._logLevel<=v.LogLevelEnum.ERROR&&this._log(((n=this._optionsService.options.logger)==null?void 0:n.error.bind(this._optionsService.options.logger))??console.error,o,c)}};i.LogService=d=f([p(0,v.IOptionsService)],d),i.setTraceLogger=function(o){w=o},i.traceCall=function(o,c,n){if(typeof n.value!="function")throw new Error("not supported");const l=n.value;n.value=function(...g){if(w.logLevel!==v.LogLevelEnum.TRACE)return l.apply(this,g);w.trace(`GlyphRenderer#${l.name}(${g.map(S=>JSON.stringify(S)).join(", ")})`);const b=l.apply(this,g);return w.trace(`GlyphRenderer#${l.name} return`,b),b}}},726:(y,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const a="di$target",f="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(p){return p[f]||[]},i.createDecorator=function(p){if(i.serviceRegistry.has(p))return i.serviceRegistry.get(p);const h=function(v,C,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(d,o,c){o[a]===o?o[f].push({id:d,index:c}):(o[f]=[{id:d,index:c}],o[a]=o)})(h,v,w)};return h.toString=()=>p,i.serviceRegistry.set(p,h),h}},97:(y,i,a)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const f=a(726);var p;i.IBufferService=(0,f.createDecorator)("BufferService"),i.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),i.ICoreService=(0,f.createDecorator)("CoreService"),i.ICharsetService=(0,f.createDecorator)("CharsetService"),i.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"}(p||(i.LogLevelEnum=p={})),i.ILogService=(0,f.createDecorator)("LogService"),i.IOptionsService=(0,f.createDecorator)("OptionsService"),i.IOscLinkService=(0,f.createDecorator)("OscLinkService"),i.IUnicodeService=(0,f.createDecorator)("UnicodeService"),i.IDecorationService=(0,f.createDecorator)("DecorationService")}},s={};function u(y){var i=s[y];if(i!==void 0)return i.exports;var a=s[y]={exports:{}};return r[y].call(a.exports,a,a.exports,u),a.exports}var _={};return(()=>{var y=_;Object.defineProperty(y,"__esModule",{value:!0}),y.WebglAddon=void 0;const i=u(345),a=u(859),f=u(399),p=u(666),h=u(776);class v extends a.Disposable{constructor(w){if(f.isSafari&&(0,f.getSafariVersion)()<16){const d={antialias:!1,depth:!1,preserveDrawingBuffer:!0};if(!document.createElement("canvas").getContext("webgl2",d))throw new Error("Webgl2 is only supported on Safari 16 and above")}super(),this._preserveDrawingBuffer=w,this._onChangeTextureAtlas=this.register(new i.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new i.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new i.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new i.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(w){const d=w._core;if(!w.element)return void this.register(d.onWillOpen(()=>this.activate(w)));this._terminal=w;const o=d.coreService,c=d.optionsService,n=d,l=n._renderService,g=n._characterJoinerService,b=n._charSizeService,S=n._coreBrowserService,E=n._decorationService,m=n._logService,x=n._themeService;(0,h.setTraceLogger)(m),this._renderer=this.register(new p.WebglRenderer(w,g,b,S,o,E,c,x,this._preserveDrawingBuffer)),this.register((0,i.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,i.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,i.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,i.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),l.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{const L=this._terminal._core._renderService;L.setRenderer(this._terminal._core._createRenderer()),L.handleResize(w.cols,w.rows)}))}get textureAtlas(){var w;return(w=this._renderer)==null?void 0:w.textureAtlas}clearTextureAtlas(){var w;(w=this._renderer)==null||w.clearTextureAtlas()}}y.WebglAddon=v})(),_})())})(Id);var og=Id.exports,Fd={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(self,()=>(()=>{var r={};return(()=>{var s=r;function u(_,y,i){return _.addEventListener(y,i),{dispose:()=>{i&&_.removeEventListener(y,i)}}}Object.defineProperty(s,"__esModule",{value:!0}),s.AttachAddon=void 0,s.AttachAddon=class{constructor(_,y){this._disposables=[],this._socket=_,this._socket.binaryType="arraybuffer",this._bidirectional=!(y&&y.bidirectional===!1)}activate(_){this._disposables.push(u(this._socket,"message",y=>{const i=y.data;_.write(typeof i=="string"?i:new Uint8Array(i))})),this._bidirectional&&(this._disposables.push(_.onData(y=>this._sendData(y))),this._disposables.push(_.onBinary(y=>this._sendBinary(y)))),this._disposables.push(u(this._socket,"close",()=>this.dispose())),this._disposables.push(u(this._socket,"error",()=>this.dispose()))}dispose(){for(const _ of this._disposables)_.dispose()}_sendData(_){this._checkOpenSocket()&&this._socket.send(_)}_sendBinary(_){if(!this._checkOpenSocket())return;const y=new Uint8Array(_.length);for(let i=0;i<_.length;++i)y[i]=255&_.charCodeAt(i);this._socket.send(y)}_checkOpenSocket(){switch(this._socket.readyState){case WebSocket.OPEN:return!0;case WebSocket.CONNECTING:throw new Error("Attach addon was loaded before socket was open");case WebSocket.CLOSING:return console.warn("Attach addon socket is closing"),!1;case WebSocket.CLOSED:throw new Error("Attach addon socket is closed");default:throw new Error("Unexpected socket state")}}}})(),r})())})(Fd);var ag=Fd.exports;function lg(){const{floatingSession:e,closeFloatingModal:t}=gi(),r=$.useRef(null),s=$.useRef(null),u=$.useRef(null),[_,y]=$.useState(!1),[i,a]=$.useState({x:100,y:100}),[f]=$.useState({width:600,height:400}),[p,h]=$.useState(!1),v=$.useRef({x:0,y:0});$.useEffect(()=>{if(!e||!r.current)return;const d=new sg.Terminal({cursorBlink:!0,cursorStyle:"block",fontFamily:"'Courier Prime', 'Courier New', monospace",fontSize:13,lineHeight:1.2,theme:{background:"#0a0a0a",foreground:"#00ff41",cursor:"#00ff41",cursorAccent:"#000000",selectionBackground:"#00ff4140",black:"#000000",red:"#ff4141",green:"#00ff41",yellow:"#ffff41",blue:"#4141ff",magenta:"#ff41ff",cyan:"#41ffff",white:"#ffffff",brightBlack:"#666666",brightRed:"#ff6666",brightGreen:"#66ff66",brightYellow:"#ffff66",brightBlue:"#6666ff",brightMagenta:"#ff66ff",brightCyan:"#66ffff",brightWhite:"#ffffff"}});s.current=d;const o=new ng.FitAddon;d.loadAddon(o),d.open(r.current);try{const b=new og.WebglAddon;d.loadAddon(b),b.onContextLoss(()=>b.dispose())}catch{console.warn("WebGL addon failed to load")}o.fit();const n=`${location.protocol==="https:"?"wss:":"ws:"}//${location.host}/terminal/ws`,l=new WebSocket(n);u.current=l,l.onopen=()=>{y(!0);const b=new ag.AttachAddon(l);d.loadAddon(b),setTimeout(()=>{d.paste(`tmux attach-session -t ${e}
`)},100)},l.onclose=()=>y(!1),l.onerror=()=>y(!1);const g=()=>o.fit();return window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g),l.close(),d.dispose()}},[e]);const C=d=>{d.target.closest(".modal-close")||(h(!0),v.current={x:d.clientX-i.x,y:d.clientY-i.y})};if($.useEffect(()=>{if(!p)return;const d=c=>{a({x:c.clientX-v.current.x,y:c.clientY-v.current.y})},o=()=>{h(!1)};return document.addEventListener("mousemove",d),document.addEventListener("mouseup",o),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",o)}},[p]),!e)return null;const w=e.includes("-")?e.split("-").slice(-1)[0]:e;return K.jsx("div",{className:"floating-modal-overlay",onClick:t,children:K.jsxs("div",{className:"floating-modal",style:{left:i.x,top:i.y,width:f.width,height:f.height},onClick:d=>d.stopPropagation(),children:[K.jsxs("div",{className:"floating-modal-header",onMouseDown:C,children:[K.jsx("span",{className:"modal-title",children:w}),K.jsxs("div",{className:"modal-controls",children:[K.jsx("span",{className:`status-dot ${_?"":"disconnected"}`}),K.jsx("button",{className:"modal-close",onClick:t,children:""})]})]}),K.jsx("div",{className:"floating-modal-body",ref:r})]})})}function cg({name:e}){const t=e.includes("-")?e.split("-").slice(-1)[0]:e;return K.jsx("div",{className:"session-item dragging-overlay",children:K.jsx("span",{className:"session-agent-name",children:t})})}function hg(){const[e,t]=$.useState("terminal"),[r,s]=$.useState(null),{addSessionToWindow:u,removeSessionFromWindow:_,setIsDragging:y,isDragging:i}=gi(),a=xp(Ep(Rl,{activationConstraint:{distance:4}})),f=h=>{s(h.active.id),y(!0)},p=h=>{var w,d,o,c;const{active:v,over:C}=h;if(s(null),y(!1),!C){if(((w=v.data.current)==null?void 0:w.type)==="tag"){const{sessionName:n,sourceWindowId:l}=v.data.current;_(l,n)}return}if(((d=C.data.current)==null?void 0:d.type)==="window"){const n=C.data.current.windowId;if(((o=v.data.current)==null?void 0:o.type)==="session")u(n,v.id);else if(((c=v.data.current)==null?void 0:c.type)==="tag"){const{sessionName:l,sourceWindowId:g}=v.data.current;g!==n&&(_(g,l),u(n,l))}}};return K.jsxs(wv,{sensors:a,onDragStart:f,onDragEnd:p,children:[K.jsxs("div",{className:`dashboard ${i?"is-dragging":""}`,children:[K.jsx(Gv,{activeTab:e,onTabChange:t}),K.jsxs("div",{className:"dashboard-content",children:[e==="terminal"&&K.jsxs(K.Fragment,{children:[K.jsx(Qv,{}),K.jsx(tg,{})]}),e==="files"&&K.jsx(rg,{}),e==="status"&&K.jsx(ig,{})]}),K.jsx(lg,{})]}),K.jsx($v,{children:r?K.jsx(cg,{name:r}):null})]})}function ug(){return K.jsx(Kv,{children:K.jsx(hg,{})})}To.createRoot(document.getElementById("root")).render(K.jsx(Le.StrictMode,{children:K.jsx(ug,{})}));
